import{jsx as E,jsxs as re,Fragment as Ce}from"react/jsx-runtime";import*as $e from"react";import N,{useEffect as le,useState as ae,useMemo as Pe,createContext as Hd,memo as de,forwardRef as Bd,useRef as te,useContext as mr,useCallback as ve}from"react";import{_ as os,k as $t,h as _e,B as dt,l as Ng,m as as,u as He,n as Vd,C as Cg,e as ss,g as vr,F as yr,f as fe,A as yt,p as Ig,q as Nn,r as Mg,P as Gd,R as Ag,E as er,o as js,T as kg,s as Tg,v as Rg,w as cs,x as Ud,y as Lg,z as qg,G as Yd,H as Wd,S as $g,I as Pg,J as Fg,K as wr,M as Dg,N as Og,O as zg,Q as Hg,D as Tt,$ as Bg,b as Vg,d as Gg,c as Ug,i as Yg,j as Wg}from"./index-C9t2UlUN.js";import{u as Qs}from"./ConfirmDialog-BDkqxnFL.js";import{V as Zg}from"./ViewHeader-cxZm8XhN.js";import{u as Fa}from"./useToggle-K3Kx99tM.js";import{B as Xg,D as Kg}from"./AuthenticationSection-Cd6r8c1Z.js";import{N as jg}from"./NameDescription-B30C9S9E.js";import{M as Cn,a as In}from"./Modal-Bgkd26UL.js";import{F as Mn,A as Qg}from"./Form-Cdw1qhWG.js";import{P as Jg,L as em}from"./PaginatingTableToolbar-oQUfBy2J.js";import{r as Bt,_ as br,k as An,a as Zd,b as Xd,c as Kd,d as tm,e as nm,f as jd,g as us,h as rm,i as kn,j as _r,l as ls,m as Qd,n as ds,o as Jd,p as im,q as om,s as am,t as sm,u as Ie,v as fs,w as Tn,x as ef,y as Rn,z as Ln,A as tf,B as nf,C as cm,D as hs,E as rf,F as um,G as lm,H as of,I as dm,J as af,K as fm,L as sf,M as hm,N as cf,O as pm,P as gm,Q as ps,R as mm,S as uf,T as vm,U as gs,V as ym,W as wm,X as bm,Y as _m,Z as xm,$ as Em,a0 as Sm}from"./KeycloakDataTable-2rLFZPhG.js";import"react-dom";import{s as zr,D as lf,a as df,b as ff,c as hf,d as Xt,e as Nm}from"./DataListItemRow-Bimi62Tu.js";import{D as Cm}from"./DynamicComponents-D5DD9CFr.js";import{T as pf}from"./trash-icon-ByiQCzIH.js";import{D as Im}from"./DataListControl-BRWG6uCI.js";import{T as Js}from"./Trans-DcN6j3pV.js";import{T as Mm,a as Am,b as Hr}from"./ToolbarContent-D6TJq6fk.js";import{F as ec,a as tc}from"./FlexItem-BEayPdRt.js";import"./RoutableTabs-vx5wTdby.js";import"./PageHandler-TK8xnd8P.js";import"./PageList-59HC89eh.js";import"./Tabs-CjrDEqsl.js";import"./MenuList-Br-Zu33q.js";import"./DraggableTable-CIWrK8lS.js";import"./AddRoleMappingModal-BWNuJU0W.js";import"./filter-icon-C8nM2k1N.js";import"./FormAccess-DnQCcStE.js";import"./copy-icon-CYSS18Ce.js";import"./TimeSelector-CWH4kuIN.js";import"./KeycloakTextInput-DrlF32nr.js";import"./EmptyStateBody-CyIhnUop.js";import"./EmptyStateSecondaryActions-BekVwNvY.js";import"./MultiLineInput-DibC-IV_.js";import"./question-circle-icon-B-vzDm0d.js";import"./sortBy-CgAHVq9r.js";import"./_baseFlatten-BQ8y46Zj.js";import"./grip-vertical-icon-B_ub3hpF.js";import"./FileUpload-CTw4RKK1.js";import"./CodeEditor-Cp4g17EF.js";import"./GroupPickerDialog-tI6XV7Ln.js";import"./KeySelect-CPI9XGq0.js";import"./PasswordInput-CJKuHljf.js";import"./KeycloakTextArea-DChmurIP.js";const gf=e=>{var{className:t="",isExpanded:n=!1,"aria-controls":r="","aria-label":i="Details",rowid:o="",id:a,buttonProps:s}=e,u=os(e,["className","isExpanded","aria-controls","aria-label","rowid","id","buttonProps"]);return $e.createElement("div",Object.assign({className:$t(zr.dataListItemControl,t)},u),$e.createElement("div",{className:$t(zr.dataListToggle)},$e.createElement(_e,Object.assign({id:a,variant:dt.plain,"aria-controls":r!==""&&r,"aria-label":i,"aria-labelledby":i!=="Details"?null:`${o} ${a}`,"aria-expanded":n},s),$e.createElement("div",{className:$t(zr.dataListToggleIcon)},$e.createElement(Ng,null)))))};gf.displayName="DataListToggle";const Pt={modifiers:{compact:"pf-m-compact",selected:"pf-m-selected",disabled:"pf-m-disabled"},themeDark:"pf-theme-dark",toggleGroup:"pf-c-toggle-group",toggleGroupButton:"pf-c-toggle-group__button",toggleGroupIcon:"pf-c-toggle-group__icon",toggleGroupItem:"pf-c-toggle-group__item",toggleGroupText:"pf-c-toggle-group__text"};var tr;(function(e){e.icon="icon",e.text="text"})(tr||(tr={}));const Da=({variant:e,children:t})=>$e.createElement("span",{className:$t(e==="icon"&&Pt.toggleGroupIcon,e==="text"&&Pt.toggleGroupText)},t);Da.displayName="ToggleGroupItemElement";const nr=e=>{var{text:t,icon:n,className:r,isDisabled:i=!1,isSelected:o=!1,"aria-label":a="",onChange:s=()=>{},buttonId:u=""}=e,l=os(e,["text","icon","className","isDisabled","isSelected","aria-label","onChange","buttonId"]);const c=d=>{s(!o,d)};return!a&&n&&!t&&console.warn("An accessible aria-label is required when using the toggle group item icon variant."),$e.createElement("div",Object.assign({className:$t(Pt.toggleGroupItem,r)},l),$e.createElement("button",Object.assign({type:"button",className:$t(Pt.toggleGroupButton,o&&Pt.modifiers.selected),"aria-pressed":o,onClick:c},a&&{"aria-label":a},i&&{disabled:!0},u&&{id:u}),n?$e.createElement(Da,{variant:tr.icon},n):null,t?$e.createElement(Da,{variant:tr.text},t):null))};nr.displayName="ToggleGroupItem";const mf=e=>{var{className:t,children:n,isCompact:r=!1,areAllGroupsDisabled:i=!1,"aria-label":o}=e,a=os(e,["className","children","isCompact","areAllGroupsDisabled","aria-label"]);const s=$e.Children.map(n,u=>u.type.name!==nr.name?u:$e.cloneElement(u,i?{isDisabled:!0}:{}));return $e.createElement("div",Object.assign({className:$t(Pt.toggleGroup,r&&Pt.modifiers.compact,t),role:"group","aria-label":o},a),s)};mf.displayName="ToggleGroup";const km={name:"CogIcon",height:512,width:512,svgPath:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z",yOffset:0,xOffset:0},Tm=as(km),Rm={name:"DomainIcon",height:1024,width:1024,svgPath:"M544,511.9 C561.476067,511.948945 575.664266,525.962873 575.994253,543.371439 L576,543.9 L576,991.9 C575.951055,1009.37607 561.937127,1023.56427 544.528561,1023.89425 L544,1023.9 L352,1023.9 C334.523933,1023.85105 320.335734,1009.83713 320.005747,992.428561 L320,991.9 L320,543.9 C320.048945,526.423933 334.062873,512.235734 351.471439,511.905747 L352,511.9 L544,511.9 Z M704,576 L704,960 L640,960 L640,576 L704,576 Z M512,896 L384,896 L384,960 L512,960 L512,896 Z M960,513.1 L960,513.2 C960,665.4 884.1,799.9 768,880.9 L768,880.9 L768,799.4 C773.3,794.6 778.4,789.8 783.5,784.7 C855.624209,712.728348 896.108133,614.991161 896,513.1 L896,513.1 L960,513.1 Z M149.8,385 C100.714385,524.561202 135.973879,679.905126 240.5,784.6 C245.5,789.7 250.7,794.6 256,799.3 L256,799.3 L256,880.8 C139.9,799.8 63.9999013,665.3 63.9999013,513.1 C63.9712238,469.725105 70.236499,426.575548 82.6,385 L82.6,385 Z M512.1,704 L384,704 L384,832 L512.1,832 L512.1,704 Z M512,576 L448,576 L448,640 L512,640 L512,576 Z M864,-1.13686838e-13 C881.496381,-1.13686838e-13 895.713128,14.0417829 895.995713,31.4708215 L896,32 L896,406 C896,423.496381 881.958217,437.713128 864.529179,437.995713 L864,438 L608,438 C590.503619,438 576.286872,423.958217 576.004287,406.529179 L576,406 L576,32 C576,14.5036191 590.041783,0.286872383 607.470821,0.00428708574 L608,-1.13686838e-13 L864,-1.13686838e-13 Z M1024,64 L1024,384 L960,384 L960,64 L1024,64 Z M832,256 L640,256 L640,352 L832,352 L832,256 Z M224,-5.68434189e-14 C241.476067,0.0489452394 255.664266,14.0628726 255.994253,31.4714395 L256,32 L256,288 C255.951055,305.476067 241.937127,319.664266 224.528561,319.994253 L224,320 L32,320 C14.5239331,319.951055 0.335734448,305.937127 0.00574685353,288.528561 L0,288 L0,32 C0.0489452394,14.5239331 14.0628726,0.335734448 31.4714395,0.00574685353 L32,-5.68434189e-14 L224,-5.68434189e-14 Z M192,192 L64,192 L64,256 L192,256 L192,192 Z M512,65 L512,129 C460.642759,128.90985 409.795141,139.181409 362.5,159.2 C347.917219,165.399771 333.724426,172.47947 320,180.4 L320,180.4 L320,108.2 C380.012207,79.7623165 445.590913,65.0071076 512,65 L512,65 Z M832,64 L736,64 L736,160 L832,160 L832,64 Z M192,64 L128,64 L128,128 L192,128 L192,64 Z",yOffset:0,xOffset:0},Lm=as(Rm),qm={name:"TableIcon",height:512,width:512,svgPath:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z",yOffset:0,xOffset:0},$m=as(qm),Pm="_icon_1gmts_2",Fm={icon:Pm},Dm=()=>{const{t:e}=He();return E(Vd,{icon:E(Cg,{className:Fm.icon}),children:e("buildIn")})},Om=({flow:e,toggleDialog:t})=>{const{t:n}=He(),{addAlert:r,addError:i}=ss(),o=vr({mode:"onChange"}),{reset:a,handleSubmit:s}=o;le(()=>a(e),[e]);const u=async l=>{try{await fe.authenticationManagement.updateFlow({flowId:e.id},{...e,...l}),r(n("updateFlowSuccess"),yt.success)}catch(c){i("updateFlowError",c)}t()};return E(Cn,{title:n("editFlow"),onClose:t,variant:In.small,actions:[E(_e,{"data-testid":"confirm",type:"submit",form:"edit-flow-form",children:n("edit")},"confirm"),E(_e,{"data-testid":"cancel",variant:dt.link,onClick:()=>t(),children:n("cancel")},"cancel")],isOpen:!0,children:E(yr,{...o,children:E(Mn,{id:"edit-flow-form",onSubmit:s(u),isHorizontal:!0,children:E(jg,{})})})})},zm=({list:e,setValue:t})=>E(Gd,{variant:"light",className:"pf-u-py-lg",children:E(Mn,{isHorizontal:!0,children:e?.map(n=>E(Ag,{id:n.id,name:"provider",label:n.displayName,"data-testid":n.id,description:n.description,onChange:()=>{t(n)}},n.id))})}),ms=({name:e,type:t,onSelect:n})=>{const{t:r}=He(),[i,o]=ae(),[a,s]=ae(),[u,l]=ae(10),[c,d]=ae(0),[h,f]=ae(""),g=Ig();Nn(async()=>{switch(t){case"client":return fe.authenticationManagement.getClientAuthenticatorProviders();case"form":return fe.authenticationManagement.getFormActionProviders();case"condition":return(await fe.authenticationManagement.getAuthenticatorProviders()).filter(is);case"basic":default:return(await fe.authenticationManagement.getAuthenticatorProviders()).filter(v=>!is(v))}},m=>s(m),[]);const p=Pe(()=>{const m=h.trim().toLowerCase();return g(a??[],Mg("displayName")).filter(({displayName:v,description:b})=>v?.toLowerCase().includes(m)||b?.toLowerCase().includes(m)).slice(c,c+u+1)},[a,h,c,u]);return E(Cn,{variant:In.medium,isOpen:!0,title:r("addStepTo",{name:e}),onClose:()=>n(),actions:[E(_e,{id:"modal-add","data-testid":"modal-add",onClick:()=>n(i),children:r("add")},"add"),E(_e,{"data-testid":"cancel",id:"modal-cancel",variant:dt.link,onClick:()=>{n()},children:r("cancel")},"cancel")],children:a&&E(Jg,{count:p.length||0,first:c,max:u,onNextClick:d,onPreviousClick:d,onPerPageSelect:(m,v)=>{d(m),l(v)},inputGroupName:"search",inputGroupPlaceholder:r("search"),inputGroupOnEnter:f,children:E(zm,{list:p.slice(0,u),setValue:o})})})},nc=["basic-flow","form-flow"],vs=({name:e,onConfirm:t,onCancel:n})=>{const{t:r}=He(),i=vr(),[o,a]=ae();return Nn(()=>fe.authenticationManagement.getFormProviders(),a,[]),le(()=>{o?.length===1&&i.setValue("provider",o[0].id)},[o]),E(Cn,{variant:In.medium,title:r("addStepTo",{name:e}),onClose:n,actions:[E(_e,{"data-testid":"modal-add",type:"submit",form:"sub-flow-form",children:r("add")},"add"),E(_e,{"data-testid":"cancel",variant:dt.link,onClick:n,children:r("cancel")},"cancel")],isOpen:!0,children:E(Mn,{id:"sub-flow-form",onSubmit:i.handleSubmit(t),isHorizontal:!0,children:re(yr,{...i,children:[E(er,{name:"name",label:r("name"),labelIcon:r("clientIdHelp"),rules:{required:{value:!0,message:r("required")}}}),E(er,{name:"description",label:r("description"),labelIcon:r("flowNameDescriptionHelp")}),E(js,{name:"type",menuAppendTo:"parent",label:r("flowType"),options:nc.map(s=>({key:s,value:r(`flow-type.${s}`)})),controller:{defaultValue:nc[0]}}),o&&o.length>1&&E(js,{name:"provider",label:r("provider"),labelIcon:r("authenticationFlowTypeHelp"),options:o.map(s=>({key:s.id,value:s.displayName})),controller:{defaultValue:""}})]})})})},Hm=["addExecution","addSubFlow"],Bm=({flow:e,onAddExecution:t,onAddFlow:n})=>{const{t:r}=He(),[i,o]=ae();return re(Ce,{children:[i==="addExecution"&&E(ms,{name:e.alias,type:e.providerId==="client-flow"?"client":"basic",onSelect:a=>{a&&t(a),o(void 0)}}),i==="addSubFlow"&&E(vs,{name:e.alias,onCancel:()=>o(void 0),onConfirm:a=>{n(a),o(void 0)}}),E(em,{message:r("emptyExecution"),instructions:r("emptyExecutionInstructions")}),E("div",{className:"keycloak__empty-execution-state__block",children:Hm.map(a=>re(ec,{className:"keycloak__empty-execution-state__help",children:[re(tc,{flex:{default:"flex_1"},children:[E(kg,{headingLevel:"h2",size:Tg.md,children:r(`${a}Title`)}),E("p",{children:r(a)})]}),E(ec,{alignSelf:{default:"alignSelfCenter"},children:E(tc,{children:E(_e,{"data-testid":a,variant:"tertiary",onClick:()=>o(a),children:r(a)})})})]},a))})]})};function Ee(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Ee(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var vf={exports:{}},yf={},wf={exports:{}},bf={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jt=N;function Vm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gm=typeof Object.is=="function"?Object.is:Vm,Um=Jt.useState,Ym=Jt.useEffect,Wm=Jt.useLayoutEffect,Zm=Jt.useDebugValue;function Xm(e,t){var n=t(),r=Um({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return Wm(function(){i.value=n,i.getSnapshot=t,Br(i)&&o({inst:i})},[e,n,t]),Ym(function(){return Br(i)&&o({inst:i}),e(function(){Br(i)&&o({inst:i})})},[e]),Zm(n),n}function Br(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gm(e,n)}catch{return!0}}function Km(e,t){return t()}var jm=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Km:Xm;bf.useSyncExternalStore=Jt.useSyncExternalStore!==void 0?Jt.useSyncExternalStore:jm;wf.exports=bf;var Qm=wf.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xr=N,Jm=Qm;function e0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var t0=typeof Object.is=="function"?Object.is:e0,n0=Jm.useSyncExternalStore,r0=xr.useRef,i0=xr.useEffect,o0=xr.useMemo,a0=xr.useDebugValue;yf.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=r0(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=o0(function(){function u(f){if(!l){if(l=!0,c=f,f=r(f),i!==void 0&&a.hasValue){var g=a.value;if(i(g,f))return d=g}return d=f}if(g=d,t0(c,f))return g;var p=r(f);return i!==void 0&&i(g,p)?g:(c=f,d=p)}var l=!1,c,d,h=n===void 0?null:n;return[function(){return u(t())},h===null?void 0:function(){return u(h())}]},[t,n,r,i]);var s=n0(e,o[0],o[1]);return i0(function(){a.hasValue=!0,a.value=s},[s]),a0(s),s};vf.exports=yf;var s0=vf.exports;const c0=Rg(s0);var u0={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const rc=e=>{let t;const n=new Set,r=(u,l)=>{const c=typeof u=="function"?u(t):u;if(!Object.is(c,t)){const d=t;t=l??typeof c!="object"?c:Object.assign({},t,c),n.forEach(h=>h(t,d))}},i=()=>t,s={setState:r,getState:i,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(u0?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(r,i,s),s},l0=e=>e?rc(e):rc,{useDebugValue:d0}=N,{useSyncExternalStoreWithSelector:f0}=c0;function _f(e,t=e.getState,n){const r=f0(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return d0(r),r}const ic=(e,t)=>{const n=l0(e),r=(i,o=t)=>_f(n,i,o);return Object.assign(r,n),r},h0=(e,t)=>e?ic(e,t):ic;function xe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}var p0={value:()=>{}};function Er(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Kn(n)}function Kn(e){this._=e}function g0(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Kn.prototype=Er.prototype={constructor:Kn,on:function(e,t){var n=this._,r=g0(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=m0(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=oc(n[i],e.name,t);else if(t==null)for(i in n)n[i]=oc(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Kn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function m0(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function oc(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=p0,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Oa="http://www.w3.org/1999/xhtml";const ac={svg:"http://www.w3.org/2000/svg",xhtml:Oa,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Sr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ac.hasOwnProperty(t)?{space:ac[t],local:e}:e}function v0(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Oa&&t.documentElement.namespaceURI===Oa?t.createElement(e):t.createElementNS(n,e)}}function y0(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function xf(e){var t=Sr(e);return(t.local?y0:v0)(t)}function w0(){}function ys(e){return e==null?w0:function(){return this.querySelector(e)}}function b0(e){typeof e!="function"&&(e=ys(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=new Array(a),u,l,c=0;c<a;++c)(u=o[c])&&(l=e.call(u,u.__data__,c,o))&&("__data__"in u&&(l.__data__=u.__data__),s[c]=l);return new Fe(r,this._parents)}function _0(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function x0(){return[]}function Ef(e){return e==null?x0:function(){return this.querySelectorAll(e)}}function E0(e){return function(){return _0(e.apply(this,arguments))}}function S0(e){typeof e=="function"?e=E0(e):e=Ef(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],s=a.length,u,l=0;l<s;++l)(u=a[l])&&(r.push(e.call(u,u.__data__,l,a)),i.push(u));return new Fe(r,i)}function Sf(e){return function(){return this.matches(e)}}function Nf(e){return function(t){return t.matches(e)}}var N0=Array.prototype.find;function C0(e){return function(){return N0.call(this.children,e)}}function I0(){return this.firstElementChild}function M0(e){return this.select(e==null?I0:C0(typeof e=="function"?e:Nf(e)))}var A0=Array.prototype.filter;function k0(){return Array.from(this.children)}function T0(e){return function(){return A0.call(this.children,e)}}function R0(e){return this.selectAll(e==null?k0:T0(typeof e=="function"?e:Nf(e)))}function L0(e){typeof e!="function"&&(e=Sf(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],u,l=0;l<a;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&s.push(u);return new Fe(r,this._parents)}function Cf(e){return new Array(e.length)}function q0(){return new Fe(this._enter||this._groups.map(Cf),this._parents)}function rr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}rr.prototype={constructor:rr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function $0(e){return function(){return e}}function P0(e,t,n,r,i,o){for(var a=0,s,u=t.length,l=o.length;a<l;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new rr(e,o[a]);for(;a<u;++a)(s=t[a])&&(i[a]=s)}function F0(e,t,n,r,i,o,a){var s,u,l=new Map,c=t.length,d=o.length,h=new Array(c),f;for(s=0;s<c;++s)(u=t[s])&&(h[s]=f=a.call(u,u.__data__,s,t)+"",l.has(f)?i[s]=u:l.set(f,u));for(s=0;s<d;++s)f=a.call(e,o[s],s,o)+"",(u=l.get(f))?(r[s]=u,u.__data__=o[s],l.delete(f)):n[s]=new rr(e,o[s]);for(s=0;s<c;++s)(u=t[s])&&l.get(h[s])===u&&(i[s]=u)}function D0(e){return e.__data__}function O0(e,t){if(!arguments.length)return Array.from(this,D0);var n=t?F0:P0,r=this._parents,i=this._groups;typeof e!="function"&&(e=$0(e));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],d=i[l],h=d.length,f=z0(e.call(c,c&&c.__data__,l,r)),g=f.length,p=s[l]=new Array(g),m=a[l]=new Array(g),v=u[l]=new Array(h);n(c,d,p,m,v,f,t);for(var b=0,S=0,w,A;b<g;++b)if(w=p[b]){for(b>=S&&(S=b+1);!(A=m[S])&&++S<g;);w._next=A||null}}return a=new Fe(a,r),a._enter=s,a._exit=u,a}function z0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function H0(){return new Fe(this._exit||this._groups.map(Cf),this._parents)}function B0(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function V0(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u)for(var l=n[u],c=r[u],d=l.length,h=s[u]=new Array(d),f,g=0;g<d;++g)(f=l[g]||c[g])&&(h[g]=f);for(;u<i;++u)s[u]=n[u];return new Fe(s,this._parents)}function G0(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function U0(e){e||(e=Y0);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,u=i[o]=new Array(s),l,c=0;c<s;++c)(l=a[c])&&(u[c]=l);u.sort(t)}return new Fe(i,this._parents).order()}function Y0(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function W0(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Z0(){return Array.from(this)}function X0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function K0(){let e=0;for(const t of this)++e;return e}function j0(){return!this.node()}function Q0(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&e.call(s,s.__data__,o,i);return this}function J0(e){return function(){this.removeAttribute(e)}}function ev(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tv(e,t){return function(){this.setAttribute(e,t)}}function nv(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function rv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function iv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ov(e,t){var n=Sr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?ev:J0:typeof t=="function"?n.local?iv:rv:n.local?nv:tv)(n,t))}function If(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function av(e){return function(){this.style.removeProperty(e)}}function sv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function cv(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function uv(e,t,n){return arguments.length>1?this.each((t==null?av:typeof t=="function"?cv:sv)(e,t,n??"")):en(this.node(),e)}function en(e,t){return e.style.getPropertyValue(t)||If(e).getComputedStyle(e,null).getPropertyValue(t)}function lv(e){return function(){delete this[e]}}function dv(e,t){return function(){this[e]=t}}function fv(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function hv(e,t){return arguments.length>1?this.each((t==null?lv:typeof t=="function"?fv:dv)(e,t)):this.node()[e]}function Mf(e){return e.trim().split(/^|\s+/)}function ws(e){return e.classList||new Af(e)}function Af(e){this._node=e,this._names=Mf(e.getAttribute("class")||"")}Af.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function kf(e,t){for(var n=ws(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Tf(e,t){for(var n=ws(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function pv(e){return function(){kf(this,e)}}function gv(e){return function(){Tf(this,e)}}function mv(e,t){return function(){(t.apply(this,arguments)?kf:Tf)(this,e)}}function vv(e,t){var n=Mf(e+"");if(arguments.length<2){for(var r=ws(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?mv:t?pv:gv)(n,t))}function yv(){this.textContent=""}function wv(e){return function(){this.textContent=e}}function bv(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function _v(e){return arguments.length?this.each(e==null?yv:(typeof e=="function"?bv:wv)(e)):this.node().textContent}function xv(){this.innerHTML=""}function Ev(e){return function(){this.innerHTML=e}}function Sv(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Nv(e){return arguments.length?this.each(e==null?xv:(typeof e=="function"?Sv:Ev)(e)):this.node().innerHTML}function Cv(){this.nextSibling&&this.parentNode.appendChild(this)}function Iv(){return this.each(Cv)}function Mv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Av(){return this.each(Mv)}function kv(e){var t=typeof e=="function"?e:xf(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Tv(){return null}function Rv(e,t){var n=typeof e=="function"?e:xf(e),r=t==null?Tv:typeof t=="function"?t:ys(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Lv(){var e=this.parentNode;e&&e.removeChild(this)}function qv(){return this.each(Lv)}function $v(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Pv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fv(e){return this.select(e?Pv:$v)}function Dv(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ov(e){return function(t){e.call(this,t,this.__data__)}}function zv(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Hv(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Bv(e,t,n){return function(){var r=this.__on,i,o=Ov(t);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Vv(e,t,n){var r=zv(e+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,c;u<l;++u)for(i=0,c=s[u];i<o;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?Bv:Hv,i=0;i<o;++i)this.each(s(r[i],t,n));return this}function Rf(e,t,n){var r=If(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Gv(e,t){return function(){return Rf(this,e,t)}}function Uv(e,t){return function(){return Rf(this,e,t.apply(this,arguments))}}function Yv(e,t){return this.each((typeof t=="function"?Uv:Gv)(e,t))}function*Wv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Lf=[null];function Fe(e,t){this._groups=e,this._parents=t}function qn(){return new Fe([[document.documentElement]],Lf)}function Zv(){return this}Fe.prototype=qn.prototype={constructor:Fe,select:b0,selectAll:S0,selectChild:M0,selectChildren:R0,filter:L0,data:O0,enter:q0,exit:H0,join:B0,merge:V0,selection:Zv,order:G0,sort:U0,call:W0,nodes:Z0,node:X0,size:K0,empty:j0,each:Q0,attr:ov,style:uv,property:hv,classed:vv,text:_v,html:Nv,raise:Iv,lower:Av,append:kv,insert:Rv,remove:qv,clone:Fv,datum:Dv,on:Vv,dispatch:Yv,[Symbol.iterator]:Wv};function Oe(e){return typeof e=="string"?new Fe([[document.querySelector(e)]],[document.documentElement]):new Fe([[e]],Lf)}function Xv(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ue(e,t){if(e=Xv(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Kv={passive:!1},vn={capture:!0,passive:!1};function Vr(e){e.stopImmediatePropagation()}function Kt(e){e.preventDefault(),e.stopImmediatePropagation()}function qf(e){var t=e.document.documentElement,n=Oe(e).on("dragstart.drag",Kt,vn);"onselectstart"in t?n.on("selectstart.drag",Kt,vn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function $f(e,t){var n=e.document.documentElement,r=Oe(e).on("dragstart.drag",null);t&&(r.on("click.drag",Kt,vn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Dn=e=>()=>e;function za(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}za.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function jv(e){return!e.ctrlKey&&!e.button}function Qv(){return this.parentNode}function Jv(e,t){return t??{x:e.x,y:e.y}}function ey(){return navigator.maxTouchPoints||"ontouchstart"in this}function ty(){var e=jv,t=Qv,n=Jv,r=ey,i={},o=Er("start","drag","end"),a=0,s,u,l,c,d=0;function h(w){w.on("mousedown.drag",f).filter(r).on("touchstart.drag",m).on("touchmove.drag",v,Kv).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(w,A){if(!(c||!e.call(this,w,A))){var M=S(this,t.call(this,w,A),w,A,"mouse");M&&(Oe(w.view).on("mousemove.drag",g,vn).on("mouseup.drag",p,vn),qf(w.view),Vr(w),l=!1,s=w.clientX,u=w.clientY,M("start",w))}}function g(w){if(Kt(w),!l){var A=w.clientX-s,M=w.clientY-u;l=A*A+M*M>d}i.mouse("drag",w)}function p(w){Oe(w.view).on("mousemove.drag mouseup.drag",null),$f(w.view,l),Kt(w),i.mouse("end",w)}function m(w,A){if(e.call(this,w,A)){var M=w.changedTouches,q=t.call(this,w,A),$=M.length,T,D;for(T=0;T<$;++T)(D=S(this,q,w,A,M[T].identifier,M[T]))&&(Vr(w),D("start",w,M[T]))}}function v(w){var A=w.changedTouches,M=A.length,q,$;for(q=0;q<M;++q)($=i[A[q].identifier])&&(Kt(w),$("drag",w,A[q]))}function b(w){var A=w.changedTouches,M=A.length,q,$;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),q=0;q<M;++q)($=i[A[q].identifier])&&(Vr(w),$("end",w,A[q]))}function S(w,A,M,q,$,T){var D=o.copy(),F=Ue(T||M,A),O,C,y;if((y=n.call(w,new za("beforestart",{sourceEvent:M,target:h,identifier:$,active:a,x:F[0],y:F[1],dx:0,dy:0,dispatch:D}),q))!=null)return O=y.x-F[0]||0,C=y.y-F[1]||0,function I(_,R,P){var x=F,L;switch(_){case"start":i[$]=I,L=a++;break;case"end":delete i[$],--a;case"drag":F=Ue(P||R,A),L=a;break}D.call(_,w,new za(_,{sourceEvent:R,subject:y,target:h,identifier:$,active:L,x:F[0]+O,y:F[1]+C,dx:F[0]-x[0],dy:F[1]-x[1],dispatch:D}),q)}}return h.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Dn(!!w),h):e},h.container=function(w){return arguments.length?(t=typeof w=="function"?w:Dn(w),h):t},h.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Dn(w),h):n},h.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:Dn(!!w),h):r},h.on=function(){var w=o.on.apply(o,arguments);return w===o?h:w},h.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,h):Math.sqrt(d)},h}function bs(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Pf(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function $n(){}var yn=.7,ir=1/yn,jt="\\s*([+-]?\\d+)\\s*",wn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ny=/^#([0-9a-f]{3,8})$/,ry=new RegExp(`^rgb\\(${jt},${jt},${jt}\\)$`),iy=new RegExp(`^rgb\\(${nt},${nt},${nt}\\)$`),oy=new RegExp(`^rgba\\(${jt},${jt},${jt},${wn}\\)$`),ay=new RegExp(`^rgba\\(${nt},${nt},${nt},${wn}\\)$`),sy=new RegExp(`^hsl\\(${wn},${nt},${nt}\\)$`),cy=new RegExp(`^hsla\\(${wn},${nt},${nt},${wn}\\)$`),sc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bs($n,bn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:cc,formatHex:cc,formatHex8:uy,formatHsl:ly,formatRgb:uc,toString:uc});function cc(){return this.rgb().formatHex()}function uy(){return this.rgb().formatHex8()}function ly(){return Ff(this).formatHsl()}function uc(){return this.rgb().formatRgb()}function bn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ny.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?lc(t):n===3?new Te(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?On(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?On(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ry.exec(e))?new Te(t[1],t[2],t[3],1):(t=iy.exec(e))?new Te(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=oy.exec(e))?On(t[1],t[2],t[3],t[4]):(t=ay.exec(e))?On(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=sy.exec(e))?hc(t[1],t[2]/100,t[3]/100,1):(t=cy.exec(e))?hc(t[1],t[2]/100,t[3]/100,t[4]):sc.hasOwnProperty(e)?lc(sc[e]):e==="transparent"?new Te(NaN,NaN,NaN,0):null}function lc(e){return new Te(e>>16&255,e>>8&255,e&255,1)}function On(e,t,n,r){return r<=0&&(e=t=n=NaN),new Te(e,t,n,r)}function dy(e){return e instanceof $n||(e=bn(e)),e?(e=e.rgb(),new Te(e.r,e.g,e.b,e.opacity)):new Te}function Ha(e,t,n,r){return arguments.length===1?dy(e):new Te(e,t,n,r??1)}function Te(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}bs(Te,Ha,Pf($n,{brighter(e){return e=e==null?ir:Math.pow(ir,e),new Te(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?yn:Math.pow(yn,e),new Te(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Te(Ft(this.r),Ft(this.g),Ft(this.b),or(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dc,formatHex:dc,formatHex8:fy,formatRgb:fc,toString:fc}));function dc(){return`#${Rt(this.r)}${Rt(this.g)}${Rt(this.b)}`}function fy(){return`#${Rt(this.r)}${Rt(this.g)}${Rt(this.b)}${Rt((isNaN(this.opacity)?1:this.opacity)*255)}`}function fc(){const e=or(this.opacity);return`${e===1?"rgb(":"rgba("}${Ft(this.r)}, ${Ft(this.g)}, ${Ft(this.b)}${e===1?")":`, ${e})`}`}function or(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ft(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Rt(e){return e=Ft(e),(e<16?"0":"")+e.toString(16)}function hc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ye(e,t,n,r)}function Ff(e){if(e instanceof Ye)return new Ye(e.h,e.s,e.l,e.opacity);if(e instanceof $n||(e=bn(e)),!e)return new Ye;if(e instanceof Ye)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Ye(a,s,u,e.opacity)}function hy(e,t,n,r){return arguments.length===1?Ff(e):new Ye(e,t,n,r??1)}function Ye(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}bs(Ye,hy,Pf($n,{brighter(e){return e=e==null?ir:Math.pow(ir,e),new Ye(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?yn:Math.pow(yn,e),new Ye(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Te(Gr(e>=240?e-240:e+120,i,r),Gr(e,i,r),Gr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ye(pc(this.h),zn(this.s),zn(this.l),or(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=or(this.opacity);return`${e===1?"hsl(":"hsla("}${pc(this.h)}, ${zn(this.s)*100}%, ${zn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function pc(e){return e=(e||0)%360,e<0?e+360:e}function zn(e){return Math.max(0,Math.min(1,e||0))}function Gr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Df=e=>()=>e;function py(e,t){return function(n){return e+n*t}}function gy(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function my(e){return(e=+e)==1?Of:function(t,n){return n-t?gy(t,n,e):Df(isNaN(t)?n:t)}}function Of(e,t){var n=t-e;return n?py(e,n):Df(isNaN(e)?t:e)}const gc=function e(t){var n=my(t);function r(i,o){var a=n((i=Ha(i)).r,(o=Ha(o)).r),s=n(i.g,o.g),u=n(i.b,o.b),l=Of(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function wt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ba=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ur=new RegExp(Ba.source,"g");function vy(e){return function(){return e}}function yy(e){return function(t){return e(t)+""}}function wy(e,t){var n=Ba.lastIndex=Ur.lastIndex=0,r,i,o,a=-1,s=[],u=[];for(e=e+"",t=t+"";(r=Ba.exec(e))&&(i=Ur.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:wt(r,i)})),n=Ur.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?yy(u[0].x):vy(t):(t=u.length,function(l){for(var c=0,d;c<t;++c)s[(d=u[c]).i]=d.x(l);return s.join("")})}var mc=180/Math.PI,Va={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zf(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*mc,skewX:Math.atan(u)*mc,scaleX:a,scaleY:s}}var Hn;function by(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Va:zf(t.a,t.b,t.c,t.d,t.e,t.f)}function _y(e){return e==null||(Hn||(Hn=document.createElementNS("http://www.w3.org/2000/svg","g")),Hn.setAttribute("transform",e),!(e=Hn.transform.baseVal.consolidate()))?Va:(e=e.matrix,zf(e.a,e.b,e.c,e.d,e.e,e.f))}function Hf(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,d,h,f,g){if(l!==d||c!==h){var p=f.push("translate(",null,t,null,n);g.push({i:p-4,x:wt(l,d)},{i:p-2,x:wt(c,h)})}else(d||h)&&f.push("translate("+d+t+h+n)}function a(l,c,d,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:wt(l,c)})):c&&d.push(i(d)+"rotate("+c+r)}function s(l,c,d,h){l!==c?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:wt(l,c)}):c&&d.push(i(d)+"skewX("+c+r)}function u(l,c,d,h,f,g){if(l!==d||c!==h){var p=f.push(i(f)+"scale(",null,",",null,")");g.push({i:p-4,x:wt(l,d)},{i:p-2,x:wt(c,h)})}else(d!==1||h!==1)&&f.push(i(f)+"scale("+d+","+h+")")}return function(l,c){var d=[],h=[];return l=e(l),c=e(c),o(l.translateX,l.translateY,c.translateX,c.translateY,d,h),a(l.rotate,c.rotate,d,h),s(l.skewX,c.skewX,d,h),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,d,h),l=c=null,function(f){for(var g=-1,p=h.length,m;++g<p;)d[(m=h[g]).i]=m.x(f);return d.join("")}}}var xy=Hf(by,"px, ","px)","deg)"),Ey=Hf(_y,", ",")",")"),Sy=1e-12;function vc(e){return((e=Math.exp(e))+1/e)/2}function Ny(e){return((e=Math.exp(e))-1/e)/2}function Cy(e){return((e=Math.exp(2*e))-1)/(e+1)}const Iy=function e(t,n,r){function i(o,a){var s=o[0],u=o[1],l=o[2],c=a[0],d=a[1],h=a[2],f=c-s,g=d-u,p=f*f+g*g,m,v;if(p<Sy)v=Math.log(h/l)/t,m=function(q){return[s+q*f,u+q*g,l*Math.exp(t*q*v)]};else{var b=Math.sqrt(p),S=(h*h-l*l+r*p)/(2*l*n*b),w=(h*h-l*l-r*p)/(2*h*n*b),A=Math.log(Math.sqrt(S*S+1)-S),M=Math.log(Math.sqrt(w*w+1)-w);v=(M-A)/t,m=function(q){var $=q*v,T=vc(A),D=l/(n*b)*(T*Cy(t*$+A)-Ny(A));return[s+D*f,u+D*g,l*T/vc(t*$+A)]}}return m.duration=v*1e3*t/Math.SQRT2,m}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,u=s*s;return e(a,s,u)},i}(Math.SQRT2,2,4);var tn=0,dn=0,an=0,Bf=1e3,ar,fn,sr=0,zt=0,Nr=0,_n=typeof performance=="object"&&performance.now?performance:Date,Vf=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function _s(){return zt||(Vf(My),zt=_n.now()+Nr)}function My(){zt=0}function cr(){this._call=this._time=this._next=null}cr.prototype=Gf.prototype={constructor:cr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?_s():+n)+(t==null?0:+t),!this._next&&fn!==this&&(fn?fn._next=this:ar=this,fn=this),this._call=e,this._time=n,Ga()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ga())}};function Gf(e,t,n){var r=new cr;return r.restart(e,t,n),r}function Ay(){_s(),++tn;for(var e=ar,t;e;)(t=zt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--tn}function yc(){zt=(sr=_n.now())+Nr,tn=dn=0;try{Ay()}finally{tn=0,Ty(),zt=0}}function ky(){var e=_n.now(),t=e-sr;t>Bf&&(Nr-=t,sr=e)}function Ty(){for(var e,t=ar,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ar=n);fn=e,Ga(r)}function Ga(e){if(!tn){dn&&(dn=clearTimeout(dn));var t=e-zt;t>24?(e<1/0&&(dn=setTimeout(yc,e-_n.now()-Nr)),an&&(an=clearInterval(an))):(an||(sr=_n.now(),an=setInterval(ky,Bf)),tn=1,Vf(yc))}}function wc(e,t,n){var r=new cr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Ry=Er("start","end","cancel","interrupt"),Ly=[],Uf=0,bc=1,Ua=2,jn=3,_c=4,Ya=5,Qn=6;function Cr(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;qy(e,n,{name:t,index:r,group:i,on:Ry,tween:Ly,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Uf})}function xs(e,t){var n=Ze(e,t);if(n.state>Uf)throw new Error("too late; already scheduled");return n}function rt(e,t){var n=Ze(e,t);if(n.state>jn)throw new Error("too late; already running");return n}function Ze(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function qy(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Gf(o,0,n.time);function o(l){n.state=bc,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var c,d,h,f;if(n.state!==bc)return u();for(c in r)if(f=r[c],f.name===n.name){if(f.state===jn)return wc(a);f.state===_c?(f.state=Qn,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[c]):+c<t&&(f.state=Qn,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[c])}if(wc(function(){n.state===jn&&(n.state=_c,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Ua,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ua){for(n.state=jn,i=new Array(h=n.tween.length),c=0,d=-1;c<h;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=f);i.length=d+1}}function s(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Ya,1),d=-1,h=i.length;++d<h;)i[d].call(e,c);n.state===Ya&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Qn,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Jn(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>Ua&&r.state<Ya,r.state=Qn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function $y(e){return this.each(function(){Jn(this,e)})}function Py(e,t){var n,r;return function(){var i=rt(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Fy(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=rt(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function Dy(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ze(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?Py:Fy)(n,e,t))}function Es(e,t,n){var r=e._id;return e.each(function(){var i=rt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ze(i,r).value[t]}}function Yf(e,t){var n;return(typeof t=="number"?wt:t instanceof bn?gc:(n=bn(t))?(t=n,gc):wy)(e,t)}function Oy(e){return function(){this.removeAttribute(e)}}function zy(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hy(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function By(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function Vy(e,t,n){var r,i,o;return function(){var a,s=n(this),u;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s)))}}function Gy(e,t,n){var r,i,o;return function(){var a,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s)))}}function Uy(e,t){var n=Sr(e),r=n==="transform"?Ey:Yf;return this.attrTween(e,typeof t=="function"?(n.local?Gy:Vy)(n,r,Es(this,"attr."+e,t)):t==null?(n.local?zy:Oy)(n):(n.local?By:Hy)(n,r,t))}function Yy(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Wy(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Zy(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Wy(e,o)),n}return i._value=t,i}function Xy(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Yy(e,o)),n}return i._value=t,i}function Ky(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Sr(e);return this.tween(n,(r.local?Zy:Xy)(r,t))}function jy(e,t){return function(){xs(this,e).delay=+t.apply(this,arguments)}}function Qy(e,t){return t=+t,function(){xs(this,e).delay=t}}function Jy(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?jy:Qy)(t,e)):Ze(this.node(),t).delay}function ew(e,t){return function(){rt(this,e).duration=+t.apply(this,arguments)}}function tw(e,t){return t=+t,function(){rt(this,e).duration=t}}function nw(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ew:tw)(t,e)):Ze(this.node(),t).duration}function rw(e,t){if(typeof t!="function")throw new Error;return function(){rt(this,e).ease=t}}function iw(e){var t=this._id;return arguments.length?this.each(rw(t,e)):Ze(this.node(),t).ease}function ow(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;rt(this,e).ease=n}}function aw(e){if(typeof e!="function")throw new Error;return this.each(ow(this._id,e))}function sw(e){typeof e!="function"&&(e=Sf(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],u,l=0;l<a;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&s.push(u);return new ft(r,this._parents,this._name,this._id)}function cw(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u=t[s],l=n[s],c=u.length,d=a[s]=new Array(c),h,f=0;f<c;++f)(h=u[f]||l[f])&&(d[f]=h);for(;s<r;++s)a[s]=t[s];return new ft(a,this._parents,this._name,this._id)}function uw(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function lw(e,t,n){var r,i,o=uw(t)?xs:rt;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}function dw(e,t){var n=this._id;return arguments.length<2?Ze(this.node(),n).on.on(e):this.each(lw(n,e,t))}function fw(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function hw(){return this.on("end.remove",fw(this._id))}function pw(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ys(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],u=s.length,l=o[a]=new Array(u),c,d,h=0;h<u;++h)(c=s[h])&&(d=e.call(c,c.__data__,h,s))&&("__data__"in c&&(d.__data__=c.__data__),l[h]=d,Cr(l[h],t,n,h,l,Ze(c,n)));return new ft(o,this._parents,t,n)}function gw(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ef(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u=r[s],l=u.length,c,d=0;d<l;++d)if(c=u[d]){for(var h=e.call(c,c.__data__,d,u),f,g=Ze(c,n),p=0,m=h.length;p<m;++p)(f=h[p])&&Cr(f,t,n,p,h,g);o.push(h),a.push(c)}return new ft(o,a,t,n)}var mw=qn.prototype.constructor;function vw(){return new mw(this._groups,this._parents)}function yw(e,t){var n,r,i;return function(){var o=en(this,e),a=(this.style.removeProperty(e),en(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function Wf(e){return function(){this.style.removeProperty(e)}}function ww(e,t,n){var r,i=n+"",o;return function(){var a=en(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function bw(e,t,n){var r,i,o;return function(){var a=en(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),en(this,e))),a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s))}}function _w(e,t){var n,r,i,o="style."+t,a="end."+o,s;return function(){var u=rt(this,e),l=u.on,c=u.value[o]==null?s||(s=Wf(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(a,i=c),u.on=r}}function xw(e,t,n){var r=(e+="")=="transform"?xy:Yf;return t==null?this.styleTween(e,yw(e,r)).on("end.style."+e,Wf(e)):typeof t=="function"?this.styleTween(e,bw(e,r,Es(this,"style."+e,t))).each(_w(this._id,e)):this.styleTween(e,ww(e,r,t),n).on("end.style."+e,null)}function Ew(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Sw(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&Ew(e,a,n)),r}return o._value=t,o}function Nw(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Sw(e,t,n??""))}function Cw(e){return function(){this.textContent=e}}function Iw(e){return function(){var t=e(this);this.textContent=t??""}}function Mw(e){return this.tween("text",typeof e=="function"?Iw(Es(this,"text",e)):Cw(e==null?"":e+""))}function Aw(e){return function(t){this.textContent=e.call(this,t)}}function kw(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Aw(i)),t}return r._value=e,r}function Tw(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,kw(e))}function Rw(){for(var e=this._name,t=this._id,n=Zf(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,l=0;l<s;++l)if(u=a[l]){var c=Ze(u,t);Cr(u,e,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ft(r,this._parents,e,n)}function Lw(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},u={value:function(){--i===0&&o()}};n.each(function(){var l=rt(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),l.on=t}),i===0&&o()})}var qw=0;function ft(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Zf(){return++qw}var ot=qn.prototype;ft.prototype={constructor:ft,select:pw,selectAll:gw,selectChild:ot.selectChild,selectChildren:ot.selectChildren,filter:sw,merge:cw,selection:vw,transition:Rw,call:ot.call,nodes:ot.nodes,node:ot.node,size:ot.size,empty:ot.empty,each:ot.each,on:dw,attr:Uy,attrTween:Ky,style:xw,styleTween:Nw,text:Mw,textTween:Tw,remove:hw,tween:Dy,delay:Jy,duration:nw,ease:iw,easeVarying:aw,end:Lw,[Symbol.iterator]:ot[Symbol.iterator]};function $w(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Pw={time:null,delay:0,duration:250,ease:$w};function Fw(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Dw(e){var t,n;e instanceof ft?(t=e._id,e=e._name):(t=Zf(),(n=Pw).time=_s(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,l=0;l<s;++l)(u=a[l])&&Cr(u,e,t,l,a,n||Fw(u,t));return new ft(r,this._parents,e,t)}qn.prototype.interrupt=$y;qn.prototype.transition=Dw;const Bn=e=>()=>e;function Ow(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function st(e,t,n){this.k=e,this.x=t,this.y=n}st.prototype={constructor:st,scale:function(e){return e===1?this:new st(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new st(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var lt=new st(1,0,0);st.prototype;function Yr(e){e.stopImmediatePropagation()}function sn(e){e.preventDefault(),e.stopImmediatePropagation()}function zw(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Hw(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function xc(){return this.__zoom||lt}function Bw(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Vw(){return navigator.maxTouchPoints||"ontouchstart"in this}function Gw(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Xf(){var e=zw,t=Hw,n=Gw,r=Bw,i=Vw,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,u=Iy,l=Er("start","zoom","end"),c,d,h,f=500,g=150,p=0,m=10;function v(y){y.property("__zoom",xc).on("wheel.zoom",$,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",D).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(y,I,_,R){var P=y.selection?y.selection():y;P.property("__zoom",xc),y!==P?A(y,I,_,R):P.interrupt().each(function(){M(this,arguments).event(R).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},v.scaleBy=function(y,I,_,R){v.scaleTo(y,function(){var P=this.__zoom.k,x=typeof I=="function"?I.apply(this,arguments):I;return P*x},_,R)},v.scaleTo=function(y,I,_,R){v.transform(y,function(){var P=t.apply(this,arguments),x=this.__zoom,L=_==null?w(P):typeof _=="function"?_.apply(this,arguments):_,k=x.invert(L),z=typeof I=="function"?I.apply(this,arguments):I;return n(S(b(x,z),L,k),P,a)},_,R)},v.translateBy=function(y,I,_,R){v.transform(y,function(){return n(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof _=="function"?_.apply(this,arguments):_),t.apply(this,arguments),a)},null,R)},v.translateTo=function(y,I,_,R,P){v.transform(y,function(){var x=t.apply(this,arguments),L=this.__zoom,k=R==null?w(x):typeof R=="function"?R.apply(this,arguments):R;return n(lt.translate(k[0],k[1]).scale(L.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof _=="function"?-_.apply(this,arguments):-_),x,a)},R,P)};function b(y,I){return I=Math.max(o[0],Math.min(o[1],I)),I===y.k?y:new st(I,y.x,y.y)}function S(y,I,_){var R=I[0]-_[0]*y.k,P=I[1]-_[1]*y.k;return R===y.x&&P===y.y?y:new st(y.k,R,P)}function w(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function A(y,I,_,R){y.on("start.zoom",function(){M(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(R).end()}).tween("zoom",function(){var P=this,x=arguments,L=M(P,x).event(R),k=t.apply(P,x),z=_==null?w(k):typeof _=="function"?_.apply(P,x):_,U=Math.max(k[1][0]-k[0][0],k[1][1]-k[0][1]),G=P.__zoom,Z=typeof I=="function"?I.apply(P,x):I,j=u(G.invert(z).concat(U/G.k),Z.invert(z).concat(U/Z.k));return function(ne){if(ne===1)ne=Z;else{var H=j(ne),V=U/H[2];ne=new st(V,z[0]-H[0]*V,z[1]-H[1]*V)}L.zoom(null,ne)}})}function M(y,I,_){return!_&&y.__zooming||new q(y,I)}function q(y,I){this.that=y,this.args=I,this.active=0,this.sourceEvent=null,this.extent=t.apply(y,I),this.taps=0}q.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,I){return this.mouse&&y!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var I=Oe(this.that).datum();l.call(y,this.that,new Ow(y,{sourceEvent:this.sourceEvent,target:v,type:y,transform:this.that.__zoom,dispatch:l}),I)}};function $(y,...I){if(!e.apply(this,arguments))return;var _=M(this,I).event(y),R=this.__zoom,P=Math.max(o[0],Math.min(o[1],R.k*Math.pow(2,r.apply(this,arguments)))),x=Ue(y);if(_.wheel)(_.mouse[0][0]!==x[0]||_.mouse[0][1]!==x[1])&&(_.mouse[1]=R.invert(_.mouse[0]=x)),clearTimeout(_.wheel);else{if(R.k===P)return;_.mouse=[x,R.invert(x)],Jn(this),_.start()}sn(y),_.wheel=setTimeout(L,g),_.zoom("mouse",n(S(b(R,P),_.mouse[0],_.mouse[1]),_.extent,a));function L(){_.wheel=null,_.end()}}function T(y,...I){if(h||!e.apply(this,arguments))return;var _=y.currentTarget,R=M(this,I,!0).event(y),P=Oe(y.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",U,!0),x=Ue(y,_),L=y.clientX,k=y.clientY;qf(y.view),Yr(y),R.mouse=[x,this.__zoom.invert(x)],Jn(this),R.start();function z(G){if(sn(G),!R.moved){var Z=G.clientX-L,j=G.clientY-k;R.moved=Z*Z+j*j>p}R.event(G).zoom("mouse",n(S(R.that.__zoom,R.mouse[0]=Ue(G,_),R.mouse[1]),R.extent,a))}function U(G){P.on("mousemove.zoom mouseup.zoom",null),$f(G.view,R.moved),sn(G),R.event(G).end()}}function D(y,...I){if(e.apply(this,arguments)){var _=this.__zoom,R=Ue(y.changedTouches?y.changedTouches[0]:y,this),P=_.invert(R),x=_.k*(y.shiftKey?.5:2),L=n(S(b(_,x),R,P),t.apply(this,I),a);sn(y),s>0?Oe(this).transition().duration(s).call(A,L,R,y):Oe(this).call(v.transform,L,R,y)}}function F(y,...I){if(e.apply(this,arguments)){var _=y.touches,R=_.length,P=M(this,I,y.changedTouches.length===R).event(y),x,L,k,z;for(Yr(y),L=0;L<R;++L)k=_[L],z=Ue(k,this),z=[z,this.__zoom.invert(z),k.identifier],P.touch0?!P.touch1&&P.touch0[2]!==z[2]&&(P.touch1=z,P.taps=0):(P.touch0=z,x=!0,P.taps=1+!!c);c&&(c=clearTimeout(c)),x&&(P.taps<2&&(d=z[0],c=setTimeout(function(){c=null},f)),Jn(this),P.start())}}function O(y,...I){if(this.__zooming){var _=M(this,I).event(y),R=y.changedTouches,P=R.length,x,L,k,z;for(sn(y),x=0;x<P;++x)L=R[x],k=Ue(L,this),_.touch0&&_.touch0[2]===L.identifier?_.touch0[0]=k:_.touch1&&_.touch1[2]===L.identifier&&(_.touch1[0]=k);if(L=_.that.__zoom,_.touch1){var U=_.touch0[0],G=_.touch0[1],Z=_.touch1[0],j=_.touch1[1],ne=(ne=Z[0]-U[0])*ne+(ne=Z[1]-U[1])*ne,H=(H=j[0]-G[0])*H+(H=j[1]-G[1])*H;L=b(L,Math.sqrt(ne/H)),k=[(U[0]+Z[0])/2,(U[1]+Z[1])/2],z=[(G[0]+j[0])/2,(G[1]+j[1])/2]}else if(_.touch0)k=_.touch0[0],z=_.touch0[1];else return;_.zoom("touch",n(S(L,k,z),_.extent,a))}}function C(y,...I){if(this.__zooming){var _=M(this,I).event(y),R=y.changedTouches,P=R.length,x,L;for(Yr(y),h&&clearTimeout(h),h=setTimeout(function(){h=null},f),x=0;x<P;++x)L=R[x],_.touch0&&_.touch0[2]===L.identifier?delete _.touch0:_.touch1&&_.touch1[2]===L.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(L=Ue(L,this),Math.hypot(d[0]-L[0],d[1]-L[1])<m)){var k=Oe(this).on("dblclick.zoom");k&&k.apply(this,arguments)}}}return v.wheelDelta=function(y){return arguments.length?(r=typeof y=="function"?y:Bn(+y),v):r},v.filter=function(y){return arguments.length?(e=typeof y=="function"?y:Bn(!!y),v):e},v.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:Bn(!!y),v):i},v.extent=function(y){return arguments.length?(t=typeof y=="function"?y:Bn([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),v):t},v.scaleExtent=function(y){return arguments.length?(o[0]=+y[0],o[1]=+y[1],v):[o[0],o[1]]},v.translateExtent=function(y){return arguments.length?(a[0][0]=+y[0][0],a[1][0]=+y[1][0],a[0][1]=+y[0][1],a[1][1]=+y[1][1],v):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},v.constrain=function(y){return arguments.length?(n=y,v):n},v.duration=function(y){return arguments.length?(s=+y,v):s},v.interpolate=function(y){return arguments.length?(u=y,v):u},v.on=function(){var y=l.on.apply(l,arguments);return y===l?v:y},v.clickDistance=function(y){return arguments.length?(p=(y=+y)*y,v):Math.sqrt(p)},v.tapDistance=function(y){return arguments.length?(m=+y,v):m},v}const Ir=Hd(null),Uw=Ir.Provider,ht={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Kf=ht.error001();function he(e,t){const n=mr(Ir);if(n===null)throw new Error(Kf);return _f(n,e,t)}const be=()=>{const e=mr(Ir);if(e===null)throw new Error(Kf);return Pe(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Yw=e=>e.userSelectionActive?"none":"all";function Ss({position:e,children:t,className:n,style:r,...i}){const o=he(Yw),a=`${e}`.split("-");return N.createElement("div",{className:Ee(["react-flow__panel",n,...a]),style:{...r,pointerEvents:o},...i},t)}function Ww({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:N.createElement(Ss,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},N.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Zw=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:o={},labelBgPadding:a=[2,4],labelBgBorderRadius:s=2,children:u,className:l,...c})=>{const d=te(null),[h,f]=ae({x:0,y:0,width:0,height:0}),g=Ee(["react-flow__edge-textwrapper",l]);return le(()=>{if(d.current){const p=d.current.getBBox();f({x:p.x,y:p.y,width:p.width,height:p.height})}},[n]),typeof n>"u"||!n?null:N.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...c},i&&N.createElement("rect",{width:h.width+2*a[0],x:-a[0],y:-a[1],height:h.height+2*a[1],className:"react-flow__edge-textbg",style:o,rx:s,ry:s}),N.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:d,style:r},n),u)};var Xw=de(Zw);const Ns=e=>({width:e.offsetWidth,height:e.offsetHeight}),nn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Cs=(e={x:0,y:0},t)=>({x:nn(e.x,t[0][0],t[1][0]),y:nn(e.y,t[0][1],t[1][1])}),Ec=(e,t,n)=>e<t?nn(Math.abs(e-t),1,50)/50:e>n?-nn(Math.abs(e-n),1,50)/50:0,jf=(e,t)=>{const n=Ec(e.x,35,t.width-35)*20,r=Ec(e.y,35,t.height-35)*20;return[n,r]},Qf=e=>e.getRootNode?.()||window?.document,Jf=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),xn=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),eh=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Sc=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Kw=(e,t)=>eh(Jf(xn(e),xn(t))),Wa=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},jw=e=>ze(e.width)&&ze(e.height)&&ze(e.x)&&ze(e.y),ze=e=>!isNaN(e)&&isFinite(e),ye=Symbol.for("internals"),th=["Enter"," ","Escape"],Qw=(e,t)=>{},Jw=e=>"nativeEvent"in e;function Za(e){const n=(Jw(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const nh=e=>"clientX"in e,St=(e,t)=>{const n=nh(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},ur=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Pn=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:l,style:c,markerEnd:d,markerStart:h,interactionWidth:f=20})=>N.createElement(N.Fragment,null,N.createElement("path",{id:e,style:c,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:h}),f&&N.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),i&&ze(n)&&ze(r)?N.createElement(Xw,{x:n,y:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:l}):null);Pn.displayName="BaseEdge";const eb=(e,t)=>typeof t<"u"&&t?`url(#${t})`:typeof e<"u"?`url(#react-flow__${e})`:"none";function cn(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(o=>o.id===e);i&&n(r,{...i})}}function rh({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,a=Math.abs(r-t)/2,s=r<t?r+a:r-a;return[o,s,i,a]}function ih({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:a,targetControlY:s}){const u=e*.125+i*.375+a*.375+n*.125,l=t*.125+o*.375+s*.375+r*.125,c=Math.abs(u-e),d=Math.abs(l-t);return[u,l,c,d]}var Ht;(function(e){e.Strict="strict",e.Loose="loose"})(Ht||(Ht={}));var Lt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Lt||(Lt={}));var En;(function(e){e.Partial="partial",e.Full="full"})(En||(En={}));var _t;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(_t||(_t={}));var lr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(lr||(lr={}));var B;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(B||(B={}));function Nc({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===B.Left||e===B.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function oh({sourceX:e,sourceY:t,sourcePosition:n=B.Bottom,targetX:r,targetY:i,targetPosition:o=B.Top}){const[a,s]=Nc({pos:n,x1:e,y1:t,x2:r,y2:i}),[u,l]=Nc({pos:o,x1:r,y1:i,x2:e,y2:t}),[c,d,h,f]=ih({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:s,targetControlX:u,targetControlY:l});return[`M${e},${t} C${a},${s} ${u},${l} ${r},${i}`,c,d,h,f]}const Is=de(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=B.Bottom,targetPosition:o=B.Top,label:a,labelStyle:s,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:f,markerStart:g,interactionWidth:p})=>{const[m,v,b]=oh({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o});return N.createElement(Pn,{path:m,labelX:v,labelY:b,label:a,labelStyle:s,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:f,markerStart:g,interactionWidth:p})});Is.displayName="SimpleBezierEdge";const Cc={[B.Left]:{x:-1,y:0},[B.Right]:{x:1,y:0},[B.Top]:{x:0,y:-1},[B.Bottom]:{x:0,y:1}},tb=({source:e,sourcePosition:t=B.Bottom,target:n})=>t===B.Left||t===B.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ic=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function nb({source:e,sourcePosition:t=B.Bottom,target:n,targetPosition:r=B.Top,center:i,offset:o}){const a=Cc[t],s=Cc[r],u={x:e.x+a.x*o,y:e.y+a.y*o},l={x:n.x+s.x*o,y:n.y+s.y*o},c=tb({source:u,sourcePosition:t,target:l}),d=c.x!==0?"x":"y",h=c[d];let f=[],g,p;const m={x:0,y:0},v={x:0,y:0},[b,S,w,A]=rh({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*s[d]===-1){g=i.x||b,p=i.y||S;const q=[{x:g,y:u.y},{x:g,y:l.y}],$=[{x:u.x,y:p},{x:l.x,y:p}];a[d]===h?f=d==="x"?q:$:f=d==="x"?$:q}else{const q=[{x:u.x,y:l.y}],$=[{x:l.x,y:u.y}];if(d==="x"?f=a.x===h?$:q:f=a.y===h?q:$,t===r){const C=Math.abs(e[d]-n[d]);if(C<=o){const y=Math.min(o-1,o-C);a[d]===h?m[d]=(u[d]>e[d]?-1:1)*y:v[d]=(l[d]>n[d]?-1:1)*y}}if(t!==r){const C=d==="x"?"y":"x",y=a[d]===s[C],I=u[C]>l[C],_=u[C]<l[C];(a[d]===1&&(!y&&I||y&&_)||a[d]!==1&&(!y&&_||y&&I))&&(f=d==="x"?q:$)}const T={x:u.x+m.x,y:u.y+m.y},D={x:l.x+v.x,y:l.y+v.y},F=Math.max(Math.abs(T.x-f[0].x),Math.abs(D.x-f[0].x)),O=Math.max(Math.abs(T.y-f[0].y),Math.abs(D.y-f[0].y));F>=O?(g=(T.x+D.x)/2,p=f[0].y):(g=f[0].x,p=(T.y+D.y)/2)}return[[e,{x:u.x+m.x,y:u.y+m.y},...f,{x:l.x+v.x,y:l.y+v.y},n],g,p,w,A]}function rb(e,t,n,r){const i=Math.min(Ic(e,t)/2,Ic(t,n)/2,r),{x:o,y:a}=t;if(e.x===o&&o===n.x||e.y===a&&a===n.y)return`L${o} ${a}`;if(e.y===a){const l=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${o+i*l},${a}Q ${o},${a} ${o},${a+i*c}`}const s=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${o},${a+i*u}Q ${o},${a} ${o+i*s},${a}`}function Xa({sourceX:e,sourceY:t,sourcePosition:n=B.Bottom,targetX:r,targetY:i,targetPosition:o=B.Top,borderRadius:a=5,centerX:s,centerY:u,offset:l=20}){const[c,d,h,f,g]=nb({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:s,y:u},offset:l});return[c.reduce((m,v,b)=>{let S="";return b>0&&b<c.length-1?S=rb(c[b-1],v,c[b+1],a):S=`${b===0?"M":"L"}${v.x} ${v.y}`,m+=S,m},""),d,h,f,g]}const Mr=de(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:l,style:c,sourcePosition:d=B.Bottom,targetPosition:h=B.Top,markerEnd:f,markerStart:g,pathOptions:p,interactionWidth:m})=>{const[v,b,S]=Xa({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:h,borderRadius:p?.borderRadius,offset:p?.offset});return N.createElement(Pn,{path:v,labelX:b,labelY:S,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:l,style:c,markerEnd:f,markerStart:g,interactionWidth:m})});Mr.displayName="SmoothStepEdge";const Ms=de(e=>N.createElement(Mr,{...e,pathOptions:Pe(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));Ms.displayName="StepEdge";function ib({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,a,s]=rh({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,a,s]}const As=de(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:l,style:c,markerEnd:d,markerStart:h,interactionWidth:f})=>{const[g,p,m]=ib({sourceX:e,sourceY:t,targetX:n,targetY:r});return N.createElement(Pn,{path:g,labelX:p,labelY:m,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:l,style:c,markerEnd:d,markerStart:h,interactionWidth:f})});As.displayName="StraightEdge";function Vn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Mc({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case B.Left:return[t-Vn(t-r,o),n];case B.Right:return[t+Vn(r-t,o),n];case B.Top:return[t,n-Vn(n-i,o)];case B.Bottom:return[t,n+Vn(i-n,o)]}}function ks({sourceX:e,sourceY:t,sourcePosition:n=B.Bottom,targetX:r,targetY:i,targetPosition:o=B.Top,curvature:a=.25}){const[s,u]=Mc({pos:n,x1:e,y1:t,x2:r,y2:i,c:a}),[l,c]=Mc({pos:o,x1:r,y1:i,x2:e,y2:t,c:a}),[d,h,f,g]=ih({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:u,targetControlX:l,targetControlY:c});return[`M${e},${t} C${s},${u} ${l},${c} ${r},${i}`,d,h,f,g]}const dr=de(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=B.Bottom,targetPosition:o=B.Top,label:a,labelStyle:s,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:f,markerStart:g,pathOptions:p,interactionWidth:m})=>{const[v,b,S]=ks({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o,curvature:p?.curvature});return N.createElement(Pn,{path:v,labelX:b,labelY:S,label:a,labelStyle:s,labelShowBg:u,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:f,markerStart:g,interactionWidth:m})});dr.displayName="BezierEdge";const Ts=Hd(null),ob=Ts.Provider;Ts.Consumer;const ab=()=>mr(Ts),sb=e=>"id"in e&&"source"in e&&"target"in e,cb=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Ka=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,ub=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),lb=(e,t)=>{if(!e.source||!e.target)return t;let n;return sb(e)?n={...e}:n={...e,id:cb(e)},ub(n,t)?t:t.concat(n)},ja=({x:e,y:t},[n,r,i],o,[a,s])=>{const u={x:(e-n)/i,y:(t-r)/i};return o?{x:a*Math.round(u.x/a),y:s*Math.round(u.y/s)}:u},ah=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),Dt=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},Ar=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:o,y:a}=Dt(i,t).positionAbsolute;return Jf(r,xn({x:o,y:a,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return eh(n)},sh=(e,t,[n,r,i]=[0,0,1],o=!1,a=!1,s=[0,0])=>{const u={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},l=[];return e.forEach(c=>{const{width:d,height:h,selectable:f=!0,hidden:g=!1}=c;if(a&&!f||g)return!1;const{positionAbsolute:p}=Dt(c,s),m={x:p.x,y:p.y,width:d||0,height:h||0},v=Wa(u,m),b=typeof d>"u"||typeof h>"u"||d===null||h===null,S=o&&v>0,w=(d||0)*(h||0);(b||S||v>=w||c.dragging)&&l.push(c)}),l},ch=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},uh=(e,t,n,r,i,o=.1)=>{const a=t/(e.width*(1+o)),s=n/(e.height*(1+o)),u=Math.min(a,s),l=nn(u,r,i),c=e.x+e.width/2,d=e.y+e.height/2,h=t/2-c*l,f=n/2-d*l;return{x:h,y:f,zoom:l}},kt=(e,t=0)=>e.transition().duration(t);function Ac(e,t,n,r){return(t[n]||[]).reduce((i,o)=>(`${e.id}-${o.id}-${n}`!==r&&i.push({id:o.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+o.x+o.width/2,y:(e.positionAbsolute?.y??0)+o.y+o.height/2}),i),[])}function db(e,t,n,r,i,o){const{x:a,y:s}=St(e),l=t.elementsFromPoint(a,s).find(g=>g.classList.contains("react-flow__handle"));if(l){const g=l.getAttribute("data-nodeid");if(g){const p=Rs(void 0,l),m=l.getAttribute("data-handleid"),v=o({nodeId:g,id:m,type:p});if(v){const b=i.find(S=>S.nodeId===g&&S.type===p&&S.id===m);return{handle:{id:m,type:p,nodeId:g,x:b?.x||n.x,y:b?.y||n.y},validHandleResult:v}}}}let c=[],d=1/0;if(i.forEach(g=>{const p=Math.sqrt((g.x-n.x)**2+(g.y-n.y)**2);if(p<=r){const m=o(g);p<=d&&(p<d?c=[{handle:g,validHandleResult:m}]:p===d&&c.push({handle:g,validHandleResult:m}),d=p)}}),!c.length)return{handle:null,validHandleResult:lh()};if(c.length===1)return c[0];const h=c.some(({validHandleResult:g})=>g.isValid),f=c.some(({handle:g})=>g.type==="target");return c.find(({handle:g,validHandleResult:p})=>f?g.type==="target":h?p.isValid:!0)||c[0]}const fb={source:null,target:null,sourceHandle:null,targetHandle:null},lh=()=>({handleDomNode:null,isValid:!1,connection:fb,endHandle:null});function dh(e,t,n,r,i,o,a){const s=i==="target",u=a.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),l={...lh(),handleDomNode:u};if(u){const c=Rs(void 0,u),d=u.getAttribute("data-nodeid"),h=u.getAttribute("data-handleid"),f=u.classList.contains("connectable"),g=u.classList.contains("connectableend"),p={source:s?d:n,sourceHandle:s?h:r,target:s?n:d,targetHandle:s?r:h};l.connection=p,f&&g&&(t===Ht.Strict?s&&c==="source"||!s&&c==="target":d!==n||h!==r)&&(l.endHandle={nodeId:d,handleId:h,type:c},l.isValid=o(p))}return l}function hb({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,o)=>{if(o[ye]){const{handleBounds:a}=o[ye];let s=[],u=[];a&&(s=Ac(o,a,"source",`${t}-${n}-${r}`),u=Ac(o,a,"target",`${t}-${n}-${r}`)),i.push(...s,...u)}return i},[])}function Rs(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Wr(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function pb(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function fh({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:o,setState:a,isValidConnection:s,edgeUpdaterType:u,onEdgeUpdateEnd:l}){const c=Qf(e.target),{connectionMode:d,domNode:h,autoPanOnConnect:f,connectionRadius:g,onConnectStart:p,panBy:m,getNodes:v,cancelConnection:b}=o();let S=0,w;const{x:A,y:M}=St(e),q=c?.elementFromPoint(A,M),$=Rs(u,q),T=h?.getBoundingClientRect();if(!T||!$)return;let D,F=St(e,T),O=!1,C=null,y=!1,I=null;const _=hb({nodes:v(),nodeId:n,handleId:t,handleType:$}),R=()=>{if(!f)return;const[L,k]=jf(F,T);m({x:L,y:k}),S=requestAnimationFrame(R)};a({connectionPosition:F,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:$,connectionStartHandle:{nodeId:n,handleId:t,type:$},connectionEndHandle:null}),p?.(e,{nodeId:n,handleId:t,handleType:$});function P(L){const{transform:k}=o();F=St(L,T);const{handle:z,validHandleResult:U}=db(L,c,ja(F,k,!1,[1,1]),g,_,G=>dh(G,d,n,t,i?"target":"source",s,c));if(w=z,O||(R(),O=!0),I=U.handleDomNode,C=U.connection,y=U.isValid,a({connectionPosition:w&&y?ah({x:w.x,y:w.y},k):F,connectionStatus:pb(!!w,y),connectionEndHandle:U.endHandle}),!w&&!y&&!I)return Wr(D);C.source!==C.target&&I&&(Wr(D),D=I,I.classList.add("connecting","react-flow__handle-connecting"),I.classList.toggle("valid",y),I.classList.toggle("react-flow__handle-valid",y))}function x(L){(w||I)&&C&&y&&r?.(C),o().onConnectEnd?.(L),u&&l?.(L),Wr(D),b(),cancelAnimationFrame(S),O=!1,y=!1,C=null,I=null,c.removeEventListener("mousemove",P),c.removeEventListener("mouseup",x),c.removeEventListener("touchmove",P),c.removeEventListener("touchend",x)}c.addEventListener("mousemove",P),c.addEventListener("mouseup",x),c.addEventListener("touchmove",P),c.addEventListener("touchend",x)}const kc=()=>!0,gb=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),mb=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:o,connectionClickStartHandle:a}=r;return{connecting:i?.nodeId===e&&i?.handleId===t&&i?.type===n||o?.nodeId===e&&o?.handleId===t&&o?.type===n,clickConnecting:a?.nodeId===e&&a?.handleId===t&&a?.type===n}},hh=Bd(({type:e="source",position:t=B.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:a,onConnect:s,children:u,className:l,onMouseDown:c,onTouchStart:d,...h},f)=>{const g=a||null,p=e==="target",m=be(),v=ab(),{connectOnClick:b,noPanClassName:S}=he(gb,xe),{connecting:w,clickConnecting:A}=he(mb(v,g,e),xe);v||m.getState().onError?.("010",ht.error010());const M=T=>{const{defaultEdgeOptions:D,onConnect:F,hasDefaultEdges:O}=m.getState(),C={...D,...T};if(O){const{edges:y,setEdges:I}=m.getState();I(lb(C,y))}F?.(C),s?.(C)},q=T=>{if(!v)return;const D=nh(T);i&&(D&&T.button===0||!D)&&fh({event:T,handleId:g,nodeId:v,onConnect:M,isTarget:p,getState:m.getState,setState:m.setState,isValidConnection:n||m.getState().isValidConnection||kc}),D?c?.(T):d?.(T)},$=T=>{const{onClickConnectStart:D,onClickConnectEnd:F,connectionClickStartHandle:O,connectionMode:C,isValidConnection:y}=m.getState();if(!v||!O&&!i)return;if(!O){D?.(T,{nodeId:v,handleId:g,handleType:e}),m.setState({connectionClickStartHandle:{nodeId:v,type:e,handleId:g}});return}const I=Qf(T.target),_=n||y||kc,{connection:R,isValid:P}=dh({nodeId:v,id:g,type:e},C,O.nodeId,O.handleId||null,O.type,_,I);P&&M(R),F?.(T),m.setState({connectionClickStartHandle:null})};return N.createElement("div",{"data-handleid":g,"data-nodeid":v,"data-handlepos":t,"data-id":`${v}-${g}-${e}`,className:Ee(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",S,l,{source:!p,target:p,connectable:r,connectablestart:i,connectableend:o,connecting:A,connectionindicator:r&&(i&&!w||o&&w)}]),onMouseDown:q,onTouchStart:q,onClick:b?$:void 0,ref:f,...h},u)});hh.displayName="Handle";var Ct=de(hh);const ph=({data:e,isConnectable:t,targetPosition:n=B.Top,sourcePosition:r=B.Bottom})=>N.createElement(N.Fragment,null,N.createElement(Ct,{type:"target",position:n,isConnectable:t}),e?.label,N.createElement(Ct,{type:"source",position:r,isConnectable:t}));ph.displayName="DefaultNode";var Qa=de(ph);const gh=({data:e,isConnectable:t,sourcePosition:n=B.Bottom})=>N.createElement(N.Fragment,null,e?.label,N.createElement(Ct,{type:"source",position:n,isConnectable:t}));gh.displayName="InputNode";var mh=de(gh);const vh=({data:e,isConnectable:t,targetPosition:n=B.Top})=>N.createElement(N.Fragment,null,N.createElement(Ct,{type:"target",position:n,isConnectable:t}),e?.label);vh.displayName="OutputNode";var yh=de(vh);const Ls=()=>null;Ls.displayName="GroupNode";const vb=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),Gn=e=>e.id;function yb(e,t){return xe(e.selectedNodes.map(Gn),t.selectedNodes.map(Gn))&&xe(e.selectedEdges.map(Gn),t.selectedEdges.map(Gn))}const wh=de(({onSelectionChange:e})=>{const t=be(),{selectedNodes:n,selectedEdges:r}=he(vb,yb);return le(()=>{const i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChange.forEach(o=>o(i))},[n,r,e]),null});wh.displayName="SelectionListener";const wb=e=>!!e.onSelectionChange;function bb({onSelectionChange:e}){const t=he(wb);return e||t?N.createElement(wh,{onSelectionChange:e}):null}const _b=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Gt(e,t){le(()=>{typeof e<"u"&&t(e)},[e])}function ee(e,t,n){le(()=>{typeof t<"u"&&n({[e]:t})},[t])}const xb=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:o,onConnectEnd:a,onClickConnectStart:s,onClickConnectEnd:u,nodesDraggable:l,nodesConnectable:c,nodesFocusable:d,edgesFocusable:h,edgesUpdatable:f,elevateNodesOnSelect:g,minZoom:p,maxZoom:m,nodeExtent:v,onNodesChange:b,onEdgesChange:S,elementsSelectable:w,connectionMode:A,snapGrid:M,snapToGrid:q,translateExtent:$,connectOnClick:T,defaultEdgeOptions:D,fitView:F,fitViewOptions:O,onNodesDelete:C,onEdgesDelete:y,onNodeDrag:I,onNodeDragStart:_,onNodeDragStop:R,onSelectionDrag:P,onSelectionDragStart:x,onSelectionDragStop:L,noPanClassName:k,nodeOrigin:z,rfId:U,autoPanOnConnect:G,autoPanOnNodeDrag:Z,onError:j,connectionRadius:ne,isValidConnection:H,nodeDragThreshold:V})=>{const{setNodes:W,setEdges:se,setDefaultNodesAndEdges:oe,setMinZoom:pe,setMaxZoom:ue,setTranslateExtent:Q,setNodeExtent:ie,reset:X}=he(_b,xe),Y=be();return le(()=>{const Se=r?.map(Ve=>({...Ve,...D}));return oe(n,Se),()=>{X()}},[]),ee("defaultEdgeOptions",D,Y.setState),ee("connectionMode",A,Y.setState),ee("onConnect",i,Y.setState),ee("onConnectStart",o,Y.setState),ee("onConnectEnd",a,Y.setState),ee("onClickConnectStart",s,Y.setState),ee("onClickConnectEnd",u,Y.setState),ee("nodesDraggable",l,Y.setState),ee("nodesConnectable",c,Y.setState),ee("nodesFocusable",d,Y.setState),ee("edgesFocusable",h,Y.setState),ee("edgesUpdatable",f,Y.setState),ee("elementsSelectable",w,Y.setState),ee("elevateNodesOnSelect",g,Y.setState),ee("snapToGrid",q,Y.setState),ee("snapGrid",M,Y.setState),ee("onNodesChange",b,Y.setState),ee("onEdgesChange",S,Y.setState),ee("connectOnClick",T,Y.setState),ee("fitViewOnInit",F,Y.setState),ee("fitViewOnInitOptions",O,Y.setState),ee("onNodesDelete",C,Y.setState),ee("onEdgesDelete",y,Y.setState),ee("onNodeDrag",I,Y.setState),ee("onNodeDragStart",_,Y.setState),ee("onNodeDragStop",R,Y.setState),ee("onSelectionDrag",P,Y.setState),ee("onSelectionDragStart",x,Y.setState),ee("onSelectionDragStop",L,Y.setState),ee("noPanClassName",k,Y.setState),ee("nodeOrigin",z,Y.setState),ee("rfId",U,Y.setState),ee("autoPanOnConnect",G,Y.setState),ee("autoPanOnNodeDrag",Z,Y.setState),ee("onError",j,Y.setState),ee("connectionRadius",ne,Y.setState),ee("isValidConnection",H,Y.setState),ee("nodeDragThreshold",V,Y.setState),Gt(e,W),Gt(t,se),Gt(p,pe),Gt(m,ue),Gt($,Q),Gt(v,ie),null},Tc={display:"none"},Eb={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},bh="react-flow__node-desc",_h="react-flow__edge-desc",Sb="react-flow__aria-live",Nb=e=>e.ariaLiveMessage;function Cb({rfId:e}){const t=he(Nb);return N.createElement("div",{id:`${Sb}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Eb},t)}function Ib({rfId:e,disableKeyboardA11y:t}){return N.createElement(N.Fragment,null,N.createElement("div",{id:`${bh}-${e}`,style:Tc},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),N.createElement("div",{id:`${_h}-${e}`,style:Tc},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&N.createElement(Cb,{rfId:e}))}var Sn=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=ae(!1),i=te(!1),o=te(new Set([])),[a,s]=Pe(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),c=l.reduce((d,h)=>d.concat(...h),[]);return[l,c]}return[[],[]]},[e]);return le(()=>{const u=typeof document<"u"?document:null,l=t?.target||u;if(e!==null){const c=f=>{if(i.current=f.ctrlKey||f.metaKey||f.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&Za(f))return!1;const p=Lc(f.code,s);o.current.add(f[p]),Rc(a,o.current,!1)&&(f.preventDefault(),r(!0))},d=f=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&Za(f))return!1;const p=Lc(f.code,s);Rc(a,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(f[p]),f.key==="Meta"&&o.current.clear(),i.current=!1},h=()=>{o.current.clear(),r(!1)};return l?.addEventListener("keydown",c),l?.addEventListener("keyup",d),window.addEventListener("blur",h),()=>{l?.removeEventListener("keydown",c),l?.removeEventListener("keyup",d),window.removeEventListener("blur",h)}}},[e,r]),n};function Rc(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function Lc(e,t){return t.includes(e)?"code":"key"}function xh(e,t,n,r){if(!e.parentNode)return n;const i=t.get(e.parentNode),o=Dt(i,r);return xh(i,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(i[ye]?.z??0)>(n.z??0)?i[ye]?.z??0:n.z??0},r)}function Eh(e,t,n){e.forEach(r=>{if(r.parentNode&&!e.has(r.parentNode))throw new Error(`Parent node ${r.parentNode} not found`);if(r.parentNode||n?.[r.id]){const{x:i,y:o,z:a}=xh(r,e,{...r.position,z:r[ye]?.z??0},t);r.positionAbsolute={x:i,y:o},r[ye].z=a,n?.[r.id]&&(r[ye].isParent=!0)}})}function Zr(e,t,n,r){const i=new Map,o={},a=r?1e3:0;return e.forEach(s=>{const u=(ze(s.zIndex)?s.zIndex:0)+(s.selected?a:0),l=t.get(s.id),c={...s,positionAbsolute:{x:s.position.x,y:s.position.y}};s.parentNode&&(o[s.parentNode]=!0);const d=l?.type&&l?.type!==s.type;Object.defineProperty(c,ye,{enumerable:!1,value:{handleBounds:d?void 0:l?.[ye]?.handleBounds,z:u}}),i.set(s.id,c)}),Eh(i,n,o),i}function Sh(e,t={}){const{getNodes:n,width:r,height:i,minZoom:o,maxZoom:a,d3Zoom:s,d3Selection:u,fitViewOnInitDone:l,fitViewOnInit:c,nodeOrigin:d}=e(),h=t.initial&&!l&&c;if(s&&u&&(h||!t.initial)){const g=n().filter(m=>{const v=t.includeHiddenNodes?m.width&&m.height:!m.hidden;return t.nodes?.length?v&&t.nodes.some(b=>b.id===m.id):v}),p=g.every(m=>m.width&&m.height);if(g.length>0&&p){const m=Ar(g,d),{x:v,y:b,zoom:S}=uh(m,r,i,t.minZoom??o,t.maxZoom??a,t.padding??.1),w=lt.translate(v,b).scale(S);return typeof t.duration=="number"&&t.duration>0?s.transform(kt(u,t.duration),w):s.transform(u,w),!0}}return!1}function Mb(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[ye]:r[ye],selected:n.selected})}),new Map(t)}function Ab(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function Un({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:o,onNodesChange:a,onEdgesChange:s,hasDefaultNodes:u,hasDefaultEdges:l}=n();e?.length&&(u&&r({nodeInternals:Mb(e,i)}),a?.(e)),t?.length&&(l&&r({edges:Ab(t,o)}),s?.(t))}const Ut=()=>{},kb={zoomIn:Ut,zoomOut:Ut,zoomTo:Ut,getZoom:()=>1,setViewport:Ut,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ut,fitBounds:Ut,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Tb=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Rb=()=>{const e=be(),{d3Zoom:t,d3Selection:n}=he(Tb,xe);return Pe(()=>n&&t?{zoomIn:i=>t.scaleBy(kt(n,i?.duration),1.2),zoomOut:i=>t.scaleBy(kt(n,i?.duration),1/1.2),zoomTo:(i,o)=>t.scaleTo(kt(n,o?.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,o)=>{const[a,s,u]=e.getState().transform,l=lt.translate(i.x??a,i.y??s).scale(i.zoom??u);t.transform(kt(n,o?.duration),l)},getViewport:()=>{const[i,o,a]=e.getState().transform;return{x:i,y:o,zoom:a}},fitView:i=>Sh(e.getState,i),setCenter:(i,o,a)=>{const{width:s,height:u,maxZoom:l}=e.getState(),c=typeof a?.zoom<"u"?a.zoom:l,d=s/2-i*c,h=u/2-o*c,f=lt.translate(d,h).scale(c);t.transform(kt(n,a?.duration),f)},fitBounds:(i,o)=>{const{width:a,height:s,minZoom:u,maxZoom:l}=e.getState(),{x:c,y:d,zoom:h}=uh(i,a,s,u,l,o?.padding??.1),f=lt.translate(c,d).scale(h);t.transform(kt(n,o?.duration),f)},project:i=>{const{transform:o,snapToGrid:a,snapGrid:s}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ja(i,o,a,s)},screenToFlowPosition:i=>{const{transform:o,snapToGrid:a,snapGrid:s,domNode:u}=e.getState();if(!u)return i;const{x:l,y:c}=u.getBoundingClientRect(),d={x:i.x-l,y:i.y-c};return ja(d,o,a,s)},flowToScreenPosition:i=>{const{transform:o,domNode:a}=e.getState();if(!a)return i;const{x:s,y:u}=a.getBoundingClientRect(),l=ah(i,o);return{x:l.x+s,y:l.y+u}},viewportInitialized:!0}:kb,[t,n])};function qs(){const e=Rb(),t=be(),n=ve(()=>t.getState().getNodes().map(p=>({...p})),[]),r=ve(p=>t.getState().nodeInternals.get(p),[]),i=ve(()=>{const{edges:p=[]}=t.getState();return p.map(m=>({...m}))},[]),o=ve(p=>{const{edges:m=[]}=t.getState();return m.find(v=>v.id===p)},[]),a=ve(p=>{const{getNodes:m,setNodes:v,hasDefaultNodes:b,onNodesChange:S}=t.getState(),w=m(),A=typeof p=="function"?p(w):p;if(b)v(A);else if(S){const M=A.length===0?w.map(q=>({type:"remove",id:q.id})):A.map(q=>({item:q,type:"reset"}));S(M)}},[]),s=ve(p=>{const{edges:m=[],setEdges:v,hasDefaultEdges:b,onEdgesChange:S}=t.getState(),w=typeof p=="function"?p(m):p;if(b)v(w);else if(S){const A=w.length===0?m.map(M=>({type:"remove",id:M.id})):w.map(M=>({item:M,type:"reset"}));S(A)}},[]),u=ve(p=>{const m=Array.isArray(p)?p:[p],{getNodes:v,setNodes:b,hasDefaultNodes:S,onNodesChange:w}=t.getState();if(S){const M=[...v(),...m];b(M)}else if(w){const A=m.map(M=>({item:M,type:"add"}));w(A)}},[]),l=ve(p=>{const m=Array.isArray(p)?p:[p],{edges:v=[],setEdges:b,hasDefaultEdges:S,onEdgesChange:w}=t.getState();if(S)b([...v,...m]);else if(w){const A=m.map(M=>({item:M,type:"add"}));w(A)}},[]),c=ve(()=>{const{getNodes:p,edges:m=[],transform:v}=t.getState(),[b,S,w]=v;return{nodes:p().map(A=>({...A})),edges:m.map(A=>({...A})),viewport:{x:b,y:S,zoom:w}}},[]),d=ve(({nodes:p,edges:m})=>{const{nodeInternals:v,getNodes:b,edges:S,hasDefaultNodes:w,hasDefaultEdges:A,onNodesDelete:M,onEdgesDelete:q,onNodesChange:$,onEdgesChange:T}=t.getState(),D=(p||[]).map(I=>I.id),F=(m||[]).map(I=>I.id),O=b().reduce((I,_)=>{const R=!D.includes(_.id)&&_.parentNode&&I.find(x=>x.id===_.parentNode);return(typeof _.deletable=="boolean"?_.deletable:!0)&&(D.includes(_.id)||R)&&I.push(_),I},[]),C=S.filter(I=>typeof I.deletable=="boolean"?I.deletable:!0),y=C.filter(I=>F.includes(I.id));if(O||y){const I=ch(O,C),_=[...y,...I],R=_.reduce((P,x)=>(P.includes(x.id)||P.push(x.id),P),[]);if((A||w)&&(A&&t.setState({edges:S.filter(P=>!R.includes(P.id))}),w&&(O.forEach(P=>{v.delete(P.id)}),t.setState({nodeInternals:new Map(v)}))),R.length>0&&(q?.(_),T&&T(R.map(P=>({id:P,type:"remove"})))),O.length>0&&(M?.(O),$)){const P=O.map(x=>({id:x.id,type:"remove"}));$(P)}}},[]),h=ve(p=>{const m=jw(p),v=m?null:t.getState().nodeInternals.get(p.id);return!m&&!v?[null,null,m]:[m?p:Sc(v),v,m]},[]),f=ve((p,m=!0,v)=>{const[b,S,w]=h(p);return b?(v||t.getState().getNodes()).filter(A=>{if(!w&&(A.id===S.id||!A.positionAbsolute))return!1;const M=Sc(A),q=Wa(M,b);return m&&q>0||q>=b.width*b.height}):[]},[]),g=ve((p,m,v=!0)=>{const[b]=h(p);if(!b)return!1;const S=Wa(b,m);return v&&S>0||S>=b.width*b.height},[]);return Pe(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:o,setNodes:a,setEdges:s,addNodes:u,addEdges:l,toObject:c,deleteElements:d,getIntersectingNodes:f,isNodeIntersecting:g}),[e,n,r,i,o,a,s,u,l,c,d,f,g])}const Lb={actInsideInputWithModifier:!1};var qb=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=be(),{deleteElements:r}=qs(),i=Sn(e,Lb),o=Sn(t);le(()=>{if(i){const{edges:a,getNodes:s}=n.getState(),u=s().filter(c=>c.selected),l=a.filter(c=>c.selected);r({nodes:u,edges:l}),n.setState({nodesSelectionActive:!1})}},[i]),le(()=>{n.setState({multiSelectionActive:o})},[o])};function $b(e){const t=be();le(()=>{let n;const r=()=>{if(!e.current)return;const i=Ns(e.current);(i.height===0||i.width===0)&&t.getState().onError?.("004",ht.error004()),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const $s={position:"absolute",width:"100%",height:"100%",top:0,left:0},Pb=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Yn=e=>({x:e.x,y:e.y,zoom:e.k}),Yt=(e,t)=>e.target.closest(`.${t}`),qc=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),$c=e=>{const t=e.ctrlKey&&ur()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Fb=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Db=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:o=!0,panOnScroll:a=!1,panOnScrollSpeed:s=.5,panOnScrollMode:u=Lt.Free,zoomOnDoubleClick:l=!0,elementsSelectable:c,panOnDrag:d=!0,defaultViewport:h,translateExtent:f,minZoom:g,maxZoom:p,zoomActivationKeyCode:m,preventScrolling:v=!0,children:b,noWheelClassName:S,noPanClassName:w})=>{const A=te(),M=be(),q=te(!1),$=te(!1),T=te(null),D=te({x:0,y:0,zoom:0}),{d3Zoom:F,d3Selection:O,d3ZoomHandler:C,userSelectionActive:y}=he(Fb,xe),I=Sn(m),_=te(0),R=te(!1),P=te();return $b(T),le(()=>{if(T.current){const x=T.current.getBoundingClientRect(),L=Xf().scaleExtent([g,p]).translateExtent(f),k=Oe(T.current).call(L),z=lt.translate(h.x,h.y).scale(nn(h.zoom,g,p)),U=[[0,0],[x.width,x.height]],G=L.constrain()(z,U,f);L.transform(k,G),L.wheelDelta($c),M.setState({d3Zoom:L,d3Selection:k,d3ZoomHandler:k.on("wheel.zoom"),transform:[G.x,G.y,G.k],domNode:T.current.closest(".react-flow")})}},[]),le(()=>{O&&F&&(a&&!I&&!y?O.on("wheel.zoom",x=>{if(Yt(x,S))return!1;x.preventDefault(),x.stopImmediatePropagation();const L=O.property("__zoom").k||1,k=ur();if(x.ctrlKey&&o&&k){const V=Ue(x),W=$c(x),se=L*Math.pow(2,W);F.scaleTo(O,se,V,x);return}const z=x.deltaMode===1?20:1;let U=u===Lt.Vertical?0:x.deltaX*z,G=u===Lt.Horizontal?0:x.deltaY*z;!k&&x.shiftKey&&u!==Lt.Vertical&&(U=x.deltaY*z,G=0),F.translateBy(O,-(U/L)*s,-(G/L)*s,{internal:!0});const Z=Yn(O.property("__zoom")),{onViewportChangeStart:j,onViewportChange:ne,onViewportChangeEnd:H}=M.getState();clearTimeout(P.current),R.current||(R.current=!0,t?.(x,Z),j?.(Z)),R.current&&(e?.(x,Z),ne?.(Z),P.current=setTimeout(()=>{n?.(x,Z),H?.(Z),R.current=!1},150))},{passive:!1}):typeof C<"u"&&O.on("wheel.zoom",function(x,L){if(!v||Yt(x,S))return null;x.preventDefault(),C.call(this,x,L)},{passive:!1}))},[y,a,u,O,F,C,I,o,v,S,t,e,n]),le(()=>{F&&F.on("start",x=>{if(!x.sourceEvent||x.sourceEvent.internal)return null;_.current=x.sourceEvent?.button;const{onViewportChangeStart:L}=M.getState(),k=Yn(x.transform);q.current=!0,D.current=k,x.sourceEvent?.type==="mousedown"&&M.setState({paneDragging:!0}),L?.(k),t?.(x.sourceEvent,k)})},[F,t]),le(()=>{F&&(y&&!q.current?F.on("zoom",null):y||F.on("zoom",x=>{const{onViewportChange:L}=M.getState();if(M.setState({transform:[x.transform.x,x.transform.y,x.transform.k]}),$.current=!!(r&&qc(d,_.current??0)),(e||L)&&!x.sourceEvent?.internal){const k=Yn(x.transform);L?.(k),e?.(x.sourceEvent,k)}}))},[y,F,e,d,r]),le(()=>{F&&F.on("end",x=>{if(!x.sourceEvent||x.sourceEvent.internal)return null;const{onViewportChangeEnd:L}=M.getState();if(q.current=!1,M.setState({paneDragging:!1}),r&&qc(d,_.current??0)&&!$.current&&r(x.sourceEvent),$.current=!1,(n||L)&&Pb(D.current,x.transform)){const k=Yn(x.transform);D.current=k,clearTimeout(A.current),A.current=setTimeout(()=>{L?.(k),n?.(x.sourceEvent,k)},a?150:0)}})},[F,a,d,n,r]),le(()=>{F&&F.filter(x=>{const L=I||i,k=o&&x.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&x.button===1&&x.type==="mousedown"&&(Yt(x,"react-flow__node")||Yt(x,"react-flow__edge")))return!0;if(!d&&!L&&!a&&!l&&!o||y||!l&&x.type==="dblclick"||Yt(x,S)&&x.type==="wheel"||Yt(x,w)&&(x.type!=="wheel"||a&&x.type==="wheel"&&!I)||!o&&x.ctrlKey&&x.type==="wheel"||!L&&!a&&!k&&x.type==="wheel"||!d&&(x.type==="mousedown"||x.type==="touchstart")||Array.isArray(d)&&!d.includes(x.button)&&(x.type==="mousedown"||x.type==="touchstart"))return!1;const z=Array.isArray(d)&&d.includes(x.button)||!x.button||x.button<=1;return(!x.ctrlKey||x.type==="wheel")&&z})},[y,F,i,o,a,l,d,c,I]),N.createElement("div",{className:"react-flow__renderer",ref:T,style:$s},b)},Ob=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function zb(){const{userSelectionActive:e,userSelectionRect:t}=he(Ob,xe);return e&&t?N.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Pc(e,t){const n=e.find(r=>r.id===t.parentNode);if(n){const r=t.position.x+t.width-n.width,i=t.position.y+t.height-n.height;if(r>0||i>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,r>0&&(n.style.width+=r),i>0&&(n.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);n.position.x=n.position.x-o,n.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);n.position.y=n.position.y-o,n.style.height+=o,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Nh(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const o=e.filter(s=>s.id===i.id);if(o.length===0)return r.push(i),r;const a={...i};for(const s of o)if(s)switch(s.type){case"select":{a.selected=s.selected;break}case"position":{typeof s.position<"u"&&(a.position=s.position),typeof s.positionAbsolute<"u"&&(a.positionAbsolute=s.positionAbsolute),typeof s.dragging<"u"&&(a.dragging=s.dragging),a.expandParent&&Pc(r,a);break}case"dimensions":{typeof s.dimensions<"u"&&(a.width=s.dimensions.width,a.height=s.dimensions.height),typeof s.updateStyle<"u"&&(a.style={...a.style||{},...s.dimensions}),typeof s.resizing=="boolean"&&(a.resizing=s.resizing),a.expandParent&&Pc(r,a);break}case"remove":return r}return r.push(a),r},n)}function Ch(e,t){return Nh(e,t)}function Hb(e,t){return Nh(e,t)}const bt=(e,t)=>({id:e,type:"select",selected:t});function Zt(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(bt(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(bt(r.id,!1))),n},[])}const Xr=(e,t)=>n=>{n.target===t.current&&e?.(n)},Bb=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Ih=de(({isSelecting:e,selectionMode:t=En.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:o,onPaneContextMenu:a,onPaneScroll:s,onPaneMouseEnter:u,onPaneMouseMove:l,onPaneMouseLeave:c,children:d})=>{const h=te(null),f=be(),g=te(0),p=te(0),m=te(),{userSelectionActive:v,elementsSelectable:b,dragging:S}=he(Bb,xe),w=()=>{f.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,p.current=0},A=C=>{o?.(C),f.getState().resetSelectedElements(),f.setState({nodesSelectionActive:!1})},M=C=>{if(Array.isArray(n)&&n?.includes(2)){C.preventDefault();return}a?.(C)},q=s?C=>s(C):void 0,$=C=>{const{resetSelectedElements:y,domNode:I}=f.getState();if(m.current=I?.getBoundingClientRect(),!b||!e||C.button!==0||C.target!==h.current||!m.current)return;const{x:_,y:R}=St(C,m.current);y(),f.setState({userSelectionRect:{width:0,height:0,startX:_,startY:R,x:_,y:R}}),r?.(C)},T=C=>{const{userSelectionRect:y,nodeInternals:I,edges:_,transform:R,onNodesChange:P,onEdgesChange:x,nodeOrigin:L,getNodes:k}=f.getState();if(!e||!m.current||!y)return;f.setState({userSelectionActive:!0,nodesSelectionActive:!1});const z=St(C,m.current),U=y.startX??0,G=y.startY??0,Z={...y,x:z.x<U?z.x:U,y:z.y<G?z.y:G,width:Math.abs(z.x-U),height:Math.abs(z.y-G)},j=k(),ne=sh(I,Z,R,t===En.Partial,!0,L),H=ch(ne,_).map(W=>W.id),V=ne.map(W=>W.id);if(g.current!==V.length){g.current=V.length;const W=Zt(j,V);W.length&&P?.(W)}if(p.current!==H.length){p.current=H.length;const W=Zt(_,H);W.length&&x?.(W)}f.setState({userSelectionRect:Z})},D=C=>{if(C.button!==0)return;const{userSelectionRect:y}=f.getState();!v&&y&&C.target===h.current&&A?.(C),f.setState({nodesSelectionActive:g.current>0}),w(),i?.(C)},F=C=>{v&&(f.setState({nodesSelectionActive:g.current>0}),i?.(C)),w()},O=b&&(e||v);return N.createElement("div",{className:Ee(["react-flow__pane",{dragging:S,selection:e}]),onClick:O?void 0:Xr(A,h),onContextMenu:Xr(M,h),onWheel:Xr(q,h),onMouseEnter:O?void 0:u,onMouseDown:O?$:void 0,onMouseMove:O?T:l,onMouseUp:O?D:void 0,onMouseLeave:O?F:c,ref:h,style:$s},d,N.createElement(zb,null))});Ih.displayName="Pane";function Mh(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:Mh(n,t):!1}function Fc(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Vb(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||!Mh(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>({id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(i.positionAbsolute?.x??0),y:n.y-(i.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode,width:i.width,height:i.height,expandParent:i.expandParent}))}function Gb(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Ah(e,t,n,r,i=[0,0],o){const a=Gb(e,e.extent||r);let s=a;if(e.extent==="parent"&&!e.expandParent)if(e.parentNode&&e.width&&e.height){const c=n.get(e.parentNode),{x:d,y:h}=Dt(c,i).positionAbsolute;s=c&&ze(d)&&ze(h)&&ze(c.width)&&ze(c.height)?[[d+e.width*i[0],h+e.height*i[1]],[d+c.width-e.width+e.width*i[0],h+c.height-e.height+e.height*i[1]]]:s}else o?.("005",ht.error005()),s=a;else if(e.extent&&e.parentNode&&e.extent!=="parent"){const c=n.get(e.parentNode),{x:d,y:h}=Dt(c,i).positionAbsolute;s=[[e.extent[0][0]+d,e.extent[0][1]+h],[e.extent[1][0]+d,e.extent[1][1]+h]]}let u={x:0,y:0};if(e.parentNode){const c=n.get(e.parentNode);u=Dt(c,i).positionAbsolute}const l=s&&s!=="parent"?Cs(t,s):t;return{position:{x:l.x-u.x,y:l.y-u.y},positionAbsolute:l}}function Kr({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const Dc=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const o=Array.from(i),a=t.getBoundingClientRect(),s={x:a.width*r[0],y:a.height*r[1]};return o.map(u=>{const l=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(l.left-a.left-s.x)/n,y:(l.top-a.top-s.y)/n,...Ns(u)}})};function un(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function Ja({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:o,multiSelectionActive:a,nodeInternals:s,onError:u}=t.getState(),l=s.get(e);if(!l){u?.("012",ht.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&a)&&(o({nodes:[l],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function Ub(){const e=be();return ve(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:o}=e.getState(),a=n.touches?n.touches[0].clientX:n.clientX,s=n.touches?n.touches[0].clientY:n.clientY,u={x:(a-r[0])/r[2],y:(s-r[1])/r[2]};return{xSnapped:o?i[0]*Math.round(u.x/i[0]):u.x,ySnapped:o?i[1]*Math.round(u.y/i[1]):u.y,...u}},[])}function jr(e){return(t,n,r)=>e?.(t,r)}function kh({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,selectNodesOnDrag:a}){const s=be(),[u,l]=ae(!1),c=te([]),d=te({x:null,y:null}),h=te(0),f=te(null),g=te({x:0,y:0}),p=te(null),m=te(!1),v=te(!1),b=Ub();return le(()=>{if(e?.current){const S=Oe(e.current),w=({x:q,y:$})=>{const{nodeInternals:T,onNodeDrag:D,onSelectionDrag:F,updateNodePositions:O,nodeExtent:C,snapGrid:y,snapToGrid:I,nodeOrigin:_,onError:R}=s.getState();d.current={x:q,y:$};let P=!1,x={x:0,y:0,x2:0,y2:0};if(c.current.length>1&&C){const k=Ar(c.current,_);x=xn(k)}if(c.current=c.current.map(k=>{const z={x:q-k.distance.x,y:$-k.distance.y};I&&(z.x=y[0]*Math.round(z.x/y[0]),z.y=y[1]*Math.round(z.y/y[1]));const U=[[C[0][0],C[0][1]],[C[1][0],C[1][1]]];c.current.length>1&&C&&!k.extent&&(U[0][0]=k.positionAbsolute.x-x.x+C[0][0],U[1][0]=k.positionAbsolute.x+(k.width??0)-x.x2+C[1][0],U[0][1]=k.positionAbsolute.y-x.y+C[0][1],U[1][1]=k.positionAbsolute.y+(k.height??0)-x.y2+C[1][1]);const G=Ah(k,z,T,U,_,R);return P=P||k.position.x!==G.position.x||k.position.y!==G.position.y,k.position=G.position,k.positionAbsolute=G.positionAbsolute,k}),!P)return;O(c.current,!0,!0),l(!0);const L=i?D:jr(F);if(L&&p.current){const[k,z]=Kr({nodeId:i,dragItems:c.current,nodeInternals:T});L(p.current,k,z)}},A=()=>{if(!f.current)return;const[q,$]=jf(g.current,f.current);if(q!==0||$!==0){const{transform:T,panBy:D}=s.getState();d.current.x=(d.current.x??0)-q/T[2],d.current.y=(d.current.y??0)-$/T[2],D({x:q,y:$})&&w(d.current)}h.current=requestAnimationFrame(A)},M=q=>{const{nodeInternals:$,multiSelectionActive:T,nodesDraggable:D,unselectNodesAndEdges:F,onNodeDragStart:O,onSelectionDragStart:C}=s.getState();v.current=!0;const y=i?O:jr(C);(!a||!o)&&!T&&i&&($.get(i)?.selected||F()),i&&o&&a&&Ja({id:i,store:s,nodeRef:e});const I=b(q);if(d.current=I,c.current=Vb($,D,I,i),y&&c.current){const[_,R]=Kr({nodeId:i,dragItems:c.current,nodeInternals:$});y(q.sourceEvent,_,R)}};if(t)S.on(".drag",null);else{const q=ty().on("start",$=>{const{domNode:T,nodeDragThreshold:D}=s.getState();D===0&&M($);const F=b($);d.current=F,f.current=T?.getBoundingClientRect()||null,g.current=St($.sourceEvent,f.current)}).on("drag",$=>{const T=b($),{autoPanOnNodeDrag:D,nodeDragThreshold:F}=s.getState();if(!m.current&&v.current&&D&&(m.current=!0,A()),!v.current){const O=T.xSnapped-(d?.current?.x??0),C=T.ySnapped-(d?.current?.y??0);Math.sqrt(O*O+C*C)>F&&M($)}(d.current.x!==T.xSnapped||d.current.y!==T.ySnapped)&&c.current&&v.current&&(p.current=$.sourceEvent,g.current=St($.sourceEvent,f.current),w(T))}).on("end",$=>{if(v.current&&(l(!1),m.current=!1,v.current=!1,cancelAnimationFrame(h.current),c.current)){const{updateNodePositions:T,nodeInternals:D,onNodeDragStop:F,onSelectionDragStop:O}=s.getState(),C=i?F:jr(O);if(T(c.current,!1,!1),C){const[y,I]=Kr({nodeId:i,dragItems:c.current,nodeInternals:D});C($.sourceEvent,y,I)}}}).filter($=>{const T=$.target;return!$.button&&(!n||!Fc(T,`.${n}`,e))&&(!r||Fc(T,r,e))});return S.call(q),()=>{S.on(".drag",null)}}}},[e,t,n,r,o,s,i,a,b]),u}function Th(){const e=be();return ve(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:o,getNodes:a,snapToGrid:s,snapGrid:u,onError:l,nodesDraggable:c}=e.getState(),d=a().filter(b=>b.selected&&(b.draggable||c&&typeof b.draggable>"u")),h=s?u[0]:5,f=s?u[1]:5,g=n.isShiftPressed?4:1,p=n.x*h*g,m=n.y*f*g,v=d.map(b=>{if(b.positionAbsolute){const S={x:b.positionAbsolute.x+p,y:b.positionAbsolute.y+m};s&&(S.x=u[0]*Math.round(S.x/u[0]),S.y=u[1]*Math.round(S.y/u[1]));const{positionAbsolute:w,position:A}=Ah(b,S,r,i,void 0,l);b.position=A,b.positionAbsolute=w}return b});o(v,!0,!1)},[])}const Qt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ln=e=>{const t=({id:n,type:r,data:i,xPos:o,yPos:a,xPosOrigin:s,yPosOrigin:u,selected:l,onClick:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:f,onContextMenu:g,onDoubleClick:p,style:m,className:v,isDraggable:b,isSelectable:S,isConnectable:w,isFocusable:A,selectNodesOnDrag:M,sourcePosition:q,targetPosition:$,hidden:T,resizeObserver:D,dragHandle:F,zIndex:O,isParent:C,noDragClassName:y,noPanClassName:I,initialized:_,disableKeyboardA11y:R,ariaLabel:P,rfId:x,hasHandleBounds:L})=>{const k=be(),z=te(null),U=te(q),G=te($),Z=te(r),j=S||b||c||d||h||f,ne=Th(),H=un(n,k.getState,d),V=un(n,k.getState,h),W=un(n,k.getState,f),se=un(n,k.getState,g),oe=un(n,k.getState,p),pe=ie=>{const{nodeDragThreshold:X}=k.getState();if(S&&(!M||!b||X>0)&&Ja({id:n,store:k,nodeRef:z}),c){const Y=k.getState().nodeInternals.get(n);Y&&c(ie,{...Y})}},ue=ie=>{if(!Za(ie))if(th.includes(ie.key)&&S){const X=ie.key==="Escape";Ja({id:n,store:k,unselect:X,nodeRef:z})}else!R&&b&&l&&Object.prototype.hasOwnProperty.call(Qt,ie.key)&&(k.setState({ariaLiveMessage:`Moved selected node ${ie.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~a}`}),ne({x:Qt[ie.key].x,y:Qt[ie.key].y,isShiftPressed:ie.shiftKey}))};le(()=>()=>{z.current&&D?.unobserve(z.current)},[]),le(()=>{if(z.current&&!T){const ie=z.current;(!_||!L)&&(D?.unobserve(ie),D?.observe(ie))}},[T,_,L]),le(()=>{const ie=Z.current!==r,X=U.current!==q,Y=G.current!==$;z.current&&(ie||X||Y)&&(ie&&(Z.current=r),X&&(U.current=q),Y&&(G.current=$),k.getState().updateNodeDimensions([{id:n,nodeElement:z.current,forceUpdate:!0}]))},[n,r,q,$]);const Q=kh({nodeRef:z,disabled:T||!b,noDragClassName:y,handleSelector:F,nodeId:n,isSelectable:S,selectNodesOnDrag:M});return T?null:N.createElement("div",{className:Ee(["react-flow__node",`react-flow__node-${r}`,{[I]:b},v,{selected:l,selectable:S,parent:C,dragging:Q}]),ref:z,style:{zIndex:O,transform:`translate(${s}px,${u}px)`,pointerEvents:j?"all":"none",visibility:_?"visible":"hidden",...m},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:H,onMouseMove:V,onMouseLeave:W,onContextMenu:se,onClick:pe,onDoubleClick:oe,onKeyDown:A?ue:void 0,tabIndex:A?0:void 0,role:A?"button":void 0,"aria-describedby":R?void 0:`${bh}-${x}`,"aria-label":P},N.createElement(ob,{value:n},N.createElement(e,{id:n,data:i,type:r,xPos:o,yPos:a,selected:l,isConnectable:w,sourcePosition:q,targetPosition:$,dragging:Q,dragHandle:F,zIndex:O})))};return t.displayName="NodeWrapper",de(t)};const Yb=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Ar(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Wb({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=be(),{width:i,height:o,x:a,y:s,transformString:u,userSelectionActive:l}=he(Yb,xe),c=Th(),d=te(null);if(le(()=>{n||d.current?.focus({preventScroll:!0})},[n]),kh({nodeRef:d}),l||!i||!o)return null;const h=e?g=>{const p=r.getState().getNodes().filter(m=>m.selected);e(g,p)}:void 0,f=g=>{Object.prototype.hasOwnProperty.call(Qt,g.key)&&c({x:Qt[g.key].x,y:Qt[g.key].y,isShiftPressed:g.shiftKey})};return N.createElement("div",{className:Ee(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u}},N.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:i,height:o,top:s,left:a}}))}var Zb=de(Wb);const Xb=e=>e.nodesSelectionActive,Rh=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:a,deleteKeyCode:s,onMove:u,onMoveStart:l,onMoveEnd:c,selectionKeyCode:d,selectionOnDrag:h,selectionMode:f,onSelectionStart:g,onSelectionEnd:p,multiSelectionKeyCode:m,panActivationKeyCode:v,zoomActivationKeyCode:b,elementsSelectable:S,zoomOnScroll:w,zoomOnPinch:A,panOnScroll:M,panOnScrollSpeed:q,panOnScrollMode:$,zoomOnDoubleClick:T,panOnDrag:D,defaultViewport:F,translateExtent:O,minZoom:C,maxZoom:y,preventScrolling:I,onSelectionContextMenu:_,noWheelClassName:R,noPanClassName:P,disableKeyboardA11y:x})=>{const L=he(Xb),k=Sn(d),z=Sn(v),U=z||D,G=z||M,Z=k||h&&U!==!0;return qb({deleteKeyCode:s,multiSelectionKeyCode:m}),N.createElement(Db,{onMove:u,onMoveStart:l,onMoveEnd:c,onPaneContextMenu:o,elementsSelectable:S,zoomOnScroll:w,zoomOnPinch:A,panOnScroll:G,panOnScrollSpeed:q,panOnScrollMode:$,zoomOnDoubleClick:T,panOnDrag:!k&&U,defaultViewport:F,translateExtent:O,minZoom:C,maxZoom:y,zoomActivationKeyCode:b,preventScrolling:I,noWheelClassName:R,noPanClassName:P},N.createElement(Ih,{onSelectionStart:g,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:a,panOnDrag:U,isSelecting:!!Z,selectionMode:f},e,L&&N.createElement(Zb,{onSelectionContextMenu:_,noPanClassName:P,disableKeyboardA11y:x})))};Rh.displayName="FlowRenderer";var Kb=de(Rh);function jb(e){return he(ve(n=>e?sh(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function Qb(e){const t={input:ln(e.input||mh),default:ln(e.default||Qa),output:ln(e.output||yh),group:ln(e.group||Ls)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,o)=>(i[o]=ln(e[o]||Qa),i),n);return{...t,...r}}const Jb=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},e1=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Lh=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:o,onError:a}=he(e1,xe),s=jb(e.onlyRenderVisibleElements),u=te(),l=Pe(()=>{if(typeof ResizeObserver>"u")return null;const c=new ResizeObserver(d=>{const h=d.map(f=>({id:f.target.getAttribute("data-id"),nodeElement:f.target,forceUpdate:!0}));o(h)});return u.current=c,c},[]);return le(()=>()=>{u?.current?.disconnect()},[]),N.createElement("div",{className:"react-flow__nodes",style:$s},s.map(c=>{let d=c.type||"default";e.nodeTypes[d]||(a?.("003",ht.error003(d)),d="default");const h=e.nodeTypes[d]||e.nodeTypes.default,f=!!(c.draggable||t&&typeof c.draggable>"u"),g=!!(c.selectable||i&&typeof c.selectable>"u"),p=!!(c.connectable||n&&typeof c.connectable>"u"),m=!!(c.focusable||r&&typeof c.focusable>"u"),v=e.nodeExtent?Cs(c.positionAbsolute,e.nodeExtent):c.positionAbsolute,b=v?.x??0,S=v?.y??0,w=Jb({x:b,y:S,width:c.width??0,height:c.height??0,origin:e.nodeOrigin});return N.createElement(h,{key:c.id,id:c.id,className:c.className,style:c.style,type:d,data:c.data,sourcePosition:c.sourcePosition||B.Bottom,targetPosition:c.targetPosition||B.Top,hidden:c.hidden,xPos:b,yPos:S,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!c.selected,isDraggable:f,isSelectable:g,isConnectable:p,isFocusable:m,resizeObserver:l,dragHandle:c.dragHandle,zIndex:c[ye]?.z??0,isParent:!!c[ye]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!c.width&&!!c.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:c.ariaLabel,hasHandleBounds:!!c[ye]?.handleBounds})}))};Lh.displayName="NodeRenderer";var t1=de(Lh);const n1=(e,t,n)=>n===B.Left?e-t:n===B.Right?e+t:e,r1=(e,t,n)=>n===B.Top?e-t:n===B.Bottom?e+t:e,Oc="react-flow__edgeupdater",zc=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:a,type:s})=>N.createElement("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:a,className:Ee([Oc,`${Oc}-${s}`]),cx:n1(t,r,e),cy:r1(n,r,e),r,stroke:"transparent",fill:"transparent"}),i1=()=>!0;var Wt=e=>{const t=({id:n,className:r,type:i,data:o,onClick:a,onEdgeDoubleClick:s,selected:u,animated:l,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:p,style:m,source:v,target:b,sourceX:S,sourceY:w,targetX:A,targetY:M,sourcePosition:q,targetPosition:$,elementsSelectable:T,hidden:D,sourceHandleId:F,targetHandleId:O,onContextMenu:C,onMouseEnter:y,onMouseMove:I,onMouseLeave:_,edgeUpdaterRadius:R,onEdgeUpdate:P,onEdgeUpdateStart:x,onEdgeUpdateEnd:L,markerEnd:k,markerStart:z,rfId:U,ariaLabel:G,isFocusable:Z,isUpdatable:j,pathOptions:ne,interactionWidth:H})=>{const V=te(null),[W,se]=ae(!1),[oe,pe]=ae(!1),ue=be(),Q=Pe(()=>`url('#${Ka(z,U)}')`,[z,U]),ie=Pe(()=>`url('#${Ka(k,U)}')`,[k,U]);if(D)return null;const X=we=>{const{edges:Ae,addSelectedEdges:Je,unselectNodesAndEdges:Ne,multiSelectionActive:ke}=ue.getState(),et=Ae.find(Mt=>Mt.id===n);et&&(T&&(ue.setState({nodesSelectionActive:!1}),et.selected&&ke?(Ne({nodes:[],edges:[et]}),V.current?.blur()):Je([n])),a&&a(we,et))},Y=cn(n,ue.getState,s),Se=cn(n,ue.getState,C),Ve=cn(n,ue.getState,y),Ke=cn(n,ue.getState,I),Me=cn(n,ue.getState,_),me=(we,Ae)=>{if(we.button!==0)return;const{edges:Je,isValidConnection:Ne}=ue.getState(),ke=Ae?b:v,et=(Ae?O:F)||null,Mt=Ae?"target":"source",Pr=Ne||i1,Fr=Ae,on=Je.find(At=>At.id===n);pe(!0),x?.(we,on,Mt);const Dr=At=>{pe(!1),L?.(At,on,Mt)};fh({event:we,handleId:et,nodeId:ke,onConnect:At=>P?.(on,At),isTarget:Fr,getState:ue.getState,setState:ue.setState,isValidConnection:Pr,edgeUpdaterType:Mt,onEdgeUpdateEnd:Dr})},Le=we=>me(we,!0),Ge=we=>me(we,!1),je=()=>se(!0),Qe=()=>se(!1),De=!T&&!a,it=we=>{if(th.includes(we.key)&&T){const{unselectNodesAndEdges:Ae,addSelectedEdges:Je,edges:Ne}=ue.getState();we.key==="Escape"?(V.current?.blur(),Ae({edges:[Ne.find(et=>et.id===n)]})):Je([n])}};return N.createElement("g",{className:Ee(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:u,animated:l,inactive:De,updating:W}]),onClick:X,onDoubleClick:Y,onContextMenu:Se,onMouseEnter:Ve,onMouseMove:Ke,onMouseLeave:Me,onKeyDown:Z?it:void 0,tabIndex:Z?0:void 0,role:Z?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":G===null?void 0:G||`Edge from ${v} to ${b}`,"aria-describedby":Z?`${_h}-${U}`:void 0,ref:V},!oe&&N.createElement(e,{id:n,source:v,target:b,selected:u,animated:l,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:f,labelBgPadding:g,labelBgBorderRadius:p,data:o,style:m,sourceX:S,sourceY:w,targetX:A,targetY:M,sourcePosition:q,targetPosition:$,sourceHandleId:F,targetHandleId:O,markerStart:Q,markerEnd:ie,pathOptions:ne,interactionWidth:H}),j&&N.createElement(N.Fragment,null,(j==="source"||j===!0)&&N.createElement(zc,{position:q,centerX:S,centerY:w,radius:R,onMouseDown:Le,onMouseEnter:je,onMouseOut:Qe,type:"source"}),(j==="target"||j===!0)&&N.createElement(zc,{position:$,centerX:A,centerY:M,radius:R,onMouseDown:Ge,onMouseEnter:je,onMouseOut:Qe,type:"target"})))};return t.displayName="EdgeWrapper",de(t)};function o1(e){const t={default:Wt(e.default||dr),straight:Wt(e.bezier||As),step:Wt(e.step||Ms),smoothstep:Wt(e.step||Mr),simplebezier:Wt(e.simplebezier||Is)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,o)=>(i[o]=Wt(e[o]||dr),i),n);return{...t,...r}}function Hc(e,t,n=null){const r=(n?.x||0)+t.x,i=(n?.y||0)+t.y,o=n?.width||t.width,a=n?.height||t.height;switch(e){case B.Top:return{x:r+o/2,y:i};case B.Right:return{x:r+o,y:i+a/2};case B.Bottom:return{x:r+o/2,y:i+a};case B.Left:return{x:r,y:i+a/2}}}function Bc(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const a1=(e,t,n,r,i,o)=>{const a=Hc(n,e,t),s=Hc(o,r,i);return{sourceX:a.x,sourceY:a.y,targetX:s.x,targetY:s.y}};function s1({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:o,width:a,height:s,transform:u}){const l={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+o)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const c=xn({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:a/u[2],height:s/u[2]}),d=Math.max(0,Math.min(c.x2,l.x2)-Math.max(c.x,l.x)),h=Math.max(0,Math.min(c.y2,l.y2)-Math.max(c.y,l.y));return Math.ceil(d*h)>0}function Vc(e){const t=e?.[ye]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const c1=[{level:0,isMaxLevel:!0,edges:[]}];function u1(e,t,n=!1){let r=-1;const i=e.reduce((a,s)=>{const u=ze(s.zIndex);let l=u?s.zIndex:0;if(n){const c=t.get(s.target),d=t.get(s.source),h=s.selected||c?.selected||d?.selected,f=Math.max(d?.[ye]?.z||0,c?.[ye]?.z||0,1e3);l=(u?s.zIndex:0)+(h?f:0)}return a[l]?a[l].push(s):a[l]=[s],r=l>r?l:r,a},{}),o=Object.entries(i).map(([a,s])=>{const u=+a;return{edges:s,level:u,isMaxLevel:u===r}});return o.length===0?c1:o}function l1(e,t,n){const r=he(ve(i=>e?i.edges.filter(o=>{const a=t.get(o.source),s=t.get(o.target);return a?.width&&a?.height&&s?.width&&s?.height&&s1({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:s.width,targetHeight:s.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return u1(r,t,n)}const d1=({color:e="none",strokeWidth:t=1})=>N.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),f1=({color:e="none",strokeWidth:t=1})=>N.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Gc={[lr.Arrow]:d1,[lr.ArrowClosed]:f1};function h1(e){const t=be();return Pe(()=>Object.prototype.hasOwnProperty.call(Gc,e)?Gc[e]:(t.getState().onError?.("009",ht.error009(e)),null),[e])}const p1=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:a,orient:s="auto-start-reverse"})=>{const u=h1(t);return u?N.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:s,refX:"0",refY:"0"},N.createElement(u,{color:n,strokeWidth:a})):null},g1=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,o)=>([o.markerStart,o.markerEnd].forEach(a=>{if(a&&typeof a=="object"){const s=Ka(a,t);r.includes(s)||(i.push({id:s,color:a.color||e,...a}),r.push(s))}}),i),[]).sort((i,o)=>i.id.localeCompare(o.id))},qh=({defaultColor:e,rfId:t})=>{const n=he(ve(g1({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((o,a)=>o.id!==i[a].id)));return N.createElement("defs",null,n.map(r=>N.createElement(p1,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};qh.displayName="MarkerDefinitions";var m1=de(qh);const v1=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),$h=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:o,onEdgeUpdate:a,onEdgeContextMenu:s,onEdgeMouseEnter:u,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:d,edgeUpdaterRadius:h,onEdgeDoubleClick:f,onEdgeUpdateStart:g,onEdgeUpdateEnd:p,children:m})=>{const{edgesFocusable:v,edgesUpdatable:b,elementsSelectable:S,width:w,height:A,connectionMode:M,nodeInternals:q,onError:$}=he(v1,xe),T=l1(t,q,n);return w?N.createElement(N.Fragment,null,T.map(({level:D,edges:F,isMaxLevel:O})=>N.createElement("svg",{key:D,style:{zIndex:D},width:w,height:A,className:"react-flow__edges react-flow__container"},O&&N.createElement(m1,{defaultColor:e,rfId:r}),N.createElement("g",null,F.map(C=>{const[y,I,_]=Vc(q.get(C.source)),[R,P,x]=Vc(q.get(C.target));if(!_||!x)return null;let L=C.type||"default";i[L]||($?.("011",ht.error011(L)),L="default");const k=i[L]||i.default,z=M===Ht.Strict?P.target:(P.target??[]).concat(P.source??[]),U=Bc(I.source,C.sourceHandle),G=Bc(z,C.targetHandle),Z=U?.position||B.Bottom,j=G?.position||B.Top,ne=!!(C.focusable||v&&typeof C.focusable>"u"),H=typeof a<"u"&&(C.updatable||b&&typeof C.updatable>"u");if(!U||!G)return $?.("008",ht.error008(U,C)),null;const{sourceX:V,sourceY:W,targetX:se,targetY:oe}=a1(y,U,Z,R,G,j);return N.createElement(k,{key:C.id,id:C.id,className:Ee([C.className,o]),type:L,data:C.data,selected:!!C.selected,animated:!!C.animated,hidden:!!C.hidden,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,style:C.style,source:C.source,target:C.target,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerEnd:C.markerEnd,markerStart:C.markerStart,sourceX:V,sourceY:W,targetX:se,targetY:oe,sourcePosition:Z,targetPosition:j,elementsSelectable:S,onEdgeUpdate:a,onContextMenu:s,onMouseEnter:u,onMouseMove:l,onMouseLeave:c,onClick:d,edgeUpdaterRadius:h,onEdgeDoubleClick:f,onEdgeUpdateStart:g,onEdgeUpdateEnd:p,rfId:r,ariaLabel:C.ariaLabel,isFocusable:ne,isUpdatable:H,pathOptions:"pathOptions"in C?C.pathOptions:void 0,interactionWidth:C.interactionWidth})})))),m):null};$h.displayName="EdgeRenderer";var y1=de($h);const w1=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function b1({children:e}){const t=he(w1);return N.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function _1(e){const t=qs(),n=te(!1);le(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const x1={[B.Left]:B.Right,[B.Right]:B.Left,[B.Top]:B.Bottom,[B.Bottom]:B.Top},Ph=({nodeId:e,handleType:t,style:n,type:r=_t.Bezier,CustomComponent:i,connectionStatus:o})=>{const{fromNode:a,handleId:s,toX:u,toY:l,connectionMode:c}=he(ve(M=>({fromNode:M.nodeInternals.get(e),handleId:M.connectionHandleId,toX:(M.connectionPosition.x-M.transform[0])/M.transform[2],toY:(M.connectionPosition.y-M.transform[1])/M.transform[2],connectionMode:M.connectionMode}),[e]),xe),d=a?.[ye]?.handleBounds;let h=d?.[t];if(c===Ht.Loose&&(h=h||d?.[t==="source"?"target":"source"]),!a||!h)return null;const f=s?h.find(M=>M.id===s):h[0],g=f?f.x+f.width/2:(a.width??0)/2,p=f?f.y+f.height/2:a.height??0,m=(a.positionAbsolute?.x??0)+g,v=(a.positionAbsolute?.y??0)+p,b=f?.position,S=b?x1[b]:null;if(!b||!S)return null;if(i)return N.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:a,fromHandle:f,fromX:m,fromY:v,toX:u,toY:l,fromPosition:b,toPosition:S,connectionStatus:o});let w="";const A={sourceX:m,sourceY:v,sourcePosition:b,targetX:u,targetY:l,targetPosition:S};return r===_t.Bezier?[w]=ks(A):r===_t.Step?[w]=Xa({...A,borderRadius:0}):r===_t.SmoothStep?[w]=Xa(A):r===_t.SimpleBezier?[w]=oh(A):w=`M${m},${v} ${u},${l}`,N.createElement("path",{d:w,fill:"none",className:"react-flow__connection-path",style:n})};Ph.displayName="ConnectionLine";const E1=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function S1({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:o,nodesConnectable:a,width:s,height:u,connectionStatus:l}=he(E1,xe);return!(i&&o&&s&&a)?null:N.createElement("svg",{style:e,width:s,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},N.createElement("g",{className:Ee(["react-flow__connection",l])},N.createElement(Ph,{nodeId:i,handleType:o,style:t,type:n,CustomComponent:r,connectionStatus:l})))}function Uc(e,t){return te(null),be(),Pe(()=>t(e),[e])}const Fh=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:o,onNodeClick:a,onEdgeClick:s,onNodeDoubleClick:u,onEdgeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:f,onSelectionContextMenu:g,onSelectionStart:p,onSelectionEnd:m,connectionLineType:v,connectionLineStyle:b,connectionLineComponent:S,connectionLineContainerStyle:w,selectionKeyCode:A,selectionOnDrag:M,selectionMode:q,multiSelectionKeyCode:$,panActivationKeyCode:T,zoomActivationKeyCode:D,deleteKeyCode:F,onlyRenderVisibleElements:O,elementsSelectable:C,selectNodesOnDrag:y,defaultViewport:I,translateExtent:_,minZoom:R,maxZoom:P,preventScrolling:x,defaultMarkerColor:L,zoomOnScroll:k,zoomOnPinch:z,panOnScroll:U,panOnScrollSpeed:G,panOnScrollMode:Z,zoomOnDoubleClick:j,panOnDrag:ne,onPaneClick:H,onPaneMouseEnter:V,onPaneMouseMove:W,onPaneMouseLeave:se,onPaneScroll:oe,onPaneContextMenu:pe,onEdgeUpdate:ue,onEdgeContextMenu:Q,onEdgeMouseEnter:ie,onEdgeMouseMove:X,onEdgeMouseLeave:Y,edgeUpdaterRadius:Se,onEdgeUpdateStart:Ve,onEdgeUpdateEnd:Ke,noDragClassName:Me,noWheelClassName:me,noPanClassName:Le,elevateEdgesOnSelect:Ge,disableKeyboardA11y:je,nodeOrigin:Qe,nodeExtent:De,rfId:it})=>{const we=Uc(e,Qb),Ae=Uc(t,o1);return _1(o),N.createElement(Kb,{onPaneClick:H,onPaneMouseEnter:V,onPaneMouseMove:W,onPaneMouseLeave:se,onPaneContextMenu:pe,onPaneScroll:oe,deleteKeyCode:F,selectionKeyCode:A,selectionOnDrag:M,selectionMode:q,onSelectionStart:p,onSelectionEnd:m,multiSelectionKeyCode:$,panActivationKeyCode:T,zoomActivationKeyCode:D,elementsSelectable:C,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:k,zoomOnPinch:z,zoomOnDoubleClick:j,panOnScroll:U,panOnScrollSpeed:G,panOnScrollMode:Z,panOnDrag:ne,defaultViewport:I,translateExtent:_,minZoom:R,maxZoom:P,onSelectionContextMenu:g,preventScrolling:x,noDragClassName:Me,noWheelClassName:me,noPanClassName:Le,disableKeyboardA11y:je},N.createElement(b1,null,N.createElement(y1,{edgeTypes:Ae,onEdgeClick:s,onEdgeDoubleClick:l,onEdgeUpdate:ue,onlyRenderVisibleElements:O,onEdgeContextMenu:Q,onEdgeMouseEnter:ie,onEdgeMouseMove:X,onEdgeMouseLeave:Y,onEdgeUpdateStart:Ve,onEdgeUpdateEnd:Ke,edgeUpdaterRadius:Se,defaultMarkerColor:L,noPanClassName:Le,elevateEdgesOnSelect:!!Ge,disableKeyboardA11y:je,rfId:it},N.createElement(S1,{style:b,type:v,component:S,containerStyle:w})),N.createElement("div",{className:"react-flow__edgelabel-renderer"}),N.createElement(t1,{nodeTypes:we,onNodeClick:a,onNodeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:f,selectNodesOnDrag:y,onlyRenderVisibleElements:O,noPanClassName:Le,noDragClassName:Me,disableKeyboardA11y:je,nodeOrigin:Qe,nodeExtent:De,rfId:it})))};Fh.displayName="GraphView";var N1=de(Fh);const es=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],mt={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:es,nodeExtent:es,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ht.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Qw,isValidConnection:void 0},C1=()=>h0((e,t)=>({...mt,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:o}=t();e({nodeInternals:Zr(n,r,i,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",o=typeof r<"u",a=i?Zr(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:a,edges:o?r:[],hasDefaultNodes:i,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:o,fitViewOnInitDone:a,fitViewOnInitOptions:s,domNode:u,nodeOrigin:l}=t(),c=u?.querySelector(".react-flow__viewport");if(!c)return;const d=window.getComputedStyle(c),{m22:h}=new window.DOMMatrixReadOnly(d.transform),f=n.reduce((p,m)=>{const v=i.get(m.id);if(v){const b=Ns(m.nodeElement);!!(b.width&&b.height&&(v.width!==b.width||v.height!==b.height||m.forceUpdate))&&(i.set(v.id,{...v,[ye]:{...v[ye],handleBounds:{source:Dc(".source",m.nodeElement,h,l),target:Dc(".target",m.nodeElement,h,l)}},...b}),p.push({id:v.id,type:"dimensions",dimensions:b}))}return p},[]);Eh(i,l);const g=a||o&&!a&&Sh(t,{initial:!0,...s});e({nodeInternals:new Map(i),fitViewOnInitDone:g}),f?.length>0&&r?.(f)},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:o}=t(),a=n.map(s=>{const u={id:s.id,type:"position",dragging:i};return r&&(u.positionAbsolute=s.positionAbsolute,u.position=s.position),u});o(a)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:o,nodeOrigin:a,getNodes:s,elevateNodesOnSelect:u}=t();if(n?.length){if(o){const l=Ch(n,s()),c=Zr(l,i,a,u);e({nodeInternals:c})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let a,s=null;r?a=n.map(u=>bt(u,!0)):(a=Zt(o(),n),s=Zt(i,[])),Un({changedNodes:a,changedEdges:s,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let a,s=null;r?a=n.map(u=>bt(u,!0)):(a=Zt(i,n),s=Zt(o(),[])),Un({changedNodes:s,changedEdges:a,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:o}=t(),a=n||o(),s=r||i,u=a.map(c=>(c.selected=!1,bt(c.id,!1))),l=s.map(c=>bt(c.id,!1));Un({changedNodes:u,changedEdges:l,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r?.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r?.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),o=r().filter(s=>s.selected).map(s=>bt(s.id,!1)),a=n.filter(s=>s.selected).map(s=>bt(s.id,!1));Un({changedNodes:o,changedEdges:a,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=Cs(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:o,d3Zoom:a,d3Selection:s,translateExtent:u}=t();if(!a||!s||!n.x&&!n.y)return!1;const l=lt.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),c=[[0,0],[i,o]],d=a?.constrain()(l,c,u);return a.transform(s,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:mt.connectionNodeId,connectionHandleId:mt.connectionHandleId,connectionHandleType:mt.connectionHandleType,connectionStatus:mt.connectionStatus,connectionStartHandle:mt.connectionStartHandle,connectionEndHandle:mt.connectionEndHandle}),reset:()=>e({...mt})}),Object.is),Dh=({children:e})=>{const t=te(null);return t.current||(t.current=C1()),N.createElement(Uw,{value:t.current},e)};Dh.displayName="ReactFlowProvider";const Oh=({children:e})=>mr(Ir)?N.createElement(N.Fragment,null,e):N.createElement(Dh,null,e);Oh.displayName="ReactFlowWrapper";const I1={input:mh,default:Qa,output:yh,group:Ls},M1={default:dr,straight:As,step:Ms,smoothstep:Mr,simplebezier:Is},A1=[0,0],k1=[15,15],T1={x:0,y:0,zoom:1},R1={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},zh=Bd(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o=I1,edgeTypes:a=M1,onNodeClick:s,onEdgeClick:u,onInit:l,onMove:c,onMoveStart:d,onMoveEnd:h,onConnect:f,onConnectStart:g,onConnectEnd:p,onClickConnectStart:m,onClickConnectEnd:v,onNodeMouseEnter:b,onNodeMouseMove:S,onNodeMouseLeave:w,onNodeContextMenu:A,onNodeDoubleClick:M,onNodeDragStart:q,onNodeDrag:$,onNodeDragStop:T,onNodesDelete:D,onEdgesDelete:F,onSelectionChange:O,onSelectionDragStart:C,onSelectionDrag:y,onSelectionDragStop:I,onSelectionContextMenu:_,onSelectionStart:R,onSelectionEnd:P,connectionMode:x=Ht.Strict,connectionLineType:L=_t.Bezier,connectionLineStyle:k,connectionLineComponent:z,connectionLineContainerStyle:U,deleteKeyCode:G="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:j=!1,selectionMode:ne=En.Full,panActivationKeyCode:H="Space",multiSelectionKeyCode:V=ur()?"Meta":"Control",zoomActivationKeyCode:W=ur()?"Meta":"Control",snapToGrid:se=!1,snapGrid:oe=k1,onlyRenderVisibleElements:pe=!1,selectNodesOnDrag:ue=!0,nodesDraggable:Q,nodesConnectable:ie,nodesFocusable:X,nodeOrigin:Y=A1,edgesFocusable:Se,edgesUpdatable:Ve,elementsSelectable:Ke,defaultViewport:Me=T1,minZoom:me=.5,maxZoom:Le=2,translateExtent:Ge=es,preventScrolling:je=!0,nodeExtent:Qe,defaultMarkerColor:De="#b1b1b7",zoomOnScroll:it=!0,zoomOnPinch:we=!0,panOnScroll:Ae=!1,panOnScrollSpeed:Je=.5,panOnScrollMode:Ne=Lt.Free,zoomOnDoubleClick:ke=!0,panOnDrag:et=!0,onPaneClick:Mt,onPaneMouseEnter:Pr,onPaneMouseMove:Fr,onPaneMouseLeave:on,onPaneScroll:Dr,onPaneContextMenu:Ws,children:At,onEdgeUpdate:Xp,onEdgeContextMenu:Kp,onEdgeDoubleClick:jp,onEdgeMouseEnter:Qp,onEdgeMouseMove:Jp,onEdgeMouseLeave:eg,onEdgeUpdateStart:tg,onEdgeUpdateEnd:ng,edgeUpdaterRadius:rg=10,onNodesChange:ig,onEdgesChange:og,noDragClassName:ag="nodrag",noWheelClassName:sg="nowheel",noPanClassName:Zs="nopan",fitView:cg=!1,fitViewOptions:ug,connectOnClick:lg=!0,attributionPosition:dg,proOptions:fg,defaultEdgeOptions:hg,elevateNodesOnSelect:pg=!0,elevateEdgesOnSelect:gg=!1,disableKeyboardA11y:Xs=!1,autoPanOnConnect:mg=!0,autoPanOnNodeDrag:vg=!0,connectionRadius:yg=20,isValidConnection:wg,onError:bg,style:_g,id:Ks,nodeDragThreshold:xg,...Eg},Sg)=>{const Or=Ks||"1";return N.createElement("div",{...Eg,style:{..._g,...R1},ref:Sg,className:Ee(["react-flow",i]),"data-testid":"rf__wrapper",id:Ks},N.createElement(Oh,null,N.createElement(N1,{onInit:l,onMove:c,onMoveStart:d,onMoveEnd:h,onNodeClick:s,onEdgeClick:u,onNodeMouseEnter:b,onNodeMouseMove:S,onNodeMouseLeave:w,onNodeContextMenu:A,onNodeDoubleClick:M,nodeTypes:o,edgeTypes:a,connectionLineType:L,connectionLineStyle:k,connectionLineComponent:z,connectionLineContainerStyle:U,selectionKeyCode:Z,selectionOnDrag:j,selectionMode:ne,deleteKeyCode:G,multiSelectionKeyCode:V,panActivationKeyCode:H,zoomActivationKeyCode:W,onlyRenderVisibleElements:pe,selectNodesOnDrag:ue,defaultViewport:Me,translateExtent:Ge,minZoom:me,maxZoom:Le,preventScrolling:je,zoomOnScroll:it,zoomOnPinch:we,zoomOnDoubleClick:ke,panOnScroll:Ae,panOnScrollSpeed:Je,panOnScrollMode:Ne,panOnDrag:et,onPaneClick:Mt,onPaneMouseEnter:Pr,onPaneMouseMove:Fr,onPaneMouseLeave:on,onPaneScroll:Dr,onPaneContextMenu:Ws,onSelectionContextMenu:_,onSelectionStart:R,onSelectionEnd:P,onEdgeUpdate:Xp,onEdgeContextMenu:Kp,onEdgeDoubleClick:jp,onEdgeMouseEnter:Qp,onEdgeMouseMove:Jp,onEdgeMouseLeave:eg,onEdgeUpdateStart:tg,onEdgeUpdateEnd:ng,edgeUpdaterRadius:rg,defaultMarkerColor:De,noDragClassName:ag,noWheelClassName:sg,noPanClassName:Zs,elevateEdgesOnSelect:gg,rfId:Or,disableKeyboardA11y:Xs,nodeOrigin:Y,nodeExtent:Qe}),N.createElement(xb,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:f,onConnectStart:g,onConnectEnd:p,onClickConnectStart:m,onClickConnectEnd:v,nodesDraggable:Q,nodesConnectable:ie,nodesFocusable:X,edgesFocusable:Se,edgesUpdatable:Ve,elementsSelectable:Ke,elevateNodesOnSelect:pg,minZoom:me,maxZoom:Le,nodeExtent:Qe,onNodesChange:ig,onEdgesChange:og,snapToGrid:se,snapGrid:oe,connectionMode:x,translateExtent:Ge,connectOnClick:lg,defaultEdgeOptions:hg,fitView:cg,fitViewOptions:ug,onNodesDelete:D,onEdgesDelete:F,onNodeDragStart:q,onNodeDrag:$,onNodeDragStop:T,onSelectionDrag:y,onSelectionDragStart:C,onSelectionDragStop:I,noPanClassName:Zs,nodeOrigin:Y,rfId:Or,autoPanOnConnect:mg,autoPanOnNodeDrag:vg,onError:bg,connectionRadius:yg,isValidConnection:wg,nodeDragThreshold:xg}),N.createElement(bb,{onSelectionChange:O}),At,N.createElement(Ww,{proOptions:fg,position:dg}),N.createElement(Ib,{rfId:Or,disableKeyboardA11y:Xs})))});zh.displayName="ReactFlow";function Hh(e){return t=>{const[n,r]=ae(t),i=ve(o=>r(a=>e(o,a)),[]);return[n,r,i]}}const L1=Hh(Ch),q1=Hh(Hb),Bh=({id:e,x:t,y:n,width:r,height:i,style:o,color:a,strokeColor:s,strokeWidth:u,className:l,borderRadius:c,shapeRendering:d,onClick:h,selected:f})=>{const{background:g,backgroundColor:p}=o||{},m=a||g||p;return N.createElement("rect",{className:Ee(["react-flow__minimap-node",{selected:f},l]),x:t,y:n,rx:c,ry:c,width:r,height:i,fill:m,stroke:s,strokeWidth:u,shapeRendering:d,onClick:h?v=>h(v,e):void 0})};Bh.displayName="MiniMapNode";var $1=de(Bh);const P1=e=>e.nodeOrigin,F1=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Qr=e=>e instanceof Function?e:()=>e;function D1({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i=2,nodeComponent:o=$1,onClick:a}){const s=he(F1,xe),u=he(P1),l=Qr(t),c=Qr(e),d=Qr(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return N.createElement(N.Fragment,null,s.map(f=>{const{x:g,y:p}=Dt(f,u).positionAbsolute;return N.createElement(o,{key:f.id,x:g,y:p,width:f.width,height:f.height,style:f.style,selected:f.selected,className:d(f),color:l(f),borderRadius:r,strokeColor:c(f),strokeWidth:i,shapeRendering:h,onClick:a,id:f.id})}))}var O1=de(D1);const z1=200,H1=150,B1=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?Kw(Ar(t,e.nodeOrigin),n):n,rfId:e.rfId}},V1="react-flow__minimap-desc";function Vh({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:a=2,nodeComponent:s,maskColor:u="rgb(240, 240, 240, 0.6)",maskStrokeColor:l="none",maskStrokeWidth:c=1,position:d="bottom-right",onClick:h,onNodeClick:f,pannable:g=!1,zoomable:p=!1,ariaLabel:m="React Flow mini map",inversePan:v=!1,zoomStep:b=10,offsetScale:S=5}){const w=be(),A=te(null),{boundingRect:M,viewBB:q,rfId:$}=he(B1,xe),T=e?.width??z1,D=e?.height??H1,F=M.width/T,O=M.height/D,C=Math.max(F,O),y=C*T,I=C*D,_=S*C,R=M.x-(y-M.width)/2-_,P=M.y-(I-M.height)/2-_,x=y+_*2,L=I+_*2,k=`${V1}-${$}`,z=te(0);z.current=C,le(()=>{if(A.current){const Z=Oe(A.current),j=V=>{const{transform:W,d3Selection:se,d3Zoom:oe}=w.getState();if(V.sourceEvent.type!=="wheel"||!se||!oe)return;const pe=-V.sourceEvent.deltaY*(V.sourceEvent.deltaMode===1?.05:V.sourceEvent.deltaMode?1:.002)*b,ue=W[2]*Math.pow(2,pe);oe.scaleTo(se,ue)},ne=V=>{const{transform:W,d3Selection:se,d3Zoom:oe,translateExtent:pe,width:ue,height:Q}=w.getState();if(V.sourceEvent.type!=="mousemove"||!se||!oe)return;const ie=z.current*Math.max(1,W[2])*(v?-1:1),X={x:W[0]-V.sourceEvent.movementX*ie,y:W[1]-V.sourceEvent.movementY*ie},Y=[[0,0],[ue,Q]],Se=lt.translate(X.x,X.y).scale(W[2]),Ve=oe.constrain()(Se,Y,pe);oe.transform(se,Ve)},H=Xf().on("zoom",g?ne:null).on("zoom.wheel",p?j:null);return Z.call(H),()=>{Z.on("zoom",null)}}},[g,p,v,b]);const U=h?Z=>{const j=Ue(Z);h(Z,{x:j[0],y:j[1]})}:void 0,G=f?(Z,j)=>{const ne=w.getState().nodeInternals.get(j);f(Z,ne)}:void 0;return N.createElement(Ss,{position:d,style:e,className:Ee(["react-flow__minimap",t]),"data-testid":"rf__minimap"},N.createElement("svg",{width:T,height:D,viewBox:`${R} ${P} ${x} ${L}`,role:"img","aria-labelledby":k,ref:A,onClick:U},m&&N.createElement("title",{id:k},m),N.createElement(O1,{onClick:G,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:i,nodeStrokeWidth:a,nodeComponent:s}),N.createElement("path",{className:"react-flow__minimap-mask",d:`M${R-_},${P-_}h${x+_*2}v${L+_*2}h${-x-_*2}z
        M${q.x},${q.y}h${q.width}v${q.height}h${-q.width}z`,fill:u,fillRule:"evenodd",stroke:l,strokeWidth:c,pointerEvents:"none"})))}Vh.displayName="MiniMap";var G1=de(Vh);function U1(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},N.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Y1(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},N.createElement("path",{d:"M0 0h32v4.2H0z"}))}function W1(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},N.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Z1(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},N.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function X1(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},N.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const hn=({children:e,className:t,...n})=>N.createElement("button",{type:"button",className:Ee(["react-flow__controls-button",t]),...n},e);hn.displayName="ControlButton";const K1=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Gh=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:a,onFitView:s,onInteractiveChange:u,className:l,children:c,position:d="bottom-left"})=>{const h=be(),[f,g]=ae(!1),{isInteractive:p,minZoomReached:m,maxZoomReached:v}=he(K1,xe),{zoomIn:b,zoomOut:S,fitView:w}=qs();if(le(()=>{g(!0)},[]),!f)return null;const A=()=>{b(),o?.()},M=()=>{S(),a?.()},q=()=>{w(i),s?.()},$=()=>{h.setState({nodesDraggable:!p,nodesConnectable:!p,elementsSelectable:!p}),u?.(!p)};return N.createElement(Ss,{className:Ee(["react-flow__controls",l]),position:d,style:e,"data-testid":"rf__controls"},t&&N.createElement(N.Fragment,null,N.createElement(hn,{onClick:A,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:v},N.createElement(U1,null)),N.createElement(hn,{onClick:M,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:m},N.createElement(Y1,null))),n&&N.createElement(hn,{className:"react-flow__controls-fitview",onClick:q,title:"fit view","aria-label":"fit view"},N.createElement(W1,null)),r&&N.createElement(hn,{className:"react-flow__controls-interactive",onClick:$,title:"toggle interactivity","aria-label":"toggle interactivity"},p?N.createElement(X1,null):N.createElement(Z1,null)),c)};Gh.displayName="Controls";var j1=de(Gh),We;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(We||(We={}));function Q1({color:e,dimensions:t,lineWidth:n}){return N.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function J1({color:e,radius:t}){return N.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const e_={[We.Dots]:"#91919a",[We.Lines]:"#eee",[We.Cross]:"#e2e2e2"},t_={[We.Dots]:1,[We.Lines]:1,[We.Cross]:6},n_=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Uh({id:e,variant:t=We.Dots,gap:n=20,size:r,lineWidth:i=1,offset:o=2,color:a,style:s,className:u}){const l=te(null),{transform:c,patternId:d}=he(n_,xe),h=a||e_[t],f=r||t_[t],g=t===We.Dots,p=t===We.Cross,m=Array.isArray(n)?n:[n,n],v=[m[0]*c[2]||1,m[1]*c[2]||1],b=f*c[2],S=p?[b,b]:v,w=g?[b/o,b/o]:[S[0]/o,S[1]/o];return N.createElement("svg",{className:Ee(["react-flow__background",u]),style:{...s,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:l,"data-testid":"rf__background"},N.createElement("pattern",{id:d+e,x:c[0]%v[0],y:c[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${w[0]},-${w[1]})`},g?N.createElement(J1,{color:h,radius:b/o}):N.createElement(Q1,{dimensions:S,color:h,lineWidth:i})),N.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}Uh.displayName="Background";var r_=de(Uh);function i_(e,t){const n=te(!1);le(()=>{if(n.current)return e();n.current=!0},t)}var Jr,Yc;function Ps(){if(Yc)return Jr;Yc=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Jr=e,Jr}var ei,Wc;function o_(){if(Wc)return ei;Wc=1;var e=br,t=Bt();function n(r,i){return r&&e(i,t(i),r)}return ei=n,ei}var ti,Zc;function a_(){if(Zc)return ti;Zc=1;var e=br,t=An;function n(r,i){return r&&e(i,t(i),r)}return ti=n,ti}var ni,Xc;function s_(){if(Xc)return ni;Xc=1;var e=br,t=Zd();function n(r,i){return e(r,t(r),i)}return ni=n,ni}var ri,Kc;function Yh(){if(Kc)return ri;Kc=1;var e=Xd(),t=Kd,n=Zd(),r=tm(),i=Object.getOwnPropertySymbols,o=i?function(a){for(var s=[];a;)e(s,n(a)),a=t(a);return s}:r;return ri=o,ri}var ii,jc;function c_(){if(jc)return ii;jc=1;var e=br,t=Yh();function n(r,i){return e(r,t(r),i)}return ii=n,ii}var oi,Qc;function u_(){if(Qc)return oi;Qc=1;var e=nm(),t=Yh(),n=An;function r(i){return e(i,n,t)}return oi=r,oi}var ai,Jc;function l_(){if(Jc)return ai;Jc=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,o=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(o.index=r.index,o.input=r.input),o}return ai=n,ai}var si,eu;function d_(){if(eu)return si;eu=1;var e=jd;function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return si=t,si}var ci,tu;function f_(){if(tu)return ci;tu=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return ci=t,ci}var ui,nu;function h_(){if(nu)return ui;nu=1;var e=us,t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return ui=r,ui}var li,ru;function p_(){if(ru)return li;ru=1;var e=jd,t=d_(),n=f_(),r=h_(),i=rm,o="[object Boolean]",a="[object Date]",s="[object Map]",u="[object Number]",l="[object RegExp]",c="[object Set]",d="[object String]",h="[object Symbol]",f="[object ArrayBuffer]",g="[object DataView]",p="[object Float32Array]",m="[object Float64Array]",v="[object Int8Array]",b="[object Int16Array]",S="[object Int32Array]",w="[object Uint8Array]",A="[object Uint8ClampedArray]",M="[object Uint16Array]",q="[object Uint32Array]";function $(T,D,F){var O=T.constructor;switch(D){case f:return e(T);case o:case a:return new O(+T);case g:return t(T,F);case p:case m:case v:case b:case S:case w:case A:case M:case q:return i(T,F);case s:return new O;case u:case d:return new O(T);case l:return n(T);case c:return new O;case h:return r(T)}}return li=$,li}var di,iu;function g_(){if(iu)return di;iu=1;var e=kn(),t=_r,n="[object Map]";function r(i){return t(i)&&e(i)==n}return di=r,di}var fi,ou;function m_(){if(ou)return fi;ou=1;var e=g_(),t=ls(),n=Qd,r=n&&n.isMap,i=r?t(r):e;return fi=i,fi}var hi,au;function v_(){if(au)return hi;au=1;var e=kn(),t=_r,n="[object Set]";function r(i){return t(i)&&e(i)==n}return hi=r,hi}var pi,su;function y_(){if(su)return pi;su=1;var e=v_(),t=ls(),n=Qd,r=n&&n.isSet,i=r?t(r):e;return pi=i,pi}var gi,cu;function Wh(){if(cu)return gi;cu=1;var e=Jd,t=Ps(),n=ds(),r=o_(),i=a_(),o=im,a=om,s=s_(),u=c_(),l=am(),c=u_(),d=kn(),h=l_(),f=p_(),g=sm,p=Ie(),m=fs,v=m_(),b=Tn,S=y_(),w=Bt(),A=An,M=1,q=2,$=4,T="[object Arguments]",D="[object Array]",F="[object Boolean]",O="[object Date]",C="[object Error]",y="[object Function]",I="[object GeneratorFunction]",_="[object Map]",R="[object Number]",P="[object Object]",x="[object RegExp]",L="[object Set]",k="[object String]",z="[object Symbol]",U="[object WeakMap]",G="[object ArrayBuffer]",Z="[object DataView]",j="[object Float32Array]",ne="[object Float64Array]",H="[object Int8Array]",V="[object Int16Array]",W="[object Int32Array]",se="[object Uint8Array]",oe="[object Uint8ClampedArray]",pe="[object Uint16Array]",ue="[object Uint32Array]",Q={};Q[T]=Q[D]=Q[G]=Q[Z]=Q[F]=Q[O]=Q[j]=Q[ne]=Q[H]=Q[V]=Q[W]=Q[_]=Q[R]=Q[P]=Q[x]=Q[L]=Q[k]=Q[z]=Q[se]=Q[oe]=Q[pe]=Q[ue]=!0,Q[C]=Q[y]=Q[U]=!1;function ie(X,Y,Se,Ve,Ke,Me){var me,Le=Y&M,Ge=Y&q,je=Y&$;if(Se&&(me=Ke?Se(X,Ve,Ke,Me):Se(X)),me!==void 0)return me;if(!b(X))return X;var Qe=p(X);if(Qe){if(me=h(X),!Le)return a(X,me)}else{var De=d(X),it=De==y||De==I;if(m(X))return o(X,Le);if(De==P||De==T||it&&!Ke){if(me=Ge||it?{}:g(X),!Le)return Ge?u(X,i(me,X)):s(X,r(me,X))}else{if(!Q[De])return Ke?X:{};me=f(X,De,Le)}}Me||(Me=new e);var we=Me.get(X);if(we)return we;Me.set(X,me),S(X)?X.forEach(function(Ne){me.add(ie(Ne,Y,Se,Ne,X,Me))}):v(X)&&X.forEach(function(Ne,ke){me.set(ke,ie(Ne,Y,Se,ke,X,Me))});var Ae=je?Ge?c:l:Ge?A:w,Je=Qe?void 0:Ae(X);return t(Je||X,function(Ne,ke){Je&&(ke=Ne,Ne=X[ke]),n(me,ke,ie(Ne,Y,Se,ke,X,Me))}),me}return gi=ie,gi}var mi,uu;function w_(){if(uu)return mi;uu=1;var e=Wh(),t=4;function n(r){return e(r,t)}return mi=n,mi}var vi,lu;function Fs(){if(lu)return vi;lu=1;var e=ef,t=Bt();function n(r,i){return r&&e(r,i,t)}return vi=n,vi}var yi,du;function b_(){if(du)return yi;du=1;var e=Rn;function t(n,r){return function(i,o){if(i==null)return i;if(!e(i))return n(i,o);for(var a=i.length,s=r?a:-1,u=Object(i);(r?s--:++s<a)&&o(u[s],s,u)!==!1;);return i}}return yi=t,yi}var wi,fu;function kr(){if(fu)return wi;fu=1;var e=Fs(),t=b_(),n=t(e);return wi=n,wi}var bi,hu;function Zh(){if(hu)return bi;hu=1;var e=Ln;function t(n){return typeof n=="function"?n:e}return bi=t,bi}var _i,pu;function Xh(){if(pu)return _i;pu=1;var e=Ps(),t=kr(),n=Zh(),r=Ie();function i(o,a){var s=r(o)?e:t;return s(o,n(a))}return _i=i,_i}var xi,gu;function Kh(){return gu||(gu=1,xi=Xh()),xi}var Ei,mu;function __(){if(mu)return Ei;mu=1;var e=kr();function t(n,r){var i=[];return e(n,function(o,a,s){r(o,a,s)&&i.push(o)}),i}return Ei=t,Ei}var Si,vu;function x_(){if(vu)return Si;vu=1;var e=Jd,t=tf,n=1,r=2;function i(o,a,s,u){var l=s.length,c=l,d=!u;if(o==null)return!c;for(o=Object(o);l--;){var h=s[l];if(d&&h[2]?h[1]!==o[h[0]]:!(h[0]in o))return!1}for(;++l<c;){h=s[l];var f=h[0],g=o[f],p=h[1];if(d&&h[2]){if(g===void 0&&!(f in o))return!1}else{var m=new e;if(u)var v=u(g,p,f,o,a,m);if(!(v===void 0?t(p,g,n|r,u,m):v))return!1}}return!0}return Si=i,Si}var Ni,yu;function jh(){if(yu)return Ni;yu=1;var e=Tn;function t(n){return n===n&&!e(n)}return Ni=t,Ni}var Ci,wu;function E_(){if(wu)return Ci;wu=1;var e=jh(),t=Bt();function n(r){for(var i=t(r),o=i.length;o--;){var a=i[o],s=r[a];i[o]=[a,s,e(s)]}return i}return Ci=n,Ci}var Ii,bu;function Qh(){if(bu)return Ii;bu=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return Ii=e,Ii}var Mi,_u;function S_(){if(_u)return Mi;_u=1;var e=x_(),t=E_(),n=Qh();function r(i){var o=t(i);return o.length==1&&o[0][2]?n(o[0][0],o[0][1]):function(a){return a===i||e(a,i,o)}}return Mi=r,Mi}var Ai,xu;function rn(){if(xu)return Ai;xu=1;var e=nf,t=_r,n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return Ai=r,Ai}var ki,Eu;function Ds(){if(Eu)return ki;Eu=1;var e=Ie(),t=rn(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,a){if(e(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||t(o)?!0:r.test(o)||!n.test(o)||a!=null&&o in Object(a)}return ki=i,ki}var Ti,Su;function N_(){if(Su)return Ti;Su=1;var e=cm,t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],u=o.cache;if(u.has(s))return u.get(s);var l=r.apply(this,a);return o.cache=u.set(s,l)||u,l};return o.cache=new(n.Cache||e),o}return n.Cache=e,Ti=n,Ti}var Ri,Nu;function C_(){if(Nu)return Ri;Nu=1;var e=N_(),t=500;function n(r){var i=e(r,function(a){return o.size===t&&o.clear(),a}),o=i.cache;return i}return Ri=n,Ri}var Li,Cu;function I_(){if(Cu)return Li;Cu=1;var e=C_(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(t,function(a,s,u,l){o.push(u?l.replace(n,"$1"):s||a)}),o});return Li=r,Li}var qi,Iu;function Tr(){if(Iu)return qi;Iu=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,o=Array(i);++r<i;)o[r]=n(t[r],r,t);return o}return qi=e,qi}var $i,Mu;function M_(){if(Mu)return $i;Mu=1;var e=us,t=Tr(),n=Ie(),r=rn(),i=1/0,o=e?e.prototype:void 0,a=o?o.toString:void 0;function s(u){if(typeof u=="string")return u;if(n(u))return t(u,s)+"";if(r(u))return a?a.call(u):"";var l=u+"";return l=="0"&&1/u==-i?"-0":l}return $i=s,$i}var Pi,Au;function Jh(){if(Au)return Pi;Au=1;var e=M_();function t(n){return n==null?"":e(n)}return Pi=t,Pi}var Fi,ku;function Rr(){if(ku)return Fi;ku=1;var e=Ie(),t=Ds(),n=I_(),r=Jh();function i(o,a){return e(o)?o:t(o,a)?[o]:n(r(o))}return Fi=i,Fi}var Di,Tu;function Fn(){if(Tu)return Di;Tu=1;var e=rn(),t=1/0;function n(r){if(typeof r=="string"||e(r))return r;var i=r+"";return i=="0"&&1/r==-t?"-0":i}return Di=n,Di}var Oi,Ru;function Lr(){if(Ru)return Oi;Ru=1;var e=Rr(),t=Fn();function n(r,i){i=e(i,r);for(var o=0,a=i.length;r!=null&&o<a;)r=r[t(i[o++])];return o&&o==a?r:void 0}return Oi=n,Oi}var zi,Lu;function A_(){if(Lu)return zi;Lu=1;var e=Lr();function t(n,r,i){var o=n==null?void 0:e(n,r);return o===void 0?i:o}return zi=t,zi}var Hi,qu;function k_(){if(qu)return Hi;qu=1;function e(t,n){return t!=null&&n in Object(t)}return Hi=e,Hi}var Bi,$u;function ep(){if($u)return Bi;$u=1;var e=Rr(),t=hs,n=Ie(),r=rf,i=um,o=Fn();function a(s,u,l){u=e(u,s);for(var c=-1,d=u.length,h=!1;++c<d;){var f=o(u[c]);if(!(h=s!=null&&l(s,f)))break;s=s[f]}return h||++c!=d?h:(d=s==null?0:s.length,!!d&&i(d)&&r(f,d)&&(n(s)||t(s)))}return Bi=a,Bi}var Vi,Pu;function tp(){if(Pu)return Vi;Pu=1;var e=k_(),t=ep();function n(r,i){return r!=null&&t(r,i,e)}return Vi=n,Vi}var Gi,Fu;function T_(){if(Fu)return Gi;Fu=1;var e=tf,t=A_(),n=tp(),r=Ds(),i=jh(),o=Qh(),a=Fn(),s=1,u=2;function l(c,d){return r(c)&&i(d)?o(a(c),d):function(h){var f=t(h,c);return f===void 0&&f===d?n(h,c):e(d,f,s|u)}}return Gi=l,Gi}var Ui,Du;function np(){if(Du)return Ui;Du=1;function e(t){return function(n){return n?.[t]}}return Ui=e,Ui}var Yi,Ou;function R_(){if(Ou)return Yi;Ou=1;var e=Lr();function t(n){return function(r){return e(r,n)}}return Yi=t,Yi}var Wi,zu;function L_(){if(zu)return Wi;zu=1;var e=np(),t=R_(),n=Ds(),r=Fn();function i(o){return n(o)?e(r(o)):t(o)}return Wi=i,Wi}var Zi,Hu;function gt(){if(Hu)return Zi;Hu=1;var e=S_(),t=T_(),n=Ln,r=Ie(),i=L_();function o(a){return typeof a=="function"?a:a==null?n:typeof a=="object"?r(a)?t(a[0],a[1]):e(a):i(a)}return Zi=o,Zi}var Xi,Bu;function rp(){if(Bu)return Xi;Bu=1;var e=lm(),t=__(),n=gt(),r=Ie();function i(o,a){var s=r(o)?e:t;return s(o,n(a,3))}return Xi=i,Xi}var Ki,Vu;function q_(){if(Vu)return Ki;Vu=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Ki=n,Ki}var ji,Gu;function ip(){if(Gu)return ji;Gu=1;var e=q_(),t=ep();function n(r,i){return r!=null&&t(r,i,e)}return ji=n,ji}var Qi,Uu;function $_(){if(Uu)return Qi;Uu=1;var e=of(),t=kn(),n=hs,r=Ie(),i=Rn,o=fs,a=dm,s=af,u="[object Map]",l="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function h(f){if(f==null)return!0;if(i(f)&&(r(f)||typeof f=="string"||typeof f.splice=="function"||o(f)||s(f)||n(f)))return!f.length;var g=t(f);if(g==u||g==l)return!f.size;if(a(f))return!e(f).length;for(var p in f)if(d.call(f,p))return!1;return!0}return Qi=h,Qi}var Ji,Yu;function op(){if(Yu)return Ji;Yu=1;function e(t){return t===void 0}return Ji=e,Ji}var eo,Wu;function ap(){if(Wu)return eo;Wu=1;var e=kr(),t=Rn;function n(r,i){var o=-1,a=t(r)?Array(r.length):[];return e(r,function(s,u,l){a[++o]=i(s,u,l)}),a}return eo=n,eo}var to,Zu;function sp(){if(Zu)return to;Zu=1;var e=Tr(),t=gt(),n=ap(),r=Ie();function i(o,a){var s=r(o)?e:n;return s(o,t(a,3))}return to=i,to}var no,Xu;function P_(){if(Xu)return no;Xu=1;function e(t,n,r,i){var o=-1,a=t==null?0:t.length;for(i&&a&&(r=t[++o]);++o<a;)r=n(r,t[o],o,t);return r}return no=e,no}var ro,Ku;function F_(){if(Ku)return ro;Ku=1;function e(t,n,r,i,o){return o(t,function(a,s,u){r=i?(i=!1,a):n(r,a,s,u)}),r}return ro=e,ro}var io,ju;function cp(){if(ju)return io;ju=1;var e=P_(),t=kr(),n=gt(),r=F_(),i=Ie();function o(a,s,u){var l=i(a)?e:r,c=arguments.length<3;return l(a,n(s,4),u,c,t)}return io=o,io}var oo,Qu;function D_(){if(Qu)return oo;Qu=1;var e=nf,t=Ie(),n=_r,r="[object String]";function i(o){return typeof o=="string"||!t(o)&&n(o)&&e(o)==r}return oo=i,oo}var ao,Ju;function O_(){if(Ju)return ao;Ju=1;var e=np(),t=e("length");return ao=t,ao}var so,el;function z_(){if(el)return so;el=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,o="\\ufe0e\\ufe0f",a="\\u200d",s=RegExp("["+a+e+i+o+"]");function u(l){return s.test(l)}return so=u,so}var co,tl;function H_(){if(tl)return co;tl=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,o="\\ufe0e\\ufe0f",a="["+e+"]",s="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+u+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",f="\\u200d",g=l+"?",p="["+o+"]?",m="(?:"+f+"(?:"+[c,d,h].join("|")+")"+p+g+")*",v=p+g+m,b="(?:"+[c+s+"?",s,d,h,a].join("|")+")",S=RegExp(u+"(?="+u+")|"+b+v,"g");function w(A){for(var M=S.lastIndex=0;S.test(A);)++M;return M}return co=w,co}var uo,nl;function B_(){if(nl)return uo;nl=1;var e=O_(),t=z_(),n=H_();function r(i){return t(i)?n(i):e(i)}return uo=r,uo}var lo,rl;function V_(){if(rl)return lo;rl=1;var e=of(),t=kn(),n=Rn,r=D_(),i=B_(),o="[object Map]",a="[object Set]";function s(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var l=t(u);return l==o||l==a?u.size:e(u).length}return lo=s,lo}var fo,il;function G_(){if(il)return fo;il=1;var e=Ps(),t=fm,n=Fs(),r=gt(),i=Kd,o=Ie(),a=fs,s=sf,u=Tn,l=af;function c(d,h,f){var g=o(d),p=g||a(d)||l(d);if(h=r(h,4),f==null){var m=d&&d.constructor;p?f=g?new m:[]:u(d)?f=s(m)?t(i(d)):{}:f={}}return(p?e:n)(d,function(v,b,S){return h(f,v,b,S)}),f}return fo=c,fo}var ho,ol;function U_(){if(ol)return ho;ol=1;var e=us,t=hs,n=Ie(),r=e?e.isConcatSpreadable:void 0;function i(o){return n(o)||t(o)||!!(r&&o&&o[r])}return ho=i,ho}var po,al;function Os(){if(al)return po;al=1;var e=Xd(),t=U_();function n(r,i,o,a,s){var u=-1,l=r.length;for(o||(o=t),s||(s=[]);++u<l;){var c=r[u];i>0&&o(c)?i>1?n(c,i-1,o,a,s):e(s,c):a||(s[s.length]=c)}return s}return po=n,po}var go,sl;function up(){if(sl)return go;sl=1;function e(t,n,r,i){for(var o=t.length,a=r+(i?1:-1);i?a--:++a<o;)if(n(t[a],a,t))return a;return-1}return go=e,go}var mo,cl;function Y_(){if(cl)return mo;cl=1;function e(t){return t!==t}return mo=e,mo}var vo,ul;function W_(){if(ul)return vo;ul=1;function e(t,n,r){for(var i=r-1,o=t.length;++i<o;)if(t[i]===n)return i;return-1}return vo=e,vo}var yo,ll;function Z_(){if(ll)return yo;ll=1;var e=up(),t=Y_(),n=W_();function r(i,o,a){return o===o?n(i,o,a):e(i,t,a)}return yo=r,yo}var wo,dl;function X_(){if(dl)return wo;dl=1;var e=Z_();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return wo=t,wo}var bo,fl;function K_(){if(fl)return bo;fl=1;function e(t,n,r){for(var i=-1,o=t==null?0:t.length;++i<o;)if(r(n,t[i]))return!0;return!1}return bo=e,bo}var _o,hl;function j_(){if(hl)return _o;hl=1;function e(){}return _o=e,_o}var xo,pl;function Q_(){if(pl)return xo;pl=1;var e=hm(),t=j_(),n=cf,r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(o){return new e(o)}:t;return xo=i,xo}var Eo,gl;function J_(){if(gl)return Eo;gl=1;var e=pm,t=X_(),n=K_(),r=gm,i=Q_(),o=cf,a=200;function s(u,l,c){var d=-1,h=t,f=u.length,g=!0,p=[],m=p;if(c)g=!1,h=n;else if(f>=a){var v=l?null:i(u);if(v)return o(v);g=!1,h=r,m=new e}else m=l?[]:p;e:for(;++d<f;){var b=u[d],S=l?l(b):b;if(b=c||b!==0?b:0,g&&S===S){for(var w=m.length;w--;)if(m[w]===S)continue e;l&&m.push(S),p.push(b)}else h(m,S,c)||(m!==p&&m.push(S),p.push(b))}return p}return Eo=s,Eo}var So,ml;function ex(){if(ml)return So;ml=1;var e=Os(),t=ps,n=J_(),r=mm,i=t(function(o){return n(e(o,1,r,!0))});return So=i,So}var No,vl;function tx(){if(vl)return No;vl=1;var e=Tr();function t(n,r){return e(r,function(i){return n[i]})}return No=t,No}var Co,yl;function lp(){if(yl)return Co;yl=1;var e=tx(),t=Bt();function n(r){return r==null?[]:e(r,t(r))}return Co=n,Co}var Io,wl;function Be(){if(wl)return Io;wl=1;var e;if(typeof cs=="function")try{e={clone:w_(),constant:uf(),each:Kh(),filter:rp(),has:ip(),isArray:Ie(),isEmpty:$_(),isFunction:sf,isUndefined:op(),keys:Bt(),map:sp(),reduce:cp(),size:V_(),transform:G_(),union:ex(),values:lp()}}catch{}return e||(e=window._),Io=e,Io}var Mo,bl;function zs(){if(bl)return Mo;bl=1;var e=Be();Mo=i;var t="\0",n="\0",r="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},i.prototype.setNodes=function(c,d){var h=arguments,f=this;return e.each(c,function(g){h.length>1?f.setNode(g,d):f.setNode(g)}),this},i.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var h=function(f){d.removeEdge(d._edgeObjs[f])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(f){d.setParent(f)}),delete this._children[c]),e.each(e.keys(this._in[c]),h),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),h),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var h=d;!e.isUndefined(h);h=this.parent(h))if(h===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},i.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},i.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},i.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},i.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var h=this;e.each(this._nodes,function(p,m){c(m)&&d.setNode(m,p)}),e.each(this._edgeObjs,function(p){d.hasNode(p.v)&&d.hasNode(p.w)&&d.setEdge(p,h.edge(p))});var f={};function g(p){var m=h.parent(p);return m===void 0||d.hasNode(m)?(f[p]=m,m):m in f?f[m]:g(m)}return this._isCompound&&e.each(d.nodes(),function(p){d.setParent(p,g(p))}),d},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,d){var h=this,f=arguments;return e.reduce(c,function(g,p){return f.length>1?h.setEdge(g,p,d):h.setEdge(g,p),p}),this},i.prototype.setEdge=function(){var c,d,h,f,g=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,d=p.w,h=p.name,arguments.length===2&&(f=arguments[1],g=!0)):(c=p,d=arguments[1],h=arguments[3],arguments.length>2&&(f=arguments[2],g=!0)),c=""+c,d=""+d,e.isUndefined(h)||(h=""+h);var m=s(this._isDirected,c,d,h);if(e.has(this._edgeLabels,m))return g&&(this._edgeLabels[m]=f),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[m]=g?f:this._defaultEdgeLabelFn(c,d,h);var v=u(this._isDirected,c,d,h);return c=v.v,d=v.w,Object.freeze(v),this._edgeObjs[m]=v,o(this._preds[d],c),o(this._sucs[c],d),this._in[d][m]=v,this._out[c][m]=v,this._edgeCount++,this},i.prototype.edge=function(c,d,h){var f=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,h);return this._edgeLabels[f]},i.prototype.hasEdge=function(c,d,h){var f=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,h);return e.has(this._edgeLabels,f)},i.prototype.removeEdge=function(c,d,h){var f=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,h),g=this._edgeObjs[f];return g&&(c=g.v,d=g.w,delete this._edgeLabels[f],delete this._edgeObjs[f],a(this._preds[d],c),a(this._sucs[c],d),delete this._in[d][f],delete this._out[c][f],this._edgeCount--),this},i.prototype.inEdges=function(c,d){var h=this._in[c];if(h){var f=e.values(h);return d?e.filter(f,function(g){return g.v===d}):f}},i.prototype.outEdges=function(c,d){var h=this._out[c];if(h){var f=e.values(h);return d?e.filter(f,function(g){return g.w===d}):f}},i.prototype.nodeEdges=function(c,d){var h=this.inEdges(c,d);if(h)return h.concat(this.outEdges(c,d))};function o(c,d){c[d]?c[d]++:c[d]=1}function a(c,d){--c[d]||delete c[d]}function s(c,d,h,f){var g=""+d,p=""+h;if(!c&&g>p){var m=g;g=p,p=m}return g+r+p+r+(e.isUndefined(f)?t:f)}function u(c,d,h,f){var g=""+d,p=""+h;if(!c&&g>p){var m=g;g=p,p=m}var v={v:g,w:p};return f&&(v.name=f),v}function l(c,d){return s(c,d.v,d.w,d.name)}return Mo}var Ao,_l;function nx(){return _l||(_l=1,Ao="2.1.8"),Ao}var ko,xl;function rx(){return xl||(xl=1,ko={Graph:zs(),version:nx()}),ko}var To,El;function ix(){if(El)return To;El=1;var e=Be(),t=zs();To={write:n,read:o};function n(a){var s={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:r(a),edges:i(a)};return e.isUndefined(a.graph())||(s.value=e.clone(a.graph())),s}function r(a){return e.map(a.nodes(),function(s){var u=a.node(s),l=a.parent(s),c={v:s};return e.isUndefined(u)||(c.value=u),e.isUndefined(l)||(c.parent=l),c})}function i(a){return e.map(a.edges(),function(s){var u=a.edge(s),l={v:s.v,w:s.w};return e.isUndefined(s.name)||(l.name=s.name),e.isUndefined(u)||(l.value=u),l})}function o(a){var s=new t(a.options).setGraph(a.value);return e.each(a.nodes,function(u){s.setNode(u.v,u.value),u.parent&&s.setParent(u.v,u.parent)}),e.each(a.edges,function(u){s.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),s}return To}var Ro,Sl;function ox(){if(Sl)return Ro;Sl=1;var e=Be();Ro=t;function t(n){var r={},i=[],o;function a(s){e.has(r,s)||(r[s]=!0,o.push(s),e.each(n.successors(s),a),e.each(n.predecessors(s),a))}return e.each(n.nodes(),function(s){o=[],a(s),o.length&&i.push(o)}),i}return Ro}var Lo,Nl;function dp(){if(Nl)return Lo;Nl=1;var e=Be();Lo=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var o=this._arr,a=o.length;return i[n]=a,o.push({key:n,priority:r}),this._decrease(a),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,o=i+1,a=n;i<r.length&&(a=r[i].priority<r[a].priority?i:a,o<r.length&&(a=r[o].priority<r[a].priority?o:a),a!==n&&(this._swap(n,a),this._heapify(a)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,o;n!==0&&(o=n>>1,!(r[o].priority<i));)this._swap(n,o),n=o},t.prototype._swap=function(n,r){var i=this._arr,o=this._keyIndices,a=i[n],s=i[r];i[n]=s,i[r]=a,o[s.key]=n,o[a.key]=r},Lo}var qo,Cl;function fp(){if(Cl)return qo;Cl=1;var e=Be(),t=dp();qo=r;var n=e.constant(1);function r(o,a,s,u){return i(o,String(a),s||n,u||function(l){return o.outEdges(l)})}function i(o,a,s,u){var l={},c=new t,d,h,f=function(g){var p=g.v!==d?g.v:g.w,m=l[p],v=s(g),b=h.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+v);b<m.distance&&(m.distance=b,m.predecessor=d,c.decrease(p,b))};for(o.nodes().forEach(function(g){var p=g===a?0:Number.POSITIVE_INFINITY;l[g]={distance:p},c.add(g,p)});c.size()>0&&(d=c.removeMin(),h=l[d],h.distance!==Number.POSITIVE_INFINITY);)u(d).forEach(f);return l}return qo}var $o,Il;function ax(){if(Il)return $o;Il=1;var e=fp(),t=Be();$o=n;function n(r,i,o){return t.transform(r.nodes(),function(a,s){a[s]=e(r,s,i,o)},{})}return $o}var Po,Ml;function hp(){if(Ml)return Po;Ml=1;var e=Be();Po=t;function t(n){var r=0,i=[],o={},a=[];function s(u){var l=o[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(h){e.has(o,h)?o[h].onStack&&(l.lowlink=Math.min(l.lowlink,o[h].index)):(s(h),l.lowlink=Math.min(l.lowlink,o[h].lowlink))}),l.lowlink===l.index){var c=[],d;do d=i.pop(),o[d].onStack=!1,c.push(d);while(u!==d);a.push(c)}}return n.nodes().forEach(function(u){e.has(o,u)||s(u)}),a}return Po}var Fo,Al;function sx(){if(Al)return Fo;Al=1;var e=Be(),t=hp();Fo=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Fo}var Do,kl;function cx(){if(kl)return Do;kl=1;var e=Be();Do=n;var t=e.constant(1);function n(i,o,a){return r(i,o||t,a||function(s){return i.outEdges(s)})}function r(i,o,a){var s={},u=i.nodes();return u.forEach(function(l){s[l]={},s[l][l]={distance:0},u.forEach(function(c){l!==c&&(s[l][c]={distance:Number.POSITIVE_INFINITY})}),a(l).forEach(function(c){var d=c.v===l?c.w:c.v,h=o(c);s[l][d]={distance:h,predecessor:l}})}),u.forEach(function(l){var c=s[l];u.forEach(function(d){var h=s[d];u.forEach(function(f){var g=h[l],p=c[f],m=h[f],v=g.distance+p.distance;v<m.distance&&(m.distance=v,m.predecessor=p.predecessor)})})}),s}return Do}var Oo,Tl;function pp(){if(Tl)return Oo;Tl=1;var e=Be();Oo=t,t.CycleException=n;function t(r){var i={},o={},a=[];function s(u){if(e.has(o,u))throw new n;e.has(i,u)||(o[u]=!0,i[u]=!0,e.each(r.predecessors(u),s),delete o[u],a.push(u))}if(e.each(r.sinks(),s),e.size(i)!==r.nodeCount())throw new n;return a}function n(){}return n.prototype=new Error,Oo}var zo,Rl;function ux(){if(Rl)return zo;Rl=1;var e=pp();zo=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return zo}var Ho,Ll;function gp(){if(Ll)return Ho;Ll=1;var e=Be();Ho=t;function t(r,i,o){e.isArray(i)||(i=[i]);var a=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],u={};return e.each(i,function(l){if(!r.hasNode(l))throw new Error("Graph does not have node: "+l);n(r,l,o==="post",u,a,s)}),s}function n(r,i,o,a,s,u){e.has(a,i)||(a[i]=!0,o||u.push(i),e.each(s(i),function(l){n(r,l,o,a,s,u)}),o&&u.push(i))}return Ho}var Bo,ql;function lx(){if(ql)return Bo;ql=1;var e=gp();Bo=t;function t(n,r){return e(n,r,"post")}return Bo}var Vo,$l;function dx(){if($l)return Vo;$l=1;var e=gp();Vo=t;function t(n,r){return e(n,r,"pre")}return Vo}var Go,Pl;function fx(){if(Pl)return Go;Pl=1;var e=Be(),t=zs(),n=dp();Go=r;function r(i,o){var a=new t,s={},u=new n,l;function c(h){var f=h.v===l?h.w:h.v,g=u.priority(f);if(g!==void 0){var p=o(h);p<g&&(s[f]=l,u.decrease(f,p))}}if(i.nodeCount()===0)return a;e.each(i.nodes(),function(h){u.add(h,Number.POSITIVE_INFINITY),a.setNode(h)}),u.decrease(i.nodes()[0],0);for(var d=!1;u.size()>0;){if(l=u.removeMin(),e.has(s,l))a.setEdge(l,s[l]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(l).forEach(c)}return a}return Go}var Uo,Fl;function hx(){return Fl||(Fl=1,Uo={components:ox(),dijkstra:fp(),dijkstraAll:ax(),findCycles:sx(),floydWarshall:cx(),isAcyclic:ux(),postorder:lx(),preorder:dx(),prim:fx(),tarjan:hp(),topsort:pp()}),Uo}var Yo,Dl;function px(){if(Dl)return Yo;Dl=1;var e=rx();return Yo={Graph:e.Graph,json:ix(),alg:hx(),version:e.version},Yo}var fr;if(typeof cs=="function")try{fr=px()}catch{}fr||(fr=window.graphlib);var Xe=fr,Wo,Ol;function gx(){if(Ol)return Wo;Ol=1;var e=Wh(),t=1,n=4;function r(i){return e(i,t|n)}return Wo=r,Wo}var Zo,zl;function mx(){if(zl)return Zo;zl=1;var e=ps,t=vm(),n=gs,r=An,i=Object.prototype,o=i.hasOwnProperty,a=e(function(s,u){s=Object(s);var l=-1,c=u.length,d=c>2?u[2]:void 0;for(d&&n(u[0],u[1],d)&&(c=1);++l<c;)for(var h=u[l],f=r(h),g=-1,p=f.length;++g<p;){var m=f[g],v=s[m];(v===void 0||t(v,i[m])&&!o.call(s,m))&&(s[m]=h[m])}return s});return Zo=a,Zo}var Xo,Hl;function vx(){if(Hl)return Xo;Hl=1;var e=gt(),t=Rn,n=Bt();function r(i){return function(o,a,s){var u=Object(o);if(!t(o)){var l=e(a,3);o=n(o),a=function(d){return l(u[d],d,u)}}var c=i(o,a,s);return c>-1?u[l?o[c]:c]:void 0}}return Xo=r,Xo}var Ko,Bl;function yx(){if(Bl)return Ko;Bl=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Ko=t,Ko}var jo,Vl;function wx(){if(Vl)return jo;Vl=1;var e=yx(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return jo=n,jo}var Qo,Gl;function bx(){if(Gl)return Qo;Gl=1;var e=wx(),t=Tn,n=rn(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(n(l))return r;if(t(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=t(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=e(l);var d=o.test(l);return d||a.test(l)?s(l.slice(2),d?2:8):i.test(l)?r:+l}return Qo=u,Qo}var Jo,Ul;function mp(){if(Ul)return Jo;Ul=1;var e=bx(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var o=i<0?-1:1;return o*n}return i===i?i:0}return Jo=r,Jo}var ea,Yl;function _x(){if(Yl)return ea;Yl=1;var e=mp();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return ea=t,ea}var ta,Wl;function xx(){if(Wl)return ta;Wl=1;var e=up(),t=gt(),n=_x(),r=Math.max;function i(o,a,s){var u=o==null?0:o.length;if(!u)return-1;var l=s==null?0:n(s);return l<0&&(l=r(u+l,0)),e(o,t(a,3),l)}return ta=i,ta}var na,Zl;function Ex(){if(Zl)return na;Zl=1;var e=vx(),t=xx(),n=e(t);return na=n,na}var ra,Xl;function vp(){if(Xl)return ra;Xl=1;var e=Os();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return ra=t,ra}var ia,Kl;function Sx(){if(Kl)return ia;Kl=1;var e=ef,t=Zh(),n=An;function r(i,o){return i==null?i:e(i,t(o),n)}return ia=r,ia}var oa,jl;function Nx(){if(jl)return oa;jl=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return oa=e,oa}var aa,Ql;function Cx(){if(Ql)return aa;Ql=1;var e=ym(),t=Fs(),n=gt();function r(i,o){var a={};return o=n(o,3),t(i,function(s,u,l){e(a,u,o(s,u,l))}),a}return aa=r,aa}var sa,Jl;function Hs(){if(Jl)return sa;Jl=1;var e=rn();function t(n,r,i){for(var o=-1,a=n.length;++o<a;){var s=n[o],u=r(s);if(u!=null&&(l===void 0?u===u&&!e(u):i(u,l)))var l=u,c=s}return c}return sa=t,sa}var ca,ed;function Ix(){if(ed)return ca;ed=1;function e(t,n){return t>n}return ca=e,ca}var ua,td;function Mx(){if(td)return ua;td=1;var e=Hs(),t=Ix(),n=Ln;function r(i){return i&&i.length?e(i,n,t):void 0}return ua=r,ua}var la,nd;function Ax(){if(nd)return la;nd=1;var e=bm,t=wm,n=t(function(r,i,o){e(r,i,o)});return la=n,la}var da,rd;function yp(){if(rd)return da;rd=1;function e(t,n){return t<n}return da=e,da}var fa,id;function kx(){if(id)return fa;id=1;var e=Hs(),t=yp(),n=Ln;function r(i){return i&&i.length?e(i,n,t):void 0}return fa=r,fa}var ha,od;function Tx(){if(od)return ha;od=1;var e=Hs(),t=gt(),n=yp();function r(i,o){return i&&i.length?e(i,t(o,2),n):void 0}return ha=r,ha}var pa,ad;function Rx(){if(ad)return pa;ad=1;var e=_m(),t=function(){return e.Date.now()};return pa=t,pa}var ga,sd;function Lx(){if(sd)return ga;sd=1;var e=ds(),t=Rr(),n=rf,r=Tn,i=Fn();function o(a,s,u,l){if(!r(a))return a;s=t(s,a);for(var c=-1,d=s.length,h=d-1,f=a;f!=null&&++c<d;){var g=i(s[c]),p=u;if(g==="__proto__"||g==="constructor"||g==="prototype")return a;if(c!=h){var m=f[g];p=l?l(m,g,f):void 0,p===void 0&&(p=r(m)?m:n(s[c+1])?[]:{})}e(f,g,p),f=f[g]}return a}return ga=o,ga}var ma,cd;function qx(){if(cd)return ma;cd=1;var e=Lr(),t=Lx(),n=Rr();function r(i,o,a){for(var s=-1,u=o.length,l={};++s<u;){var c=o[s],d=e(i,c);a(d,c)&&t(l,n(c,i),d)}return l}return ma=r,ma}var va,ud;function $x(){if(ud)return va;ud=1;var e=qx(),t=tp();function n(r,i){return e(r,i,function(o,a){return t(r,a)})}return va=n,va}var ya,ld;function Px(){if(ld)return ya;ld=1;var e=vp(),t=xm,n=Em;function r(i){return n(t(i,void 0,e),i+"")}return ya=r,ya}var wa,dd;function Fx(){if(dd)return wa;dd=1;var e=$x(),t=Px(),n=t(function(r,i){return r==null?{}:e(r,i)});return wa=n,wa}var ba,fd;function Dx(){if(fd)return ba;fd=1;var e=Math.ceil,t=Math.max;function n(r,i,o,a){for(var s=-1,u=t(e((i-r)/(o||1)),0),l=Array(u);u--;)l[a?u:++s]=r,r+=o;return l}return ba=n,ba}var _a,hd;function Ox(){if(hd)return _a;hd=1;var e=Dx(),t=gs,n=mp();function r(i){return function(o,a,s){return s&&typeof s!="number"&&t(o,a,s)&&(a=s=void 0),o=n(o),a===void 0?(a=o,o=0):a=n(a),s=s===void 0?o<a?1:-1:n(s),e(o,a,s,i)}}return _a=r,_a}var xa,pd;function zx(){if(pd)return xa;pd=1;var e=Ox(),t=e();return xa=t,xa}var Ea,gd;function Hx(){if(gd)return Ea;gd=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Ea=e,Ea}var Sa,md;function Bx(){if(md)return Sa;md=1;var e=rn();function t(n,r){if(n!==r){var i=n!==void 0,o=n===null,a=n===n,s=e(n),u=r!==void 0,l=r===null,c=r===r,d=e(r);if(!l&&!d&&!s&&n>r||s&&u&&c&&!l&&!d||o&&u&&c||!i&&c||!a)return 1;if(!o&&!s&&!d&&n<r||d&&i&&a&&!o&&!s||l&&i&&a||!u&&a||!c)return-1}return 0}return Sa=t,Sa}var Na,vd;function Vx(){if(vd)return Na;vd=1;var e=Bx();function t(n,r,i){for(var o=-1,a=n.criteria,s=r.criteria,u=a.length,l=i.length;++o<u;){var c=e(a[o],s[o]);if(c){if(o>=l)return c;var d=i[o];return c*(d=="desc"?-1:1)}}return n.index-r.index}return Na=t,Na}var Ca,yd;function Gx(){if(yd)return Ca;yd=1;var e=Tr(),t=Lr(),n=gt(),r=ap(),i=Hx(),o=ls(),a=Vx(),s=Ln,u=Ie();function l(c,d,h){d.length?d=e(d,function(p){return u(p)?function(m){return t(m,p.length===1?p[0]:p)}:p}):d=[s];var f=-1;d=e(d,o(n));var g=r(c,function(p,m,v){var b=e(d,function(S){return S(p)});return{criteria:b,index:++f,value:p}});return i(g,function(p,m){return a(p,m,h)})}return Ca=l,Ca}var Ia,wd;function Ux(){if(wd)return Ia;wd=1;var e=Os(),t=Gx(),n=ps,r=gs,i=n(function(o,a){if(o==null)return[];var s=a.length;return s>1&&r(o,a[0],a[1])?a=[]:s>2&&r(a[0],a[1],a[2])&&(a=[a[0]]),t(o,e(a,1),[])});return Ia=i,Ia}var Ma,bd;function Yx(){if(bd)return Ma;bd=1;var e=Jh(),t=0;function n(r){var i=++t;return e(r)+i}return Ma=n,Ma}var Aa,_d;function Wx(){if(_d)return Aa;_d=1;function e(t,n,r){for(var i=-1,o=t.length,a=n.length,s={};++i<o;){var u=i<a?n[i]:void 0;r(s,t[i],u)}return s}return Aa=e,Aa}var ka,xd;function Zx(){if(xd)return ka;xd=1;var e=ds(),t=Wx();function n(r,i){return t(r||[],i||[],e)}return ka=n,ka}var hr;if(typeof cs=="function")try{hr={cloneDeep:gx(),constant:uf(),defaults:mx(),each:Kh(),filter:rp(),find:Ex(),flatten:vp(),forEach:Xh(),forIn:Sx(),has:ip(),isUndefined:op(),last:Nx(),map:sp(),mapValues:Cx(),max:Mx(),merge:Ax(),min:kx(),minBy:Tx(),now:Rx(),pick:Fx(),range:zx(),reduce:cp(),sortBy:Ux(),uniqueId:Yx(),values:lp(),zipObject:Zx()}}catch{}hr||(hr=window._);var ge=hr,Xx=qr;function qr(){var e={};e._next=e._prev=e,this._sentinel=e}qr.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return wp(t),t};qr.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&wp(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};qr.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,Kx)),n=n._prev;return"["+e.join(", ")+"]"};function wp(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Kx(e,t){if(e!=="_next"&&e!=="_prev")return t}var ct=ge,jx=Xe.Graph,Qx=Xx,Jx=tE,eE=ct.constant(1);function tE(e,t){if(e.nodeCount()<=1)return[];var n=rE(e,t||eE),r=nE(n.graph,n.buckets,n.zeroIdx);return ct.flatten(ct.map(r,function(i){return e.outEdges(i.v,i.w)}),!0)}function nE(e,t,n){for(var r=[],i=t[t.length-1],o=t[0],a;e.nodeCount();){for(;a=o.dequeue();)Ta(e,t,n,a);for(;a=i.dequeue();)Ta(e,t,n,a);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(a=t[s].dequeue(),a){r=r.concat(Ta(e,t,n,a,!0));break}}}return r}function Ta(e,t,n,r,i){var o=i?[]:void 0;return ct.forEach(e.inEdges(r.v),function(a){var s=e.edge(a),u=e.node(a.v);i&&o.push({v:a.v,w:a.w}),u.out-=s,ts(t,n,u)}),ct.forEach(e.outEdges(r.v),function(a){var s=e.edge(a),u=a.w,l=e.node(u);l.in-=s,ts(t,n,l)}),e.removeNode(r.v),o}function rE(e,t){var n=new jx,r=0,i=0;ct.forEach(e.nodes(),function(s){n.setNode(s,{v:s,in:0,out:0})}),ct.forEach(e.edges(),function(s){var u=n.edge(s.v,s.w)||0,l=t(s),c=u+l;n.setEdge(s.v,s.w,c),i=Math.max(i,n.node(s.v).out+=l),r=Math.max(r,n.node(s.w).in+=l)});var o=ct.range(i+r+3).map(function(){return new Qx}),a=r+1;return ct.forEach(n.nodes(),function(s){ts(o,a,n.node(s))}),{graph:n,buckets:o,zeroIdx:a}}function ts(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var qt=ge,iE=Jx,oE={run:aE,undo:cE};function aE(e){var t=e.graph().acyclicer==="greedy"?iE(e,n(e)):sE(e);qt.forEach(t,function(r){var i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,qt.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function sE(e){var t=[],n={},r={};function i(o){qt.has(r,o)||(r[o]=!0,n[o]=!0,qt.forEach(e.outEdges(o),function(a){qt.has(n,a.w)?t.push(a):i(a.w)}),delete n[o])}return qt.forEach(e.nodes(),i),t}function cE(e){qt.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var ce=ge,bp=Xe.Graph,Re={addDummyNode:_p,simplify:uE,asNonCompoundGraph:lE,successorWeights:dE,predecessorWeights:fE,intersectRect:hE,buildLayerMatrix:pE,normalizeRanks:gE,removeEmptyRanks:mE,addBorderNode:vE,maxRank:xp,partition:yE,time:wE,notime:bE};function _p(e,t,n,r){var i;do i=ce.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function uE(e){var t=new bp().setGraph(e.graph());return ce.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),ce.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function lE(e){var t=new bp({multigraph:e.isMultigraph()}).setGraph(e.graph());return ce.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),ce.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function dE(e){var t=ce.map(e.nodes(),function(n){var r={};return ce.forEach(e.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return ce.zipObject(e.nodes(),t)}function fE(e){var t=ce.map(e.nodes(),function(n){var r={};return ce.forEach(e.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return ce.zipObject(e.nodes(),t)}function hE(e,t){var n=e.x,r=e.y,i=t.x-n,o=t.y-r,a=e.width/2,s=e.height/2;if(!i&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var u,l;return Math.abs(o)*a>Math.abs(i)*s?(o<0&&(s=-s),u=s*i/o,l=s):(i<0&&(a=-a),u=a,l=a*o/i),{x:n+u,y:r+l}}function pE(e){var t=ce.map(ce.range(xp(e)+1),function(){return[]});return ce.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;ce.isUndefined(i)||(t[i][r.order]=n)}),t}function gE(e){var t=ce.min(ce.map(e.nodes(),function(n){return e.node(n).rank}));ce.forEach(e.nodes(),function(n){var r=e.node(n);ce.has(r,"rank")&&(r.rank-=t)})}function mE(e){var t=ce.min(ce.map(e.nodes(),function(o){return e.node(o).rank})),n=[];ce.forEach(e.nodes(),function(o){var a=e.node(o).rank-t;n[a]||(n[a]=[]),n[a].push(o)});var r=0,i=e.graph().nodeRankFactor;ce.forEach(n,function(o,a){ce.isUndefined(o)&&a%i!==0?--r:r&&ce.forEach(o,function(s){e.node(s).rank+=r})})}function vE(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),_p(e,"border",i,t)}function xp(e){return ce.max(ce.map(e.nodes(),function(t){var n=e.node(t).rank;if(!ce.isUndefined(n))return n}))}function yE(e,t){var n={lhs:[],rhs:[]};return ce.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function wE(e,t){var n=ce.now();try{return t()}finally{console.log(e+" time: "+(ce.now()-n)+"ms")}}function bE(e,t){return t()}var Ep=ge,_E=Re,xE={run:EE,undo:NE};function EE(e){e.graph().dummyChains=[],Ep.forEach(e.edges(),function(t){SE(e,t)})}function SE(e,t){var n=t.v,r=e.node(n).rank,i=t.w,o=e.node(i).rank,a=t.name,s=e.edge(t),u=s.labelRank;if(o!==r+1){e.removeEdge(t);var l,c,d;for(d=0,++r;r<o;++d,++r)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:t,rank:r},l=_E.addDummyNode(e,"edge",c,"_d"),r===u&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),e.setEdge(n,l,{weight:s.weight},a),d===0&&e.graph().dummyChains.push(l),n=l;e.setEdge(n,i,{weight:s.weight},a)}}function NE(e){Ep.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}var Wn=ge,$r={longestPath:CE,slack:IE};function CE(e){var t={};function n(r){var i=e.node(r);if(Wn.has(t,r))return i.rank;t[r]=!0;var o=Wn.min(Wn.map(e.outEdges(r),function(a){return n(a.w)-e.edge(a).minlen}));return(o===Number.POSITIVE_INFINITY||o===void 0||o===null)&&(o=0),i.rank=o}Wn.forEach(e.sources(),n)}function IE(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var pr=ge,ME=Xe.Graph,gr=$r.slack,Sp=AE;function AE(e){var t=new ME({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,o;kE(t,e)<r;)i=TE(t,e),o=t.hasNode(i.v)?gr(e,i):-gr(e,i),RE(t,e,o);return t}function kE(e,t){function n(r){pr.forEach(t.nodeEdges(r),function(i){var o=i.v,a=r===o?i.w:o;!e.hasNode(a)&&!gr(t,i)&&(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))})}return pr.forEach(e.nodes(),n),e.nodeCount()}function TE(e,t){return pr.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return gr(t,n)})}function RE(e,t,n){pr.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var pt=ge,LE=Sp,qE=$r.slack,$E=$r.longestPath,PE=Xe.alg.preorder,FE=Xe.alg.postorder,DE=Re.simplify,OE=Vt;Vt.initLowLimValues=Vs;Vt.initCutValues=Bs;Vt.calcCutValue=Np;Vt.leaveEdge=Ip;Vt.enterEdge=Mp;Vt.exchangeEdges=Ap;function Vt(e){e=DE(e),$E(e);var t=LE(e);Vs(t),Bs(t,e);for(var n,r;n=Ip(t);)r=Mp(t,e,n),Ap(t,e,n,r)}function Bs(e,t){var n=FE(e,e.nodes());n=n.slice(0,n.length-1),pt.forEach(n,function(r){zE(e,t,r)})}function zE(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=Np(e,t,n)}function Np(e,t,n){var r=e.node(n),i=r.parent,o=!0,a=t.edge(n,i),s=0;return a||(o=!1,a=t.edge(i,n)),s=a.weight,pt.forEach(t.nodeEdges(n),function(u){var l=u.v===n,c=l?u.w:u.v;if(c!==i){var d=l===o,h=t.edge(u).weight;if(s+=d?h:-h,BE(e,n,c)){var f=e.edge(n,c).cutvalue;s+=d?-f:f}}}),s}function Vs(e,t){arguments.length<2&&(t=e.nodes()[0]),Cp(e,{},1,t)}function Cp(e,t,n,r,i){var o=n,a=e.node(r);return t[r]=!0,pt.forEach(e.neighbors(r),function(s){pt.has(t,s)||(n=Cp(e,t,n,s,r))}),a.low=o,a.lim=n++,i?a.parent=i:delete a.parent,n}function Ip(e){return pt.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Mp(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var o=e.node(r),a=e.node(i),s=o,u=!1;o.lim>a.lim&&(s=a,u=!0);var l=pt.filter(t.edges(),function(c){return u===Ed(e,e.node(c.v),s)&&u!==Ed(e,e.node(c.w),s)});return pt.minBy(l,function(c){return qE(t,c)})}function Ap(e,t,n,r){var i=n.v,o=n.w;e.removeEdge(i,o),e.setEdge(r.v,r.w,{}),Vs(e),Bs(e,t),HE(e,t)}function HE(e,t){var n=pt.find(e.nodes(),function(i){return!t.node(i).parent}),r=PE(e,n);r=r.slice(1),pt.forEach(r,function(i){var o=e.node(i).parent,a=t.edge(i,o),s=!1;a||(a=t.edge(o,i),s=!0),t.node(i).rank=t.node(o).rank+(s?a.minlen:-a.minlen)})}function BE(e,t,n){return e.hasEdge(t,n)}function Ed(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var VE=$r,kp=VE.longestPath,GE=Sp,UE=OE,YE=WE;function WE(e){switch(e.graph().ranker){case"network-simplex":Sd(e);break;case"tight-tree":XE(e);break;case"longest-path":ZE(e);break;default:Sd(e)}}var ZE=kp;function XE(e){kp(e),GE(e)}function Sd(e){UE(e)}var ns=ge,KE=jE;function jE(e){var t=JE(e);ns.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,o=QE(e,t,i.v,i.w),a=o.path,s=o.lca,u=0,l=a[u],c=!0;n!==i.w;){if(r=e.node(n),c){for(;(l=a[u])!==s&&e.node(l).maxRank<r.rank;)u++;l===s&&(c=!1)}if(!c){for(;u<a.length-1&&e.node(l=a[u+1]).minRank<=r.rank;)u++;l=a[u]}e.setParent(n,l),n=e.successors(n)[0]}})}function QE(e,t,n,r){var i=[],o=[],a=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),u,l;u=n;do u=e.parent(u),i.push(u);while(u&&(t[u].low>a||s>t[u].lim));for(l=u,u=r;(u=e.parent(u))!==l;)o.push(u);return{path:i.concat(o.reverse()),lca:l}}function JE(e){var t={},n=0;function r(i){var o=n;ns.forEach(e.children(i),r),t[i]={low:o,lim:n++}}return ns.forEach(e.children(),r),t}var ut=ge,rs=Re,eS={run:tS,cleanup:iS};function tS(e){var t=rs.addDummyNode(e,"root",{},"_root"),n=nS(e),r=ut.max(ut.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,ut.forEach(e.edges(),function(a){e.edge(a).minlen*=i});var o=rS(e)+1;ut.forEach(e.children(),function(a){Tp(e,t,i,o,r,n,a)}),e.graph().nodeRankFactor=i}function Tp(e,t,n,r,i,o,a){var s=e.children(a);if(!s.length){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}var u=rs.addBorderNode(e,"_bt"),l=rs.addBorderNode(e,"_bb"),c=e.node(a);e.setParent(u,a),c.borderTop=u,e.setParent(l,a),c.borderBottom=l,ut.forEach(s,function(d){Tp(e,t,n,r,i,o,d);var h=e.node(d),f=h.borderTop?h.borderTop:d,g=h.borderBottom?h.borderBottom:d,p=h.borderTop?r:2*r,m=f!==g?1:i-o[a]+1;e.setEdge(u,f,{weight:p,minlen:m,nestingEdge:!0}),e.setEdge(g,l,{weight:p,minlen:m,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,u,{weight:0,minlen:i+o[a]})}function nS(e){var t={};function n(r,i){var o=e.children(r);o&&o.length&&ut.forEach(o,function(a){n(a,i+1)}),t[r]=i}return ut.forEach(e.children(),function(r){n(r,1)}),t}function rS(e){return ut.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function iS(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,ut.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var Ra=ge,oS=Re,aS=sS;function sS(e){function t(n){var r=e.children(n),i=e.node(n);if(r.length&&Ra.forEach(r,t),Ra.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)Nd(e,"borderLeft","_bl",n,i,o),Nd(e,"borderRight","_br",n,i,o)}}Ra.forEach(e.children(),t)}function Nd(e,t,n,r,i,o){var a={width:0,height:0,rank:o,borderType:t},s=i[t][o-1],u=oS.addDummyNode(e,"border",a,n);i[t][o]=u,e.setParent(u,r),s&&e.setEdge(s,u,{weight:1})}var tt=ge,cS={adjust:uS,undo:lS};function uS(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Rp(e)}function lS(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&dS(e),(t==="lr"||t==="rl")&&(fS(e),Rp(e))}function Rp(e){tt.forEach(e.nodes(),function(t){Cd(e.node(t))}),tt.forEach(e.edges(),function(t){Cd(e.edge(t))})}function Cd(e){var t=e.width;e.width=e.height,e.height=t}function dS(e){tt.forEach(e.nodes(),function(t){La(e.node(t))}),tt.forEach(e.edges(),function(t){var n=e.edge(t);tt.forEach(n.points,La),tt.has(n,"y")&&La(n)})}function La(e){e.y=-e.y}function fS(e){tt.forEach(e.nodes(),function(t){qa(e.node(t))}),tt.forEach(e.edges(),function(t){var n=e.edge(t);tt.forEach(n.points,qa),tt.has(n,"x")&&qa(n)})}function qa(e){var t=e.x;e.x=e.y,e.y=t}var at=ge,hS=pS;function pS(e){var t={},n=at.filter(e.nodes(),function(s){return!e.children(s).length}),r=at.max(at.map(n,function(s){return e.node(s).rank})),i=at.map(at.range(r+1),function(){return[]});function o(s){if(!at.has(t,s)){t[s]=!0;var u=e.node(s);i[u.rank].push(s),at.forEach(e.successors(s),o)}}var a=at.sortBy(n,function(s){return e.node(s).rank});return at.forEach(a,o),i}var vt=ge,gS=mS;function mS(e,t){for(var n=0,r=1;r<t.length;++r)n+=vS(e,t[r-1],t[r]);return n}function vS(e,t,n){for(var r=vt.zipObject(n,vt.map(n,function(l,c){return c})),i=vt.flatten(vt.map(t,function(l){return vt.sortBy(vt.map(e.outEdges(l),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),o=1;o<n.length;)o<<=1;var a=2*o-1;o-=1;var s=vt.map(new Array(a),function(){return 0}),u=0;return vt.forEach(i.forEach(function(l){var c=l.pos+o;s[c]+=l.weight;for(var d=0;c>0;)c%2&&(d+=s[c+1]),c=c-1>>1,s[c]+=l.weight;u+=l.weight*d})),u}var Id=ge,yS=wS;function wS(e,t){return Id.map(t,function(n){var r=e.inEdges(n);if(r.length){var i=Id.reduce(r,function(o,a){var s=e.edge(a),u=e.node(a.v);return{sum:o.sum+s.weight*u.order,weight:o.weight+s.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var qe=ge,bS=_S;function _S(e,t){var n={};qe.forEach(e,function(i,o){var a=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:o};qe.isUndefined(i.barycenter)||(a.barycenter=i.barycenter,a.weight=i.weight)}),qe.forEach(t.edges(),function(i){var o=n[i.v],a=n[i.w];!qe.isUndefined(o)&&!qe.isUndefined(a)&&(a.indegree++,o.out.push(n[i.w]))});var r=qe.filter(n,function(i){return!i.indegree});return xS(r)}function xS(e){var t=[];function n(o){return function(a){a.merged||(qe.isUndefined(a.barycenter)||qe.isUndefined(o.barycenter)||a.barycenter>=o.barycenter)&&ES(o,a)}}function r(o){return function(a){a.in.push(o),--a.indegree===0&&e.push(a)}}for(;e.length;){var i=e.pop();t.push(i),qe.forEach(i.in.reverse(),n(i)),qe.forEach(i.out,r(i))}return qe.map(qe.filter(t,function(o){return!o.merged}),function(o){return qe.pick(o,["vs","i","barycenter","weight"])})}function ES(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var pn=ge,SS=Re,NS=CS;function CS(e,t){var n=SS.partition(e,function(c){return pn.has(c,"barycenter")}),r=n.lhs,i=pn.sortBy(n.rhs,function(c){return-c.i}),o=[],a=0,s=0,u=0;r.sort(IS(!!t)),u=Md(o,i,u),pn.forEach(r,function(c){u+=c.vs.length,o.push(c.vs),a+=c.barycenter*c.weight,s+=c.weight,u=Md(o,i,u)});var l={vs:pn.flatten(o,!0)};return s&&(l.barycenter=a/s,l.weight=s),l}function Md(e,t,n){for(var r;t.length&&(r=pn.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function IS(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var xt=ge,MS=yS,AS=bS,kS=NS,TS=Lp;function Lp(e,t,n,r){var i=e.children(t),o=e.node(t),a=o?o.borderLeft:void 0,s=o?o.borderRight:void 0,u={};a&&(i=xt.filter(i,function(g){return g!==a&&g!==s}));var l=MS(e,i);xt.forEach(l,function(g){if(e.children(g.v).length){var p=Lp(e,g.v,n,r);u[g.v]=p,xt.has(p,"barycenter")&&LS(g,p)}});var c=AS(l,n);RS(c,u);var d=kS(c,r);if(a&&(d.vs=xt.flatten([a,d.vs,s],!0),e.predecessors(a).length)){var h=e.node(e.predecessors(a)[0]),f=e.node(e.predecessors(s)[0]);xt.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+h.order+f.order)/(d.weight+2),d.weight+=2}return d}function RS(e,t){xt.forEach(e,function(n){n.vs=xt.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function LS(e,t){xt.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var gn=ge,qS=Xe.Graph,$S=PS;function PS(e,t,n){var r=FS(e),i=new qS({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(o){return e.node(o)});return gn.forEach(e.nodes(),function(o){var a=e.node(o),s=e.parent(o);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(i.setNode(o),i.setParent(o,s||r),gn.forEach(e[n](o),function(u){var l=u.v===o?u.w:u.v,c=i.edge(l,o),d=gn.isUndefined(c)?0:c.weight;i.setEdge(l,o,{weight:e.edge(u).weight+d})}),gn.has(a,"minRank")&&i.setNode(o,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),i}function FS(e){for(var t;e.hasNode(t=gn.uniqueId("_root")););return t}var DS=ge,OS=zS;function zS(e,t,n){var r={},i;DS.forEach(n,function(o){for(var a=e.parent(o),s,u;a;){if(s=e.parent(a),s?(u=r[s],r[s]=a):(u=i,i=a),u&&u!==a){t.setEdge(u,a);return}a=s}})}var Nt=ge,HS=hS,BS=gS,VS=TS,GS=$S,US=OS,YS=Xe.Graph,Ad=Re,WS=ZS;function ZS(e){var t=Ad.maxRank(e),n=kd(e,Nt.range(1,t+1),"inEdges"),r=kd(e,Nt.range(t-1,-1,-1),"outEdges"),i=HS(e);Td(e,i);for(var o=Number.POSITIVE_INFINITY,a,s=0,u=0;u<4;++s,++u){XS(s%2?n:r,s%4>=2),i=Ad.buildLayerMatrix(e);var l=BS(e,i);l<o&&(u=0,a=Nt.cloneDeep(i),o=l)}Td(e,a)}function kd(e,t,n){return Nt.map(t,function(r){return GS(e,r,n)})}function XS(e,t){var n=new YS;Nt.forEach(e,function(r){var i=r.graph().root,o=VS(r,i,n,t);Nt.forEach(o.vs,function(a,s){r.node(a).order=s}),US(r,n,o.vs)})}function Td(e,t){Nt.forEach(t,function(n){Nt.forEach(n,function(r,i){e.node(r).order=i})})}var K=ge,KS=Xe.Graph,jS=Re,QS={positionX:t2,findType1Conflicts:qp,findType2Conflicts:$p,addConflict:Gs,hasConflict:Pp,verticalAlignment:Fp,horizontalCompaction:Dp,alignCoordinates:zp,findSmallestWidthAlignment:Op,balance:Hp};function qp(e,t){var n={};function r(i,o){var a=0,s=0,u=i.length,l=K.last(o);return K.forEach(o,function(c,d){var h=JS(e,c),f=h?e.node(h).order:u;(h||c===l)&&(K.forEach(o.slice(s,d+1),function(g){K.forEach(e.predecessors(g),function(p){var m=e.node(p),v=m.order;(v<a||f<v)&&!(m.dummy&&e.node(g).dummy)&&Gs(n,p,g)})}),s=d+1,a=f)}),o}return K.reduce(t,r),n}function $p(e,t){var n={};function r(o,a,s,u,l){var c;K.forEach(K.range(a,s),function(d){c=o[d],e.node(c).dummy&&K.forEach(e.predecessors(c),function(h){var f=e.node(h);f.dummy&&(f.order<u||f.order>l)&&Gs(n,h,c)})})}function i(o,a){var s=-1,u,l=0;return K.forEach(a,function(c,d){if(e.node(c).dummy==="border"){var h=e.predecessors(c);h.length&&(u=e.node(h[0]).order,r(a,l,d,s,u),l=d,s=u)}r(a,l,a.length,u,o.length)}),a}return K.reduce(t,i),n}function JS(e,t){if(e.node(t).dummy)return K.find(e.predecessors(t),function(n){return e.node(n).dummy})}function Gs(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function Pp(e,t,n){if(t>n){var r=t;t=n,n=r}return K.has(e[t],n)}function Fp(e,t,n,r){var i={},o={},a={};return K.forEach(t,function(s){K.forEach(s,function(u,l){i[u]=u,o[u]=u,a[u]=l})}),K.forEach(t,function(s){var u=-1;K.forEach(s,function(l){var c=r(l);if(c.length){c=K.sortBy(c,function(p){return a[p]});for(var d=(c.length-1)/2,h=Math.floor(d),f=Math.ceil(d);h<=f;++h){var g=c[h];o[l]===l&&u<a[g]&&!Pp(n,l,g)&&(o[g]=l,o[l]=i[l]=i[g],u=a[g])}}})}),{root:i,align:o}}function Dp(e,t,n,r,i){var o={},a=e2(e,t,n,i),s=i?"borderLeft":"borderRight";function u(d,h){for(var f=a.nodes(),g=f.pop(),p={};g;)p[g]?d(g):(p[g]=!0,f.push(g),f=f.concat(h(g))),g=f.pop()}function l(d){o[d]=a.inEdges(d).reduce(function(h,f){return Math.max(h,o[f.v]+a.edge(f))},0)}function c(d){var h=a.outEdges(d).reduce(function(g,p){return Math.min(g,o[p.w]-a.edge(p))},Number.POSITIVE_INFINITY),f=e.node(d);h!==Number.POSITIVE_INFINITY&&f.borderType!==s&&(o[d]=Math.max(o[d],h))}return u(l,a.predecessors.bind(a)),u(c,a.successors.bind(a)),K.forEach(r,function(d){o[d]=o[n[d]]}),o}function e2(e,t,n,r){var i=new KS,o=e.graph(),a=n2(o.nodesep,o.edgesep,r);return K.forEach(t,function(s){var u;K.forEach(s,function(l){var c=n[l];if(i.setNode(c),u){var d=n[u],h=i.edge(d,c);i.setEdge(d,c,Math.max(a(e,l,u),h||0))}u=l})}),i}function Op(e,t){return K.minBy(K.values(t),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return K.forIn(n,function(o,a){var s=r2(e,a)/2;r=Math.max(o+s,r),i=Math.min(o-s,i)}),r-i})}function zp(e,t){var n=K.values(t),r=K.min(n),i=K.max(n);K.forEach(["u","d"],function(o){K.forEach(["l","r"],function(a){var s=o+a,u=e[s],l;if(u!==t){var c=K.values(u);l=a==="l"?r-K.min(c):i-K.max(c),l&&(e[s]=K.mapValues(u,function(d){return d+l}))}})})}function Hp(e,t){return K.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=K.sortBy(K.map(e,r));return(i[1]+i[2])/2})}function t2(e){var t=jS.buildLayerMatrix(e),n=K.merge(qp(e,t),$p(e,t)),r={},i;K.forEach(["u","d"],function(a){i=a==="u"?t:K.values(t).reverse(),K.forEach(["l","r"],function(s){s==="r"&&(i=K.map(i,function(d){return K.values(d).reverse()}));var u=(a==="u"?e.predecessors:e.successors).bind(e),l=Fp(e,i,n,u),c=Dp(e,i,l.root,l.align,s==="r");s==="r"&&(c=K.mapValues(c,function(d){return-d})),r[a+s]=c})});var o=Op(e,r);return zp(r,o),Hp(r,e.graph().align)}function n2(e,t,n){return function(r,i,o){var a=r.node(i),s=r.node(o),u=0,l;if(u+=a.width/2,K.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":l=-a.width/2;break;case"r":l=a.width/2;break}if(l&&(u+=n?l:-l),l=0,u+=(a.dummy?t:e)/2,u+=(s.dummy?t:e)/2,u+=s.width/2,K.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":l=s.width/2;break;case"r":l=-s.width/2;break}return l&&(u+=n?l:-l),l=0,u}}function r2(e,t){return e.node(t).width}var mn=ge,Bp=Re,i2=QS.positionX,o2=a2;function a2(e){e=Bp.asNonCompoundGraph(e),s2(e),mn.forEach(i2(e),function(t,n){e.node(n).x=t})}function s2(e){var t=Bp.buildLayerMatrix(e),n=e.graph().ranksep,r=0;mn.forEach(t,function(i){var o=mn.max(mn.map(i,function(a){return e.node(a).height}));mn.forEach(i,function(a){e.node(a).y=r+o/2}),r+=o+n})}var J=ge,Rd=oE,Ld=xE,c2=YE,u2=Re.normalizeRanks,l2=KE,d2=Re.removeEmptyRanks,qd=eS,f2=aS,$d=cS,h2=WS,p2=o2,It=Re,g2=Xe.Graph,m2=v2;function v2(e,t){var n=t&&t.debugTiming?It.time:It.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return M2(e)});n("  runLayout",function(){y2(r,n)}),n("  updateInputGraph",function(){w2(e,r)})})}function y2(e,t){t("    makeSpaceForEdgeLabels",function(){A2(e)}),t("    removeSelfEdges",function(){D2(e)}),t("    acyclic",function(){Rd.run(e)}),t("    nestingGraph.run",function(){qd.run(e)}),t("    rank",function(){c2(It.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){k2(e)}),t("    removeEmptyRanks",function(){d2(e)}),t("    nestingGraph.cleanup",function(){qd.cleanup(e)}),t("    normalizeRanks",function(){u2(e)}),t("    assignRankMinMax",function(){T2(e)}),t("    removeEdgeLabelProxies",function(){R2(e)}),t("    normalize.run",function(){Ld.run(e)}),t("    parentDummyChains",function(){l2(e)}),t("    addBorderSegments",function(){f2(e)}),t("    order",function(){h2(e)}),t("    insertSelfEdges",function(){O2(e)}),t("    adjustCoordinateSystem",function(){$d.adjust(e)}),t("    position",function(){p2(e)}),t("    positionSelfEdges",function(){z2(e)}),t("    removeBorderNodes",function(){F2(e)}),t("    normalize.undo",function(){Ld.undo(e)}),t("    fixupEdgeLabelCoords",function(){$2(e)}),t("    undoCoordinateSystem",function(){$d.undo(e)}),t("    translateGraph",function(){L2(e)}),t("    assignNodeIntersects",function(){q2(e)}),t("    reversePoints",function(){P2(e)}),t("    acyclic.undo",function(){Rd.undo(e)})}function w2(e,t){J.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),J.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,J.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var b2=["nodesep","edgesep","ranksep","marginx","marginy"],_2={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},x2=["acyclicer","ranker","rankdir","align"],E2=["width","height"],S2={width:0,height:0},N2=["minlen","weight","width","height","labeloffset"],C2={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},I2=["labelpos"];function M2(e){var t=new g2({multigraph:!0,compound:!0}),n=Pa(e.graph());return t.setGraph(J.merge({},_2,$a(n,b2),J.pick(n,x2))),J.forEach(e.nodes(),function(r){var i=Pa(e.node(r));t.setNode(r,J.defaults($a(i,E2),S2)),t.setParent(r,e.parent(r))}),J.forEach(e.edges(),function(r){var i=Pa(e.edge(r));t.setEdge(r,J.merge({},C2,$a(i,N2),J.pick(i,I2)))}),t}function A2(e){var t=e.graph();t.ranksep/=2,J.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function k2(e){J.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),o={rank:(i.rank-r.rank)/2+r.rank,e:t};It.addDummyNode(e,"edge-proxy",o,"_ep")}})}function T2(e){var t=0;J.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=J.max(t,r.maxRank))}),e.graph().maxRank=t}function R2(e){J.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function L2(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=e.graph(),a=o.marginx||0,s=o.marginy||0;function u(l){var c=l.x,d=l.y,h=l.width,f=l.height;t=Math.min(t,c-h/2),n=Math.max(n,c+h/2),r=Math.min(r,d-f/2),i=Math.max(i,d+f/2)}J.forEach(e.nodes(),function(l){u(e.node(l))}),J.forEach(e.edges(),function(l){var c=e.edge(l);J.has(c,"x")&&u(c)}),t-=a,r-=s,J.forEach(e.nodes(),function(l){var c=e.node(l);c.x-=t,c.y-=r}),J.forEach(e.edges(),function(l){var c=e.edge(l);J.forEach(c.points,function(d){d.x-=t,d.y-=r}),J.has(c,"x")&&(c.x-=t),J.has(c,"y")&&(c.y-=r)}),o.width=n-t+a,o.height=i-r+s}function q2(e){J.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),o,a;n.points?(o=n.points[0],a=n.points[n.points.length-1]):(n.points=[],o=i,a=r),n.points.unshift(It.intersectRect(r,o)),n.points.push(It.intersectRect(i,a))})}function $2(e){J.forEach(e.edges(),function(t){var n=e.edge(t);if(J.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function P2(e){J.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function F2(e){J.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),o=e.node(J.last(n.borderLeft)),a=e.node(J.last(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),J.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function D2(e){J.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function O2(e){var t=It.buildLayerMatrix(e);J.forEach(t,function(n){var r=0;J.forEach(n,function(i,o){var a=e.node(i);a.order=o+r,J.forEach(a.selfEdges,function(s){It.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:a.rank,order:o+ ++r,e:s.e,label:s.label},"_se")}),delete a.selfEdges})})}function z2(e){J.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}function $a(e,t){return J.mapValues(J.pick(e,t),Number)}function Pa(e){var t={};return J.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var Zn=ge,H2=Re,B2=Xe.Graph,V2={debugOrdering:G2};function G2(e){var t=H2.buildLayerMatrix(e),n=new B2({compound:!0,multigraph:!0}).setGraph({});return Zn.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),Zn.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),Zn.forEach(t,function(r,i){var o="layer"+i;n.setNode(o,{rank:"same"}),Zn.reduce(r,function(a,s){return n.setEdge(a,s,{style:"invis"}),s})}),n}var U2="0.8.5",Us={graphlib:Xe,layout:m2,debug:V2,util:{time:Re.time,notime:Re.notime},version:U2};const Et=new Us.graphlib.Graph;Et.setDefaultEdgeLabel(()=>({}));const Pd=130,Fd=28,Y2=(e,t="LR")=>{const n=t==="LR";return Et.setGraph({rankdir:t}),e.forEach(r=>{Et.setNode(r.id,{width:Pd,height:Fd})}),Us.layout(Et),e.map(r=>{const i=Et.node(r.id);return r.targetPosition=n?B.Left:B.Top,r.sourcePosition=n?B.Right:B.Bottom,r.position={x:i.x-Pd/2+Math.random()/1e3,y:i.y-Fd/2},r})},W2=(e,t="LR")=>(Et.setGraph({rankdir:t}),e.forEach(n=>{Et.setEdge(n.source,n.target)}),Us.layout(Et),e),Xn=33,Z2=({id:e,sourceX:t,sourceY:n,targetX:r,targetY:i,sourcePosition:o,targetPosition:a,style:s={},markerType:u,markerEndId:l,selected:c,data:{onEdgeClick:d}})=>{const[h,f,g]=ks({sourceX:t,sourceY:n,sourcePosition:o,targetX:r,targetY:i,targetPosition:a}),p=eb(u,l);return re(Ce,{children:[E("path",{id:e,style:s,className:"react-flow__edge-path",d:h,markerEnd:p}),c&&E("foreignObject",{width:Xn,height:Xn,x:f-Xn/2,y:g-Xn/2,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml",children:E("button",{className:"edgebutton",onClick:m=>d(m,e),children:E(Ud,{})})})]})},X2=({data:e,selected:t})=>re(Ce,{children:[E(Ct,{position:B.Right,type:"source"}),E("div",{className:`react-flow__node-default keycloak__authentication__conditional_node ${t?"selected":""}`,children:E("div",{children:e.label})}),E(Ct,{position:B.Left,type:"target"})]}),K2=de(X2),j2=({data:{label:e},prefix:t,selected:n})=>re(Ce,{children:[E(Ct,{position:B.Right,type:"source"}),E("div",{className:`react-flow__node-default keycloak__authentication__subflow_node ${n?"selected":""}`,children:re("div",{children:[t," ",e]})}),E(Ct,{position:B.Left,type:"target"})]}),Vp=de(j2),Q2=({...e})=>E(Vp,{...e,prefix:"Start"}),J2=({...e})=>E(Vp,{...e,prefix:"End"}),Ot=(e,t)=>({id:`edge-${e}-to-${t}`,type:"buttonEdge",source:e,target:t,data:{onEdgeClick:(n,r)=>{n.stopPropagation(),alert(`hello ${r}`)}}}),Gp=e=>{let t;return e.executionList&&(t="startSubFlow"),is(e)&&(t="conditional"),{id:e.id,type:t,sourcePosition:B.Right,targetPosition:B.Left,data:{label:e.displayName},position:{x:0,y:0}}},eN=e=>[Gp(e)],tN=(e,t,n)=>[Ot(e.id,t.id),Ot(t.id,n.id)],nN=e=>[Gp(e)],rN=(e,t,n,r,i,o)=>{const a=[];return i?a.push(Ot(e.id,t.id)):a.push(Ot(r.id,t.id)),o&&a.push(Ot(t.id,n.id)),a},iN=e=>{const t=[];t.push({id:e.id,type:"startSubFlow",sourcePosition:B.Right,targetPosition:B.Left,data:{label:e.displayName},position:{x:0,y:0}});const n=`flow-end-${e.id}`;return t.push({id:n,type:"endSubFlow",sourcePosition:B.Right,targetPosition:B.Left,data:{label:e.displayName},position:{x:0,y:0}}),t.concat(Up(e.executionList||[]))},oN=(e,t,n,r)=>{const i=[],o=`flow-end-${e.id}`;return i.push(Ot(r&&r.requirement!=="ALTERNATIVE"?r.id:t.id,e.id)),i.push(Ot(o,n.id)),i.concat(Yp(e,e.executionList||[],{...e,id:o}))},Up=e=>{let t=[];for(let n=0;n<e.length;n++){const r=e[n];r.executionList?t=t.concat(iN(r)):r.requirement==="ALTERNATIVE"||r.requirement==="DISABLED"?t=t.concat(eN(r)):t=t.concat(nN(r))}return t},Yp=(e,t,n)=>{let r=[];for(let i=0;i<t.length;i++){const o=t[i];o.executionList?r=r.concat(oN(o,e,n,t[i-1])):o.requirement==="ALTERNATIVE"||o.requirement==="DISABLED"?r=r.concat(tN(e,o,n)):r=r.concat(rN(e,o,n,t[i-1],i===0,i===t.length-1))}return r},aN={conditional:K2,startSubFlow:Q2,endSubFlow:J2},sN={buttonEdge:Z2};function Dd(e){return Y2([{id:"start",sourcePosition:B.Right,type:"input",data:{label:"Start"},position:{x:0,y:0},className:"keycloak__authentication__input_node"},{id:"end",targetPosition:B.Left,type:"output",data:{label:"End"},position:{x:0,y:0},className:"keycloak__authentication__output_node"},...Up(e)])}function Od(e){return W2(Yp({id:"start"},e,{id:"end"}))}const cN=({executionList:{expandableList:e}})=>{const[t,n]=ae(!1),r=Pe(()=>Dd(e),[]),i=Pe(()=>Od(e),[]),[o,a,s]=L1(r),[u,l,c]=q1(i);return i_(()=>{a(Dd(e)),l(Od(e))},[e]),re(zh,{nodes:o,edges:u,onNodesChange:s,onEdgesChange:c,onInit:f=>f.fitView({duration:100}),nodeTypes:aN,edgeTypes:sN,onNodeClick:()=>{n(!t)},nodesConnectable:!1,children:[E(G1,{}),E(j1,{}),E(r_,{})]})},uN=()=>{const{t:e}=He();return E(lf,{"aria-labelledby":"headerName",id:"header",children:re(df,{children:[E(ff,{className:"keycloak__authentication__header-drag-button","aria-label":e("disabled")}),E(hf,{className:"keycloak__authentication__header",dataListCells:[E(Xt,{id:"headerName",children:e("steps")},"step"),E(Xt,{children:e("requirement")},"requirement"),E(Xt,{},"config")]})]})})},lN=({id:e,title:t,alias:n})=>E(Lg,{"data-testid":t,className:"keycloak__authentication__title",isFlat:!0,children:re(qg,{"data-id":e,id:`title-id-${e}`,children:[t," ",E("br",{}),E(Yd,{component:Wd.small,children:n})]})}),dN=({flow:e,onChange:t})=>{const{t:n}=He(),[r,i]=ae(!1),o=e.requirementChoices.map((a,s)=>E($g,{value:a,children:n(`requirements.${a}`)},s));return re(Ce,{children:[e.requirementChoices&&e.requirementChoices.length>1&&E(Pg,{className:"keycloak__authentication__requirement-dropdown",variant:Fg.single,onToggle:i,onSelect:(a,s)=>{e.requirement=s.toString(),t(e),i(!1)},selections:[e.requirement],isOpen:r,children:o}),(!e.requirementChoices||e.requirementChoices.length<=1)&&E(Ce,{children:n(`requirements.${e.requirement}`)})]})},fN=({execution:e})=>{const{t}=He(),{addAlert:n,addError:r}=ss(),[i,o]=ae(!1),[a,s]=ae(),[u,l]=ae(),c=vr(),{setValue:d,handleSubmit:h}=c,f=e.authenticationFlow?[]:[{helpText:t("authenticatorRefConfig.value.help"),label:t("authenticatorRefConfig.value.label"),name:"default.reference.value",readOnly:!1,secret:!1,type:"String"},{helpText:t("authenticatorRefConfig.maxAge.help"),label:t("authenticatorRefConfig.maxAge.label"),name:"default.reference.maxAge",readOnly:!1,secret:!1,type:"String"}],g=m=>{Dg(m||{},d)};Nn(async()=>{let m;const v=e.configurable?await fe.authenticationManagement.getConfigDescription({providerId:e.providerId}):{name:e.displayName,properties:[]};return e.authenticationConfig&&(m=await fe.authenticationManagement.getConfig({id:e.authenticationConfig})),v.properties=[...f,...v.properties],{configDescription:v,config:m}},({configDescription:m,config:v})=>{l(m),s(v)},[]),le(()=>{a&&g(a)},[a]);const p=async m=>{const v=Og(m);try{if(a){const b={id:a.id,alias:a.alias,config:v.config};await fe.authenticationManagement.updateConfig(b),s({...b})}else{const b={id:e.id,alias:v.alias,config:v.config},{id:S}=await fe.authenticationManagement.createConfig(b);s({...b.config,id:S,alias:b.alias})}n(t("configSaveSuccess"),yt.success),o(!1)}catch(b){r("configSaveError",b)}};return re(Ce,{children:[E(wr,{content:t("settings"),children:E(_e,{variant:"plain","aria-label":t("settings"),onClick:()=>o(!0),children:E(Tm,{})})}),u&&E(Cn,{variant:In.small,isOpen:i,title:t("executionConfig",{name:u.name}),onClose:()=>o(!1),children:re(Mn,{id:"execution-config-form",onSubmit:h(p),children:[re(yr,{...c,children:[E(er,{name:"alias",label:t("alias"),labelIcon:t("authenticationAliasHelp"),rules:{required:{value:!0,message:t("required")}},isDisabled:!!a}),E(Cm,{stringify:!0,properties:u.properties||[]})]}),re(Qg,{children:[E(_e,{"data-testid":"save",variant:"primary",type:"submit",children:t("save")}),E(_e,{"data-testid":"cancel",variant:dt.link,onClick:()=>{o(!1)},children:t("cancel")}),a&&re(_e,{className:"pf-u-ml-4xl","data-testid":"clear",variant:dt.link,onClick:async()=>{await fe.authenticationManagement.delConfig({id:a.id}),s(void 0),o(!1)},children:[t("clear")," ",E(pf,{})]})]})]})})]})},hN=({execution:e,onAddExecution:t,onAddFlow:n})=>{const{t:r}=He(),[i,o]=ae(!1),[a,s]=ae(),[u,l]=ae();return Nn(()=>fe.authenticationManagement.getFlow({flowId:e.flowId}),({providerId:c})=>l(c),[]),E(wr,{content:r("add"),children:re(Ce,{children:[E(zg,{isPlain:!0,position:"right","data-testid":`${e.displayName}-edit-dropdown`,isOpen:i,toggle:E(Hg,{onToggle:o,"aria-label":r("add"),children:E(Ud,{})}),dropdownItems:[E(Tt,{onClick:()=>s(u==="form-flow"?"form":"basic"),children:r("addStep")},"addStep"),E(Tt,{onClick:()=>s("condition"),children:r("addCondition")},"addCondition"),E(Tt,{onClick:()=>s("subFlow"),children:r("addSubFlow")},"addSubFlow")],onSelect:()=>o(!1)}),a&&a!=="subFlow"&&E(ms,{name:e.displayName,type:a,onSelect:c=>{c&&t(e,c),s(void 0)}}),a==="subFlow"&&E(vs,{name:e.displayName,onCancel:()=>s(void 0),onConfirm:c=>{n(e,c),s(void 0)}})]})})},pN=({execution:e,onRowChange:t})=>{const{t:n}=He(),r=vr({mode:"onChange",defaultValues:e}),[i,o]=Fa();le(()=>r.reset(e),[e]);const a=s=>{t({...e,...s}),o()};return re(Ce,{children:[E(wr,{content:n("edit"),children:E(_e,{variant:"plain","data-testid":`${e.id}-edit`,"aria-label":n("edit"),onClick:o,children:E(Sm,{})})}),i&&E(Cn,{title:n("editFlow"),onClose:o,variant:In.small,actions:[E(_e,{"data-testid":"confirm",type:"submit",form:"edit-flow-form",isDisabled:!r.formState.isValid,children:n("edit")},"confirm"),E(_e,{"data-testid":"cancel",variant:dt.link,onClick:o,children:n("cancel")},"cancel")],isOpen:!0,children:E(Mn,{id:"edit-flow-form",onSubmit:r.handleSubmit(a),isHorizontal:!0,children:re(yr,{...r,children:[E(er,{name:"name",label:n("name"),labelIcon:n("flowNameHelp"),rules:{required:{value:!0,message:n("required")}}}),E(Bg,{name:"description",label:n("description"),labelIcon:n("flowDescriptionHelp"),rules:{maxLength:{value:255,message:n("maxLength",{length:255})}}})]})})})]})},Wp=({builtIn:e,execution:t,onRowClick:n,onRowChange:r,onAddExecution:i,onAddFlow:o,onDelete:a})=>{const{t:s}=He(),u=!!t.executionList?.length;return re(Ce,{children:[E(lf,{className:"keycloak__authentication__flow-item",id:t.id,isExpanded:!t.isCollapsed,"aria-labelledby":`title-id-${t.id}`,children:re(df,{className:"keycloak__authentication__flow-row","aria-level":t.level+1,role:"heading","aria-labelledby":t.id,children:[E(Im,{children:E(ff,{"aria-label":s("dragHelp")})}),u&&E(gf,{onClick:()=>n(t),isExpanded:!t.isCollapsed,id:`toggle1-${t.id}`,"aria-controls":t.executionList[0].id}),E(hf,{dataListCells:[re(Xt,{children:[!t.authenticationFlow&&E(lN,{id:t.id,alias:t.alias,title:t.displayName},t.id),t.authenticationFlow&&re(Ce,{children:[t.displayName," ",E("br",{})," ",re(Yd,{component:Wd.small,children:[t.alias," ",t.description]})]})]},`${t.id}-name`),E(Xt,{children:E(dN,{flow:t,onChange:r})},`${t.id}-requirement`),re(Xt,{children:[E(fN,{execution:t}),t.authenticationFlow&&!e&&re(Ce,{children:[E(hN,{execution:t,onAddExecution:i,onAddFlow:o}),E(pN,{execution:t,onRowChange:r})]}),!e&&E(wr,{content:s("delete"),children:E(_e,{variant:"plain","data-testid":`${t.displayName}-delete`,"aria-label":s("delete"),onClick:()=>a(t),children:E(pf,{})})})]},`${t.id}-config`)]})]})}),!t.isCollapsed&&u&&t.executionList?.map(l=>E(Wp,{builtIn:e,execution:l,onRowClick:n,onRowChange:r,onAddExecution:i,onAddFlow:o,onDelete:a},l.id))]})};class Zp{oldIndex;newIndex;constructor(t,n){this.oldIndex=t,this.newIndex=n}}class zd extends Zp{parent;constructor(t,n,r){super(t,n),this.parent=r}}class Ys{#e;expandableList;constructor(t){this.#e=t;const n={executionList:[],isCollapsed:!1};this.#t(0,-1,n),this.expandableList=n.executionList}#t(t,n,r){for(let i=t;i<this.#e.length;i++){const o=this.#e[i],a=o.level||0;if(a<=n)return i-1;const s=this.#e[i+1]?.level||0;if(a<s){const l={...o,executionList:[],isCollapsed:!1};i=this.#t(i+1,a,l),r.executionList?.push(l)}else r.executionList?.push(o)}return this.#e.length}order(t){let n=[];for(const r of t||this.expandableList)n.push(r),r.executionList&&!r.isCollapsed&&(n=n.concat(this.order(r.executionList)));return n}findExecution(t,n){let r=(n||this.expandableList).find(i=>i.id===t);if(!r){for(const i of n||this.expandableList)if(i.executionList&&(r=this.findExecution(t,i.executionList),r))return r}return r}#n(t,n){let r;for(let i=0;i<n;i++){const o=this.#e[i];t-1===o.level&&(r=o)}return r}getChange(t,n){const r=this.order(),i=n.findIndex(c=>c===t.id),o=r.findIndex(c=>c.id===t.id),a=r[o],s=r[i],u=this.#n(a.level,o),l=this.#n(s.level,i);return u?.id!==l?.id?s.level>0?new zd(l?.executionList?.length||0,s.index,l):new zd(this.expandableList.length,s.index):new Zp(a.index,s.index)}clone(){const t=new Ys([]);return t.#e=this.#e,t.expandableList=this.expandableList,t}}const is=e=>e.displayName?.startsWith("Condition ");function aC(){const{t:e}=He(),{realm:t}=Vg(),{addAlert:n,addError:r}=ss(),{id:i,usedBy:o,builtIn:a}=Gg(),s=Ug(),[u,l]=ae(0),c=()=>l(new Date().getTime()),[d,h]=ae(!0),[f,g]=ae(),[p,m]=ae(),[v,b]=ae(),[S,w]=ae(""),[A,M]=ae(),[q,$]=ae(),[T,D]=ae(),[F,O,C]=Fa(),[y,I]=ae(!1),[_,R]=Fa();Nn(async()=>{const V=(await fe.authenticationManagement.getFlows()).find(se=>se.id===i);if(!V)throw new Error(e("notFound"));const W=await fe.authenticationManagement.getExecutions({flow:V.alias});return{flow:V,executions:W}},({flow:H,executions:V})=>{g(H),m(new Ys(V))},[u]);const P=async(H,V)=>{try{let W=H.id;if("parent"in V){let oe={};"authenticationConfig"in H&&(oe=await fe.authenticationManagement.getConfig({id:H.authenticationConfig}));try{await fe.authenticationManagement.delExecution({id:W})}catch{}if("authenticationFlow"in H){const pe=H,ue=await fe.authenticationManagement.addFlowToFlow({flow:V.parent?.displayName||f?.alias,alias:pe.displayName,description:pe.description,provider:H.providerId,type:"basic-flow"});W=ue.id,H.executionList?.forEach((Q,ie)=>P(Q,{parent:{...H,id:ue.id},newIndex:ie,oldIndex:ie}))}else{const pe=await fe.authenticationManagement.addExecutionToFlow({flow:V.parent?.displayName||f?.alias,provider:H.providerId});if(oe.id){const ue={id:pe.id,alias:oe.alias,config:oe.config};await fe.authenticationManagement.createConfig(ue)}W=pe.id}}const se=V.newIndex-V.oldIndex;for(let oe=0;oe<Math.abs(se);oe++)se>0?await fe.authenticationManagement.lowerPriorityExecution({id:W}):await fe.authenticationManagement.raisePriorityExecution({id:W});c(),n(e("updateFlowSuccess"),yt.success)}catch(W){r("updateFlowError",W)}},x=async H=>{const{executionList:V,isCollapsed:W,...se}=H;try{await fe.authenticationManagement.updateExecution({flow:f?.alias},se),c(),n(e("updateFlowSuccess"),yt.success)}catch(oe){r("updateFlowError",oe)}},L=async(H,V)=>{try{await fe.authenticationManagement.addExecutionToFlow({flow:H,provider:V.id}),c(),n(e("updateFlowSuccess"),yt.success)}catch(W){r("updateFlowError",W)}},k=async(H,{name:V,description:W="",type:se,provider:oe})=>{try{await fe.authenticationManagement.addFlowToFlow({flow:H,alias:V,description:W,provider:oe,type:se}),c(),n(e("updateFlowSuccess"),yt.success)}catch(pe){r("updateFlowError",pe)}},[z,U]=Qs({titleKey:"deleteConfirmExecution",children:re(Js,{i18nKey:"deleteConfirmExecutionMessage",children:[" ",E("strong",{children:{name:T?.displayName}}),"."]}),continueButtonLabel:"delete",continueButtonVariant:dt.danger,onConfirm:async()=>{try{await fe.authenticationManagement.delExecution({id:T?.id}),n(e("deleteExecutionSuccess"),yt.success),c()}catch(H){r("deleteExecutionError",H)}}}),[G,Z]=Qs({titleKey:"deleteConfirmFlow",children:re(Js,{i18nKey:"deleteConfirmFlowMessage",children:[" ",E("strong",{children:{flow:f?.alias||""}}),"."]}),continueButtonLabel:"delete",continueButtonVariant:dt.danger,onConfirm:async()=>{try{await fe.authenticationManagement.deleteFlow({flowId:f.id}),s(Yg({realm:t})),n(e("deleteFlowSuccess"),yt.success)}catch(H){r("deleteFlowError",H)}}}),j=p?.expandableList.length!==0,ne=[...o!=="DEFAULT"?[E(Tt,{"data-testid":"set-as-default",onClick:R,children:e("bindFlow")},"default")]:[],E(Tt,{onClick:()=>C(!0),children:e("duplicate")},"duplicate"),...a?[]:[E(Tt,{"data-testid":"edit-flow",onClick:()=>I(!0),children:e("editInfo")},"edit"),E(Tt,{"data-testid":"delete-flow",onClick:()=>G(),children:e("delete")},"delete")]];return re(Ce,{children:[_&&E(Xg,{flowAlias:f?.alias,onClose:H=>{R(),s(Wg({realm:t,id:i,usedBy:H?"DEFAULT":"notInUse",builtIn:a?"builtIn":void 0}))}}),F&&E(Kg,{name:f?.alias,description:f?.description,toggleDialog:O,onComplete:()=>{c(),C(!1)}}),y&&E(Om,{flow:f,toggleDialog:()=>{I(!y),c()}}),E(Z,{}),E(Zg,{titleKey:f?.alias||"",badges:[{text:E(Vd,{children:e(`used.${o}`)})},a?{text:E(Dm,{}),id:"builtIn"}:{}],dropdownItems:ne}),re(Gd,{variant:"light",children:[p&&j&&re(Ce,{children:[E(Mm,{id:"toolbar",children:re(Am,{children:[E(Hr,{children:re(mf,{children:[E(nr,{icon:E($m,{}),"aria-label":e("tableView"),buttonId:"tableView",isSelected:d,onChange:()=>h(!0)}),E(nr,{icon:E(Lm,{}),"aria-label":e("diagramView"),buttonId:"diagramView",isSelected:!d,onChange:()=>h(!1)})]})}),E(Hr,{children:E(_e,{"data-testid":"addStep",variant:"secondary",onClick:()=>M(!0),children:e("addStep")})}),E(Hr,{children:E(_e,{"data-testid":"addSubFlow",variant:"secondary",onClick:()=>$(!0),children:e("addSubFlow")})})]})}),E(U,{}),d&&re(Nm,{"aria-label":e("flows"),onDragFinish:H=>{const V=H.slice(1);w(e("onDragFinish",{list:v?.displayName}));const W=p.getChange(v,V);P(v,W)},onDragStart:H=>{const V=p.findExecution(H);w(e("onDragStart",{item:V.displayName})),b(V),V.isCollapsed||(V.isCollapsed=!0,m(p.clone()))},onDragMove:()=>w(e("onDragMove",{item:v?.displayName})),onDragCancel:()=>w(e("onDragCancel")),itemOrder:["header",...p.order().map(H=>H.id)],children:[E(uN,{}),E(Ce,{children:p.expandableList.map(H=>E(Wp,{builtIn:!!a,execution:H,onRowClick:V=>{V.isCollapsed=!V.isCollapsed,m(p.clone())},onRowChange:x,onAddExecution:(V,W)=>L(V.displayName,W),onAddFlow:(V,W)=>k(V.displayName,W),onDelete:V=>{D(V),z()}},H.id))})]}),f&&re(Ce,{children:[A&&E(ms,{name:f.alias,type:f.providerId==="client-flow"?"client":"basic",onSelect:H=>{H&&L(f.alias,H),M(!1)}}),q&&E(vs,{name:f.alias,onCancel:()=>$(!1),onConfirm:H=>{k(f.alias,H),$(!1)}})]}),E("div",{className:"pf-screen-reader","aria-live":"assertive",children:S})]}),!d&&p?.expandableList&&E(cN,{executionList:p}),!p?.expandableList||f&&!j&&E(Bm,{flow:f,onAddExecution:H=>L(f.alias,H),onAddFlow:H=>k(f.alias,H)})]})]})}export{aC as default,is as providerConditionFilter};
//# sourceMappingURL=FlowDetails-IlZc6wXI.js.map
