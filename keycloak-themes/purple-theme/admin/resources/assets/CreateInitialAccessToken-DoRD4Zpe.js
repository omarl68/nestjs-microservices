import{jsxs as o,jsx as e,Fragment as C}from"react/jsx-runtime";import{useState as I}from"react";import{u as g,an as y,A as k,a0 as l,g as S,b as V,e as F,c as H,aE as p,P as L,a1 as h,a3 as v,ab as N,h as b,L as D,f as E}from"./index-C9t2UlUN.js";import{b as M,F as w}from"./FormAccess-DnQCcStE.js";import{V as P}from"./ViewHeader-cxZm8XhN.js";import{T as j}from"./TimeSelector-CWH4kuIN.js";import{M as G,a as K}from"./Modal-Bgkd26UL.js";import{F as O,A as R}from"./Form-Cdw1qhWG.js";import"react-dom";import"./copy-icon-CYSS18Ce.js";import"./ToolbarContent-D6TJq6fk.js";const z=({token:t,toggleDialog:r})=>{const{t:n}=g();return o(G,{title:n("initialAccessTokenDetails"),isOpen:!0,onClose:r,variant:K.medium,children:[e(y,{title:n("copyInitialAccessToken"),titleHeadingLevel:"h2",isInline:!0,variant:k.warning}),e(O,{className:"pf-u-mt-md",children:e(l,{label:n("initialAccessToken"),fieldId:"initialAccessToken",children:e(M,{id:"initialAccessToken",isReadOnly:!0,children:t})})})]})};function ae(){const{t}=g(),{handleSubmit:r,control:n,formState:{isValid:A,errors:c}}=S({mode:"onChange"}),{realm:s}=V(),{addAlert:f,addError:T}=F(),x=H(),[u,d]=I("");return o(C,{children:[u&&e(z,{token:u,toggleDialog:()=>{d(""),f(t("tokenSaveSuccess"),k.success),x(p({realm:s,tab:"initial-access-token"}))}}),e(P,{titleKey:"createToken",subKey:"createTokenHelp"}),e(L,{variant:"light",children:o(w,{isHorizontal:!0,role:"create-client",onSubmit:r(async a=>{try{const i=await E.realms.createClientsInitialAccess({realm:s},a);d(i.token)}catch(i){T("tokenSaveError",i)}}),children:[e(l,{label:t("expiration"),fieldId:"expiration",labelIcon:e(h,{helpText:t("tokenExpirationHelp"),fieldLabelId:"expiration"}),helperTextInvalid:t("expirationValueNotValid"),validated:c.expiration?"error":"default",children:e(v,{name:"expiration",defaultValue:86400,control:n,rules:{min:1},render:({field:a})=>e(j,{"data-testid":"expiration",value:a.value,onChange:a.onChange,min:1,validated:c.expiration?"error":"default"})})}),e(l,{label:t("count"),fieldId:"count",labelIcon:e(h,{helpText:t("countHelp"),fieldLabelId:"count"}),children:e(v,{name:"count",defaultValue:1,control:n,render:({field:a})=>e(N,{"data-testid":"count",inputName:"count",inputAriaLabel:t("count"),min:1,value:a.value,onPlus:()=>a.onChange(a.value+1),onMinus:()=>a.onChange(a.value-1),onChange:i=>{const m=Number(i.target.value);a.onChange(m<1?1:m)}})})}),o(R,{children:[e(b,{variant:"primary",type:"submit","data-testid":"save",isDisabled:!A,children:t("save")}),e(b,{"data-testid":"cancel",variant:"link",component:a=>e(D,{...a,to:p({realm:s,tab:"initial-access-token"})}),children:t("cancel")})]})]})})]})}export{ae as default};
//# sourceMappingURL=CreateInitialAccessToken-DoRD4Zpe.js.map
