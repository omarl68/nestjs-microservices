import{jsxs as d,jsx as e,Fragment as J}from"react/jsx-runtime";import{useState as m,useEffect as Ie,useMemo as tt}from"react";import{ch as ya,dv as Ta,dw as ka,de as Ca,dn as Xt,dp as Sa,cj as Ia,dx as La,dr as Pa,dy as Aa,c_ as xa,dh as it,q as we,f as M,u as H,b as ce,e as be,g as fe,a4 as He,P as re,ba as ye,a0 as v,dz as Tt,a1 as D,a3 as O,bz as It,V as de,an as pt,dA as Ea,L as Ce,be as wa,h as R,A as le,ax as kt,I as oe,J as pe,S as W,F as Et,aK as Yt,aL as Fe,ak as Kt,M as Oe,a as Ue,p as Da,ad as qe,dB as Pe,r as Ra,Y as st,G as Re,H as wt,a6 as Qe,a7 as We,dC as Ae,B as ie,a2 as ke,dD as Mt,O as Qt,aq as Zt,D as at,aZ as ea,cd as Na,aC as Oa,bk as Ft,aJ as Va,aM as lt,n as mt,c as Ye,U as Ge,T as ta,R as ht,dE as Ht,dF as Ka,dG as Lt,dH as Ma,dI as Fa,aO as Ha,ab as nt,aS as ot,af as Ua,X as Ga,dJ as Ut,ar as Je,dt as Pt,du as Dt,aX as Ba,aY as _a,dK as za,Z as aa,dL as Gt,dM as $a,bV as ja,dN as qa,dO as Bt,dP as _t,dQ as na,bL as Ct,K as zt,aR as Wa,bJ as Ja,bl as Xa,ag as Ya,b1 as Qa,N as Za,ai as en,bm as tn,aj as an}from"./index-C9t2UlUN.js";import{u as nn}from"./useParams-DL8-63Ov.js";import{u as ge}from"./ConfirmDialog-BDkqxnFL.js";import{R as ft,u as gt}from"./RoutableTabs-vx5wTdby.js";import{F as At,V as ln}from"./ViewHeader-cxZm8XhN.js";import{u as la,F as ia}from"./useIsFeatureEnabled-CkHhuO9z.js";import{F as ae,b as sn}from"./FormAccess-DnQCcStE.js";import{K as me}from"./KeycloakTextInput-DrlF32nr.js";import{P as rn}from"./PasswordInput-CJKuHljf.js";import{u as $e}from"./useToggle-K3Kx99tM.js";/* empty css                               */import{A as Te,F as rt}from"./Form-Cdw1qhWG.js";import{a as St}from"./KeySelect-CPI9XGq0.js";import{K as on}from"./KeyValueInput-BJlDoGlu.js";import{U as Ze}from"./userProfileMetadata-CFgHgJ2w.js";import{l as cn,L as Ee,P as dn}from"./PaginatingTableToolbar-oQUfBy2J.js";import{a1 as Be,ac as un,a4 as mn,a5 as $t,a6 as ct,a7 as pn,a8 as dt,a0 as hn,ai as fn,a2 as ze}from"./KeycloakDataTable-2rLFZPhG.js";import{D as gn}from"./DropdownPanel-UFbgzvY8.js";import{p as bn}from"./pickBy-3m0iiQTY.js";import{F as Rt,a as Ne}from"./FlexItem-BEayPdRt.js";import{M as je,a as Xe}from"./Modal-Bgkd26UL.js";import{i as sa}from"./isEqual-CVfl2lzU.js";import{b as Se,T as ra,c as vn,a as yn}from"./ToolbarContent-D6TJq6fk.js";import{T as vt,a as z,b as $}from"./Tabs-CjrDEqsl.js";import{J as Tn}from"./JsonFileUpload-BSVnFg4G.js";import{e as oa,D as ca,a as da,c as ua,d as xt}from"./DataListItemRow-Bimi62Tu.js";import{C as Nt,L as Ot}from"./CodeEditor-Cp4g17EF.js";import{b as kn}from"./_baseSlice-F8doVSIJ.js";import{a as Cn,s as Sn,o as In}from"./_baseFlatten-BQ8y46Zj.js";import{T as ee,t as Ln}from"./TimeSelector-CWH4kuIN.js";import{R as Pn}from"./AddRoleMappingModal-BWNuJU0W.js";import{G as An}from"./GroupPickerDialog-tI6XV7Ln.js";import{T as bt}from"./Trans-DcN6j3pV.js";import{Q as xn}from"./question-circle-icon-B-vzDm0d.js";import{u as En}from"./useFormatDate-Yp0qEhJS.js";import{F as ma}from"./filter-icon-C8nM2k1N.js";import{D as pa}from"./DraggableTable-CIWrK8lS.js";import{KeyProviderForm as wn}from"./KeyProviderForm-BfBWi9oG.js";import{u as Vt,U as Dn}from"./UserProfileContext-BGkDcTK6.js";import"react-dom";import"./PageHandler-TK8xnd8P.js";import"./DynamicComponents-D5DD9CFr.js";import"./FileUpload-CTw4RKK1.js";import"./EmptyStateBody-CyIhnUop.js";import"./MultiLineInput-DibC-IV_.js";import"./KeycloakTextArea-DChmurIP.js";import"./PageList-59HC89eh.js";import"./EmptyStateSecondaryActions-BekVwNvY.js";import"./grip-vertical-icon-B_ub3hpF.js";import"./copy-icon-CYSS18Ce.js";import"./MenuList-Br-Zu33q.js";import"./FileUploadForm-DmYGfve4.js";function Rn(a){var l=a==null?0:a.length;return l?Cn(a,1):[]}function Nn(a){return Sn(In(a,void 0,Rn),a+"")}var On="[object Object]",Vn=Function.prototype,Kn=Object.prototype,ha=Vn.toString,Mn=Kn.hasOwnProperty,Fn=ha.call(Object);function Hn(a){if(!ya(a)||Ta(a)!=On)return!1;var l=ka(a);if(l===null)return!0;var t=Mn.call(l,"constructor")&&l.constructor;return typeof t=="function"&&t instanceof t&&ha.call(t)==Fn}function Un(a,l){return l.length<2?a:Ca(a,kn(l,0,-1))}function Gn(a,l){return l=Xt(l,a),a=Un(a,l),a==null||delete a[Sa(cn(l))]}function Bn(a){return Hn(a)?void 0:a}var _n=1,zn=2,$n=4,jn=Nn(function(a,l){var t={};if(a==null)return t;var n=!1;l=Ia(l,function(r){return r=Xt(r,a),n||(n=r.length>1),r}),La(a,Pa(a),t),n&&(t=Aa(t,_n|zn|$n,Bn));for(var s=l.length;s--;)Gn(t,l[s]);return t});function qn(a,l){return l=typeof l=="function"?l:void 0,a&&a.length?xa(a,void 0,l):[]}function Wn(){const{whoAmI:a}=it(),[l,t]=m(),n=a.getUserId();return we(()=>M.users.findOne({id:n}),t,[n]),l}const Jn=({realm:a,save:l})=>{const{t}=H(),{realm:n}=ce(),{addAlert:s,addError:r}=be(),p=Wn(),{register:o,control:T,handleSubmit:c,watch:h,reset:A,getValues:x,formState:{errors:f}}=fe({defaultValues:a}),g=()=>A(a),E=h("smtpServer.from",""),i=h("smtpServer.host",""),[u,k]=$e(),S=He({control:T,name:"smtpServer.auth",defaultValue:""}),I=async()=>{const y=V=>Number(V),b=V=>V==="true",w=new Map([["port",y],["ssl",b],["starttls",b],["auth",b]]),F={...x().smtpServer};for(const[V,C]of w.entries())F[V]=C(F[V]);F.port===0&&(F.port=null);try{k(),await M.realms.testSMTPConnection({realm:a.realm},F),s(t("testConnectionSuccess"),le.success)}catch(V){r("testConnectionError",V)}k()};return d(re,{variant:"light",children:[e(ye,{title:t("template"),className:"kc-email-template",children:d(ae,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:c(l),children:[e(v,{label:t("from"),fieldId:"kc-display-name",isRequired:!0,validated:f.smtpServer?.from?"error":"default",helperTextInvalid:t("emailInvalid"),children:e(me,{type:"email",id:"kc-sender-email-address","data-testid":"sender-email-address",placeholder:"Sender email address",validated:f.smtpServer?.from?"error":"default",...o("smtpServer.from",{pattern:Tt,required:!0})})}),e(v,{label:t("fromDisplayName"),fieldId:"kc-from-display-name",labelIcon:e(D,{helpText:t("fromDisplayNameHelp"),fieldLabelId:"authentication"}),children:e(me,{id:"kc-from-display-name","data-testid":"from-display-name",placeholder:"Display name for Sender email address",...o("smtpServer.fromDisplayName")})}),e(v,{label:t("replyTo"),fieldId:"kc-reply-to",validated:f.smtpServer?.replyTo?"error":"default",helperTextInvalid:t("emailInvalid"),children:e(me,{type:"email",id:"kc-reply-to",placeholder:"Reply to email address",validated:f.smtpServer?.replyTo?"error":"default",...o("smtpServer.replyTo",{pattern:Tt})})}),e(v,{label:t("replyToDisplayName"),fieldId:"kc-reply-to-display-name",labelIcon:e(D,{helpText:t("replyToDisplayNameHelp"),fieldLabelId:"replyToDisplayName"}),children:e(me,{id:"kc-reply-to-display-name",placeholder:'Display name for "reply to" email address',...o("smtpServer.replyToDisplayName")})}),e(v,{label:t("envelopeFrom"),fieldId:"kc-envelope-from",labelIcon:e(D,{helpText:t("envelopeFromHelp"),fieldLabelId:"envelopeFrom"}),children:e(me,{id:"kc-envelope-from",placeholder:"Sender envelope email address",...o("smtpServer.envelopeFrom")})})]})}),e(ye,{className:"kc-email-connection",title:t("connectionAndAuthentication"),children:d(ae,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:c(l),children:[e(v,{label:t("host"),fieldId:"kc-host",isRequired:!0,validated:f.smtpServer?.host?"error":"default",helperTextInvalid:t("required"),children:e(me,{id:"kc-host",placeholder:"SMTP host",validated:f.smtpServer?.host?"error":"default",...o("smtpServer.host",{required:!0})})}),e(v,{label:t("port"),fieldId:"kc-port",children:e(me,{id:"kc-port",placeholder:"SMTP port (defaults to 25)",...o("smtpServer.port")})}),d(v,{label:t("encryption"),fieldId:"kc-html-display-name",children:[e(O,{name:"smtpServer.ssl",control:T,defaultValue:"false",render:({field:y})=>e(It,{id:"kc-enable-ssl","data-testid":"enable-ssl",label:t("enableSSL"),isChecked:y.value==="true",onChange:b=>y.onChange(""+b)})}),e(O,{name:"smtpServer.starttls",control:T,defaultValue:"false",render:({field:y})=>e(It,{id:"kc-enable-start-tls","data-testid":"enable-start-tls",label:t("enableStartTLS"),isChecked:y.value==="true",onChange:b=>y.onChange(""+b)})})]}),e(v,{hasNoPaddingTop:!0,label:t("authentication"),fieldId:"kc-authentication",children:e(O,{name:"smtpServer.auth",control:T,defaultValue:"",render:({field:y})=>e(de,{id:"kc-authentication-switch","data-testid":"email-authentication-switch",label:t("enabled"),labelOff:t("disabled"),isChecked:y.value==="true",onChange:b=>{y.onChange(""+b)},"aria-label":t("authentication")})})}),S==="true"&&d(J,{children:[e(v,{label:t("username"),fieldId:"kc-username",isRequired:!0,validated:f.smtpServer?.user?"error":"default",helperTextInvalid:t("required"),children:e(me,{id:"kc-username","data-testid":"username-input",placeholder:"Login username",validated:f.smtpServer?.user?"error":"default",...o("smtpServer.user",{required:!0})})}),e(v,{label:t("password"),fieldId:"kc-username",isRequired:!0,validated:f.smtpServer?.password?"error":"default",helperTextInvalid:t("required"),labelIcon:e(D,{helpText:t("passwordHelp"),fieldLabelId:"password"}),children:e(rn,{id:"kc-password","data-testid":"password-input","aria-label":t("password"),validated:f.smtpServer?.password?"error":"default",...o("smtpServer.password",{required:!0})})})]}),p&&e(v,{id:"descriptionTestConnection",children:p.email?e(pt,{variant:"info",component:"h2",isInline:!0,title:t("testConnectionHint.withEmail",{email:p.email})}):e(pt,{variant:"warning",component:"h2",isInline:!0,title:t("testConnectionHint.withoutEmail",{userName:p.username}),actionLinks:e(Ea,{component:y=>e(Ce,{...y,to:wa({realm:n,id:p.id,tab:"settings"})}),children:t("testConnectionHint.withoutEmailAction")})})}),d(Te,{children:[e(St,{children:e(R,{variant:"primary",type:"submit","data-testid":"email-tab-save",children:t("save")})}),e(St,{children:e(R,{variant:"secondary",onClick:()=>I(),"data-testid":"test-connection-button",isDisabled:!(Tt.test(E)&&i)||!p?.email,"aria-describedby":"descriptionTestConnection",isLoading:u,spinnerAriaValueText:t("testingConnection"),children:t("testConnection")})}),e(St,{children:e(R,{variant:"link",onClick:g,"data-testid":"email-tab-revert",children:t("revert")})})]})]})})]})},Xn=({realm:a,save:l})=>{const{t}=H(),{realm:n}=ce(),s=fe(),{register:r,control:p,handleSubmit:o,setValue:T,formState:{isDirty:c,errors:h}}=s,[A,x]=m(!1),f=["all","external","none"],[g,E]=m(),i=[Ze.Disabled,Ze.Enabled,Ze.AdminView,Ze.AdminEdit],[u,k]=m(!1),S=()=>{if(Oe(a,T),a.attributes?.["acr.loa.map"]){const I=Object.entries(JSON.parse(a.attributes["acr.loa.map"])).flatMap(([y,b])=>({key:y,value:b}));I.concat({key:"",value:""}),T(kt("attributes.acr.loa.map"),I)}};return we(()=>M.users.getProfile({realm:n}),I=>E(I),[]),Ie(S,[]),e(re,{variant:"light",children:d(ae,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:o(I=>{Ze.Disabled===g?.unmanagedAttributePolicy&&(g.unmanagedAttributePolicy=void 0),l({...I,upConfig:g})}),children:[e(v,{label:t("realmId"),fieldId:"kc-realm-id",isRequired:!0,validated:h.realm?"error":"default",helperTextInvalid:h.realm?.message,children:e(O,{name:"realm",control:p,rules:{required:{value:!0,message:t("required")}},defaultValue:"",render:({field:I})=>e(sn,{"data-testid":"realmName",onChange:I.onChange,children:I.value})})}),e(v,{label:t("displayName"),fieldId:"kc-display-name",children:e(me,{id:"kc-display-name",...r("displayName")})}),e(v,{label:t("htmlDisplayName"),fieldId:"kc-html-display-name",children:e(me,{id:"kc-html-display-name",...r("displayNameHtml")})}),e(v,{label:t("frontendUrl"),fieldId:"kc-frontend-url",labelIcon:e(D,{helpText:t("frontendUrlHelp"),fieldLabelId:"frontendUrl"}),children:e(me,{type:"url",id:"kc-frontend-url",...r(kt("attributes.frontendUrl"))})}),e(v,{label:t("requireSsl"),fieldId:"kc-require-ssl",labelIcon:e(D,{helpText:t("requireSslHelp"),fieldLabelId:"requireSsl"}),children:e(O,{name:"sslRequired",defaultValue:"none",control:p,render:({field:I})=>e(oe,{toggleId:"kc-require-ssl",onToggle:()=>x(!A),onSelect:(y,b)=>{I.onChange(b),x(!1)},selections:I.value,variant:pe.single,"aria-label":t("requireSsl"),isOpen:A,children:f.map(y=>e(W,{selected:y===I.value,value:y,children:t(`sslType.${y}`)},y))})})}),e(v,{label:t("acrToLoAMapping"),fieldId:"acrToLoAMapping",labelIcon:e(D,{helpText:t("acrToLoAMappingHelp"),fieldLabelId:"acrToLoAMapping"}),children:e(Et,{...s,children:e(on,{label:t("acrToLoAMapping"),name:kt("attributes.acr.loa.map")})})}),e(v,{hasNoPaddingTop:!0,label:t("userManagedAccess"),labelIcon:e(D,{helpText:t("userManagedAccessHelp"),fieldLabelId:"userManagedAccess"}),fieldId:"kc-user-managed-access",children:e(O,{name:"userManagedAccessAllowed",control:p,defaultValue:!1,render:({field:I})=>e(de,{id:"kc-user-managed-access","data-testid":"user-managed-access-switch",label:t("on"),labelOff:t("off"),isChecked:I.value,onChange:I.onChange,"aria-label":t("userManagedAccess")})})}),e(v,{label:t("unmanagedAttributes"),fieldId:"kc-user-profile-unmanaged-attribute-policy",labelIcon:e(D,{helpText:t("unmanagedAttributesHelpText"),fieldLabelId:"unmanagedAttributes"}),children:e(oe,{toggleId:"kc-user-profile-unmanaged-attribute-policy",onToggle:()=>k(!u),onSelect:(I,y)=>{g&&(g.unmanagedAttributePolicy=y,E(g)),k(!1)},selections:g?.unmanagedAttributePolicy,variant:pe.single,isOpen:u,"aria-label":t("selectUnmanagedAttributePolicy"),children:i.map(I=>e(W,{value:I,children:t(`unmanagedAttributePolicy.${I}`)},I))})}),e(v,{label:t("endpoints"),labelIcon:e(D,{helpText:t("endpointsHelp"),fieldLabelId:"endpoints"}),fieldId:"kc-endpoints",children:d(Yt,{children:[e(Fe,{children:e(At,{href:`${Kt(M.baseUrl)}realms/${n}/.well-known/openid-configuration`,title:t("openIDEndpointConfiguration")})}),e(Fe,{children:e(At,{href:`${Kt(M.baseUrl)}realms/${n}/protocol/saml/descriptor`,title:t("samlIdentityProviderMetadata")})})]})}),d(Te,{children:[e(R,{variant:"primary",type:"submit","data-testid":"general-tab-save",isDisabled:!c,children:t("save")}),e(R,{"data-testid":"general-tab-revert",variant:"link",onClick:S,children:t("revert")})]})]})})},jt={theme:"",themeType:"",locale:"",hasWords:[]},Yn=({defaultSupportedLocales:a,defaultLocales:l})=>{const{t}=H(),{realm:n}=ce(),s=Ue(),{whoAmI:r}=it(),p=Da(),[o,T]=m(!1),[c,h]=m(!1),[A,x]=m(!1),[f,g]=m(!1),[E,i]=m(!1),[u,k]=m({}),[S,I]=m(0),y=s.themes,b=tt(()=>y?p(Object.keys(y),P=>P):[],[y]),w=tt(()=>y?p(Object.values(y).flatMap(P=>P.map(N=>N.name)).filter((P,N,Q)=>Q.indexOf(P)===N),P=>P):[],[y]),F=tt(()=>Array.from(new Set([...l,...a])),[l,a]),V={theme:t("theme"),themeType:t("themeType"),locale:t("language"),hasWords:t("hasWords")},{getValues:C,reset:_,formState:{isDirty:X,isValid:K},control:j}=fe({mode:"onChange",defaultValues:jt}),Y=async()=>{try{const P=C();if(["theme","themeType","locale"].some(xe=>!P[xe]))return[];const te=await M.serverInfo.findEffectiveMessageBundles({realm:n,...P,locale:P.locale||Pe,source:!0}),ve=P.hasWords.length>0?te.filter(xe=>P.hasWords.some(L=>xe.value.includes(L)||xe.key.includes(L))):te;return p([...ve],Ra("key"))}catch{return[]}};function ue(){T(!1),q()}function he(){_(),q()}function B(P){const N={...C()};delete N[P],_({...jt,...N}),q()}function Ve(P,N){const Q=C(),te=Q[P],ve=Array.isArray(te)?te.filter(De=>De!==N):te;_({...Q,[P]:ve}),q()}function q(){const P=bn(C(),N=>N!==""||Array.isArray(N)&&N.length>0);k(P),I(S+1)}const Le=()=>d(Rt,{direction:{default:"column"},spaceItems:{default:"spaceItemsNone"},children:[e(Ne,{children:e(st,{children:e(Re,{className:"pf-u-mb-md pf-u-mt-0 pf-u-mr-md",component:wt.p,children:t("effectiveMessageBundlesDescription")})})}),e(Ne,{children:e(gn,{buttonText:t("searchForEffectiveMessageBundles"),setSearchDropdownOpen:T,searchDropdownOpen:o,marginRight:"2.5rem",width:"15vw",children:d(rt,{isHorizontal:!0,className:"pf-u-w-25vw","data-testid":"effectiveMessageBundlesSearchForm",onSubmit:P=>P.preventDefault(),children:[e(v,{label:t("theme"),fieldId:"kc-theme",isRequired:!0,children:e(O,{name:"theme",control:j,rules:{validate:P=>(P||"").length>0},render:({field:P})=>e(oe,{name:"theme","data-testid":"effective_message_bundles-theme-searchField",chipGroupProps:{numChips:1,expandedText:t("hide"),collapsedText:t("showRemaining")},variant:pe.single,typeAheadAriaLabel:"Select",onToggle:x,selections:P.value,onSelect:(N,Q)=>{P.onChange(Q.toString()),x(!1)},onClear:N=>{N.stopPropagation(),P.onChange("")},isOpen:A,"aria-labelledby":t("theme"),chipGroupComponent:e(Qe,{children:e(We,{onClick:N=>{N.stopPropagation(),P.onChange("")},children:P.value},P.value)}),children:[e(W,{value:"Select theme",label:t("selectTheme"),className:"kc__effective_message_bundles_search_theme__placeholder",isDisabled:!0},"theme_placeholder")].concat(w.map(N=>e(W,{value:N},N)))})})}),e(v,{label:t("themeType"),fieldId:"kc-themeType",isRequired:!0,children:e(O,{name:"themeType",control:j,rules:{validate:P=>(P||"").length>0},render:({field:P})=>e(oe,{name:"themeType","data-testid":"effective-message-bundles-feature-searchField",chipGroupProps:{numChips:1,expandedText:t("hide"),collapsedText:t("showRemaining")},variant:pe.single,typeAheadAriaLabel:"Select",onToggle:g,selections:P.value,onSelect:(N,Q)=>{P.onChange(Q.toString()),g(!1)},onClear:N=>{N.stopPropagation(),P.onChange("")},isOpen:f,"aria-labelledby":t("themeType"),chipGroupComponent:e(Qe,{children:e(We,{onClick:N=>{N.stopPropagation(),P.onChange("")},children:P.value},P.value)}),children:[e(W,{value:"Select theme type",label:t("selectThemeType"),className:"pf-m-plain",isDisabled:!0},"themeType_placeholder")].concat(b.map(N=>e(W,{value:N},N)))})})}),e(v,{label:t("language"),fieldId:"kc-language",isRequired:!0,children:e(O,{name:"locale",control:j,rules:{validate:P=>(P||"").length>0},render:({field:P})=>e(oe,{name:"language","data-testid":"effective-message-bundles-language-searchField",chipGroupProps:{numChips:1,expandedText:t("hide"),collapsedText:t("showRemaining")},variant:pe.single,typeAheadAriaLabel:"Select",onToggle:i,selections:P.value,onSelect:(N,Q)=>{P.onChange(Q.toString()),i(!1)},onClear:N=>{N.stopPropagation(),P.onChange("")},isOpen:E,"aria-labelledby":"language",chipGroupComponent:e(Qe,{children:P.value?e(We,{onClick:N=>{N.stopPropagation(),P.onChange("")},children:Ae(P.value,r.getLocale())},P.value):null}),children:[e(W,{value:"Select language",label:t("selectLanguage"),className:"pf-m-plain",isDisabled:!0},"language_placeholder")].concat(F.map(N=>e(W,{value:N,children:Ae(N,r.getLocale())},N)))})})}),e(v,{label:t("hasWords"),fieldId:"kc-hasWords",children:e(O,{name:"hasWords",control:j,render:({field:P})=>d("div",{children:[e(me,{id:"kc-hasWords","data-testid":"effective-message-bundles-hasWords-searchField",value:P.value.join(" "),onChange:N=>{const te=N.target.value;if(te.trim().length===0)P.onChange([]);else{const ve=te.split(" ").map(De=>De.trim());P.onChange(ve)}}}),e(Qe,{children:P.value.map((N,Q)=>e(We,{onClick:te=>{te.stopPropagation();const ve=P.value.filter((De,xe)=>xe!==Q);P.onChange(ve)},children:N},Q))})]})})}),d(Te,{className:"pf-u-mt-sm",children:[e(R,{variant:"primary",onClick:()=>{h(!0),ue()},"data-testid":"search-effective-message-bundles-btn",isDisabled:!K,children:t("search")}),e(R,{variant:"secondary",onClick:he,"data-testid":"reset-search-effective-message-bundles-btn",isDisabled:!X,children:t("reset")})]})]})})}),e(Ne,{children:Object.entries(u).length>0&&e(J,{children:Object.entries(u).map(P=>{const[N,Q]=P;return e(Qe,{className:"pf-u-mt-md pf-u-mr-md",categoryName:V[N],isClosable:!0,onClick:()=>B(N),children:typeof Q=="string"?e(We,{isReadOnly:!0,children:N==="locale"?Ae(Q,r.getLocale())?.toLowerCase():Q}):Q.map(te=>e(We,{onClick:()=>Ve(N,te),children:te},te))},N)})})})]});return c?e(Be,{loader:Y,ariaLabelKey:"effectiveMessageBundles",toolbarItem:Le(),columns:[{name:"key",displayKey:"key"},{name:"value",displayKey:"value"}],emptyState:e(Ee,{message:t("noSearchResults"),instructions:t("noSearchResultsInstructions")}),isSearching:Object.keys(u).length>0},S):d(J,{children:[e("div",{className:"pf-u-py-lg pf-u-pl-md",children:Le()}),e(qe,{}),e(Ee,{message:t("emptyEffectiveMessageBundles"),instructions:t("emptyEffectiveMessageBundlesInstructions"),isSearchVariant:!0})]})},Qn=({handleModalToggle:a,save:l,form:{register:t,handleSubmit:n,formState:{errors:s}}})=>{const{t:r}=H();return e(je,{variant:Xe.small,title:r("AddTranslation"),isOpen:!0,onClose:a,actions:[e(R,{"data-testid":"add-translation-confirm-button",variant:"primary",type:"submit",form:"translation-form",children:r("create")},"confirm"),e(R,{id:"modal-cancel","data-testid":"cancel",variant:ie.link,onClick:()=>{a()},children:r("cancel")},"cancel")],children:d(rt,{id:"translation-form",isHorizontal:!0,onSubmit:n(l),children:[e(v,{label:r("key"),name:"key",fieldId:"key-id",helperTextInvalid:r("required"),validated:s.key?ke.error:ke.default,isRequired:!0,children:e(me,{"data-testid":"key-input",autoFocus:!0,id:"key-id",validated:s.key?ke.error:ke.default,...t("key",{required:!0})})}),e(v,{label:r("value"),name:"add-value",fieldId:"value-id",helperTextInvalid:r("required"),validated:s.value?ke.error:ke.default,isRequired:!0,children:e(me,{"data-testid":"value-input",id:"value-id",validated:s.value?ke.error:ke.default,...t("value",{required:!0})})})]})})},Zn=({internationalizationEnabled:a,watchSupportedLocales:l,realm:t})=>{const{t:n}=H(),[s,r]=m(!1),[p,o]=m(!1),[T,c]=m([]),[h,A]=m(Pe),[x,f]=m(!1),{getValues:g,handleSubmit:E}=fe(),[i,u]=m(!1),[k,S]=m([]),[I,y]=m(0),[b,w]=m(10),[F,V]=m(0),[C,_]=m(""),X=fe({mode:"onChange"}),{addAlert:K,addError:j}=be(),{realm:Y}=ce(),{whoAmI:ue}=it(),[he,B]=m([]),[Ve,q]=m(!1),[Le,P]=m({}),[N,Q]=m(""),te=()=>{y(I+1)};Ie(()=>{(async()=>{try{let G=await M.realms.getRealmLocalizationTexts({first:F,max:b,realm:t.realm,selectedLocale:h||g("defaultLocale")||ue.getLocale()});if(C){const se=Ke=>Object.entries(G).filter(yt=>yt[Ke].includes(C)),ne=qn(se(0).concat(se(1)),sa);G=Object.fromEntries(ne)}return Object.entries(G).slice(F,F+b)}catch{return[]}})().then(G=>{c(G);const se=G.map(ne=>({rowEditBtnAriaLabel:()=>n("rowEditBtnAriaLabel",{translation:ne[1]}),rowSaveBtnAriaLabel:()=>n("rowSaveBtnAriaLabel",{translation:ne[1]}),rowCancelBtnAriaLabel:()=>n("rowCancelBtnAriaLabel",{translation:ne[1]}),cells:[{title:ne[0],props:{value:ne[0]}},{title:ne[1],props:{value:ne[1]}}]}));S(se)})},[I,F,b,C]);const ve=()=>{r(!s)},De=[e(Mt,{label:n("defaultLocale"),children:e(W,{value:Pe,children:Ae(Pe,ue.getDisplayName())},Pe)},"group1"),e(qe,{},"divider"),e(Mt,{label:n("supportedLocales"),children:l.map(U=>e(W,{value:U,children:Ae(U,ue.getLocale())},U))},"group2")],xe=async U=>{try{await M.realms.addLocalization({realm:Y,selectedLocale:h||g("defaultLocale")||Pe,key:U.key},U.value),M.setConfig({realmName:Y}),te(),X.setValue("key",""),X.setValue("value",""),K(n("addTranslationSuccess"),le.success)}catch(G){j(n("addTranslationError"),G)}},[L,Z]=ge({titleKey:"deleteConfirmTranslationTitle",messageKey:n("translationDeleteConfirmDialog",{count:he.length}),continueButtonLabel:"delete",continueButtonVariant:ie.danger,onCancel:()=>{B([]),q(!1)},onConfirm:async()=>{try{for(const U of he)await M.realms.deleteRealmLocalizationTexts({realm:Y,selectedLocale:h,key:U});q(!1),B([]),te(),K(n("deleteAllTranslationsSuccess"),le.success)}catch(U){j("deleteAllTranslationsError",U)}}}),_e=(U,G)=>{const se=(k[G].cells?.[0]).props.value;U.target.checked?B(ne=>[...ne,se]):B(ne=>ne.filter(Ke=>Ke!==se)),q(k.length===he.length+(U.target.checked?1:-1))},ga=()=>{B(Ve?[]:k.map(U=>(U.cells?.[0]).props.value)),q(!Ve)},ba=U=>he.includes(U),va=async(U,G)=>{const se=Ft(k),ne=Ft(se[G]);(ne.cells?.[1]).props.value=U,se[G]=ne;try{const Ke=(ne.cells?.[0]).props.value,yt=(ne.cells?.[1]).props.value;await M.realms.addLocalization({realm:t.realm,selectedLocale:h||g("defaultLocale")||Pe,key:Ke},yt),K(n("updateTranslationSuccess"),le.success),S(se)}catch{K(n("updateTranslationError"),le.danger)}P(Ke=>({...Ke,[G]:!1}))};return d(J,{children:[e(Z,{}),s&&e(Qn,{handleModalToggle:ve,save:U=>{xe(U),ve()},form:X}),e(st,{children:e(Re,{className:"pf-u-mt-lg pf-u-ml-md",component:wt.p,children:n("realmOverridesDescription")})}),d(dn,{count:T.length,first:F,max:b,onNextClick:V,onPreviousClick:V,onPerPageSelect:(U,G)=>{V(U),w(G)},inputGroupName:"search",inputGroupOnEnter:U=>{_(U),V(0),w(10)},inputGroupPlaceholder:n("searchForTranslation"),toolbarItem:d(J,{children:[e(R,{"data-testid":"add-translationBtn",onClick:()=>{r(!0),q(!1),B([])},children:n("addTranslation")}),e(Se,{children:e(Qt,{toggle:e(Zt,{onToggle:()=>f(!x)}),isOpen:x,isPlain:!0,"data-testid":"toolbar-deleteBtn",dropdownItems:[e(at,{component:"button","data-testid":"delete-selected-TranslationBtn",isDisabled:T.length===0||he.length===0,onClick:()=>{L(),f(!1)},children:n("delete")},"action")]})})]}),searchTypeComponent:e(Se,{children:e(oe,{width:180,isOpen:p,className:"kc-filter-by-locale-select",variant:pe.single,isDisabled:!a,onToggle:U=>o(U),onSelect:(U,G)=>{A(G.toString()),u(!0),te(),o(!1)},selections:i?Ae(h,ue.getLocale()):t.defaultLocale!==""?Ae(Pe,ue.getLocale()):n("placeholderText"),children:De})}),children:[T.length===0&&!C&&e(Ee,{hasIcon:!0,message:n("noTranslations"),instructions:n("noTranslationsInstructions"),onPrimaryAction:ve}),T.length===0&&C&&e(Ee,{hasIcon:!0,icon:ea,isSearchVariant:!0,message:n("noSearchResults"),instructions:n("noRealmOverridesSearchResultsInstructions")}),T.length!==0&&d(un,{"aria-label":n("editableRowsTable"),"data-testid":"editable-rows-table",children:[e(mn,{children:d($t,{children:[e(ct,{className:"pf-u-px-lg",children:e("input",{type:"checkbox","aria-label":n("selectAll"),checked:Ve,onChange:ga,"data-testid":"selectAll"})}),e(ct,{className:"pf-u-py-lg",children:n("key")}),e(ct,{className:"pf-u-py-lg",children:n("value")}),e(ct,{"aria-hidden":"true"})]})}),e(pn,{children:k.map((U,G)=>d($t,{children:[e(dt,{className:"pf-u-px-lg",select:{rowIndex:G,onSelect:se=>_e(se,G),isSelected:ba((U.cells?.[0]).props.value)}}),e(dt,{className:"pf-m-sm pf-u-px-sm",dataLabel:n("key"),children:(U.cells?.[0]).props.value}),e(dt,{className:"pf-m-sm pf-u-px-sm",dataLabel:n("value"),children:e(rt,{isHorizontal:!0,className:"kc-form-translationValue",onSubmit:E(()=>{va(N,G)}),children:e(v,{fieldId:"kc-translationValue",className:"pf-u-display-inline-block",children:Le[G]?d(J,{children:[e(me,{"aria-label":n("editTranslationValue"),type:"text",className:"pf-u-w-initial","data-testid":`editTranslationValueInput-${G}`,value:N,onChange:se=>{Q(se.target.value)}},`edit-input-${G}`),e(R,{variant:"link",className:"pf-m-plain","data-testid":`editTranslationAcceptBtn-${G}`,type:"submit","aria-label":n("acceptBtn"),icon:e(Na,{})}),e(R,{variant:"link",className:"pf-m-plain","data-testid":`editTranslationCancelBtn-${G}`,icon:e(Oa,{}),"aria-label":n("cancelBtn"),onClick:()=>{P(se=>({...se,[G]:!1}))}})]}):d(J,{children:[e("span",{children:(U.cells?.[1]).props.value}),e(R,{onClick:()=>{const se=(k[G].cells?.[1]).props.value;Q(se),P(ne=>({...ne,[G]:!0}))},"aria-label":n("editBtn"),variant:"link",className:"pf-m-plain","data-testid":`editTranslationBtn-${G}`,children:e(hn,{})},`edit-button-${G}`)]})})})},G),e(dt,{isActionCell:!0,children:e(fn,{items:[{title:n("delete"),onClick:()=>{B([(U.cells?.[0]).props.value]),T.length===1&&q(!0),L(),f(!1)}}]})})]},(U.cells?.[0]).props.value))})]})]})]})},el=({save:a,realm:l})=>{const{t}=H(),{whoAmI:n}=it(),[s,r]=m(0),{setValue:p,control:o,handleSubmit:T,formState:c}=fe(),[h,A]=m(!1),[x,f]=m(!1),g=l.supportedLocales?.length?l.supportedLocales:[Pe],E=Ue().themes,i=tt(()=>{const y=Object.values(E).flatMap(b=>b.flatMap(({locales:w})=>w||[]));return Array.from(new Set(y))},[E]),u=()=>{Oe(l,p),p("supportedLocales",g)};Ie(u,[]);const k=He({control:o,name:"supportedLocales",defaultValue:g}),S=He({control:o,name:"internationalizationEnabled",defaultValue:l.internationalizationEnabled}),I=He({name:"defaultLocale",control:o,defaultValue:l.defaultLocale?[l.defaultLocale]:[]});return d(vt,{activeKey:s,onSelect:(y,b)=>r(b),children:[e(z,{id:"locales",eventKey:0,title:e($,{children:t("locales")}),"data-testid":"rs-localization-locales-tab",children:d(ae,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg pf-u-ml-md",onSubmit:T(a),children:[e(v,{label:t("internationalization"),fieldId:"kc-internationalization",labelIcon:e(D,{helpText:t("internationalizationHelp"),fieldLabelId:"internationalization"}),children:e(O,{name:"internationalizationEnabled",control:o,defaultValue:l.internationalizationEnabled,render:({field:y})=>e(de,{id:"kc-l-internationalization",className:"pf-u-mt-sm",label:t("enabled"),labelOff:t("disabled"),isChecked:y.value,"data-testid":y.value?"internationalization-enabled":"internationalization-disabled",onChange:y.onChange,"aria-label":t("internationalization")})})}),S&&d(J,{children:[e(v,{label:t("supportedLocales"),fieldId:"kc-l-supported-locales",children:e(O,{name:"supportedLocales",control:o,defaultValue:g,render:({field:y})=>e(oe,{toggleId:"kc-l-supported-locales",onToggle:b=>{A(b)},onSelect:(b,w)=>{const F=w;y.value.includes(F)?y.onChange(y.value.filter(V=>V!==F)):y.onChange([...y.value,F])},onClear:()=>{y.onChange([])},selections:y.value,variant:pe.typeaheadMulti,"aria-label":t("supportedLocales"),isOpen:h,placeholderText:t("selectLocales"),children:i.map(b=>e(W,{selected:y.value.includes(b),value:b,children:Ae(b,n.getLocale())},b))})})}),e(v,{label:t("defaultLocale"),fieldId:"kc-l-default-locale",children:e(O,{name:"defaultLocale",control:o,defaultValue:Pe,render:({field:y})=>e(oe,{toggleId:"kc-default-locale",onToggle:()=>f(!x),onSelect:(b,w)=>{y.onChange(w),f(!1)},selections:y.value?Ae(y.value,n.getLocale()):l.defaultLocale!==""?Ae(l.defaultLocale||Pe,n.getLocale()):t("placeholderText"),variant:pe.single,"aria-label":t("defaultLocale"),isOpen:x,placeholderText:t("placeholderText"),"data-testid":"select-default-locale",children:k.map((b,w)=>e(W,{value:b,children:Ae(b,n.getLocale())},`default-locale-${w}`))})})})]}),d(Te,{children:[e(R,{variant:"primary",isDisabled:!c.isDirty,type:"submit","data-testid":"localization-tab-save",children:t("save")}),e(R,{variant:"link",onClick:u,children:t("revert")})]})]})}),e(z,{id:"realm-overrides",eventKey:1,title:d($,{children:[t("realmOverrides")," "]}),"data-testid":"rs-localization-realm-overrides-tab",children:e(Zn,{internationalizationEnabled:S,watchSupportedLocales:k,realm:l})}),e(z,{id:"effective-message-bundles",eventKey:2,title:e($,{children:t("effectiveMessageBundles")}),"data-testid":"rs-localization-effective-message-bundles-tab",children:e(Yn,{defaultSupportedLocales:g,defaultLocales:I})})]})},tl=({realm:a,refresh:l})=>{const{t}=H(),{addAlert:n,addError:s}=be(),{realm:r}=ce(),p=async o=>{const T=Array.isArray(o)?Object.keys(o[0])[0]:Object.keys(o)[0];try{await M.realms.update({realm:r},Array.isArray(o)?o.reduce((c,h)=>Object.assign(c,h),a):Object.assign(a,o)),n(t("enableSwitchSuccess",{switch:t(T)})),l()}catch(c){s(t("enableSwitchError"),c)}};return d(re,{variant:"light",children:[e(ye,{className:"kc-login-screen",title:t("loginScreenCustomization"),children:d(ae,{isHorizontal:!0,role:"manage-realm",children:[e(v,{label:t("registrationAllowed"),fieldId:"kc-user-reg",labelIcon:e(D,{helpText:t("userRegistrationHelpText"),fieldLabelId:"registrationAllowed"}),hasNoPaddingTop:!0,children:e(de,{id:"kc-user-reg-switch","data-testid":"user-reg-switch",value:a.registrationAllowed?"on":"off",label:t("on"),labelOff:t("off"),isChecked:a.registrationAllowed,onChange:o=>{p({registrationAllowed:o})},"aria-label":t("registrationAllowed")})}),e(v,{label:t("resetPasswordAllowed"),fieldId:"kc-forgot-pw",labelIcon:e(D,{helpText:t("forgotPasswordHelpText"),fieldLabelId:"resetPasswordAllowed"}),hasNoPaddingTop:!0,children:e(de,{id:"kc-forgot-pw-switch","data-testid":"forgot-pw-switch",name:"resetPasswordAllowed",value:a.resetPasswordAllowed?"on":"off",label:t("on"),labelOff:t("off"),isChecked:a.resetPasswordAllowed,onChange:o=>{p({resetPasswordAllowed:o})},"aria-label":t("resetPasswordAllowed")})}),e(v,{label:t("rememberMe"),fieldId:"kc-remember-me",labelIcon:e(D,{helpText:t("rememberMeHelpText"),fieldLabelId:"rememberMe"}),hasNoPaddingTop:!0,children:e(de,{id:"kc-remember-me-switch","data-testid":"remember-me-switch",value:a.rememberMe?"on":"off",label:t("on"),labelOff:t("off"),isChecked:a.rememberMe,onChange:o=>{p({rememberMe:o})},"aria-label":t("rememberMe")})})]})}),e(ye,{className:"kc-email-settings",title:t("emailSettings"),children:d(ae,{isHorizontal:!0,role:"manage-realm",children:[e(v,{label:t("registrationEmailAsUsername"),fieldId:"kc-email-as-username",labelIcon:e(D,{helpText:t("emailAsUsernameHelpText"),fieldLabelId:"registrationEmailAsUsername"}),hasNoPaddingTop:!0,children:e(de,{id:"kc-email-as-username-switch","data-testid":"email-as-username-switch",value:a.registrationEmailAsUsername?"on":"off",label:t("on"),labelOff:t("off"),isChecked:a.registrationEmailAsUsername,onChange:o=>{p([{registrationEmailAsUsername:o},{duplicateEmailsAllowed:!1}])},"aria-label":t("registrationEmailAsUsername")})}),e(v,{label:t("loginWithEmailAllowed"),fieldId:"kc-login-with-email",labelIcon:e(D,{helpText:t("loginWithEmailHelpText"),fieldLabelId:"loginWithEmailAllowed"}),hasNoPaddingTop:!0,children:e(de,{id:"kc-login-with-email-switch","data-testid":"login-with-email-switch",value:a.loginWithEmailAllowed?"on":"off",label:t("on"),labelOff:t("off"),isChecked:a.loginWithEmailAllowed,onChange:o=>{p([{loginWithEmailAllowed:o},{duplicateEmailsAllowed:!1}])},"aria-label":t("loginWithEmailAllowed")})}),e(v,{label:t("duplicateEmailsAllowed"),fieldId:"kc-duplicate-emails",labelIcon:e(D,{helpText:t("duplicateEmailsHelpText"),fieldLabelId:"duplicateEmailsAllowed"}),hasNoPaddingTop:!0,children:e(de,{id:"kc-duplicate-emails-switch","data-testid":"duplicate-emails-switch",label:t("on"),labelOff:t("off"),isChecked:a.duplicateEmailsAllowed||a.loginWithEmailAllowed&&a.registrationEmailAsUsername,onChange:o=>{p({duplicateEmailsAllowed:o})},isDisabled:a.loginWithEmailAllowed||a.registrationEmailAsUsername,"aria-label":t("duplicateEmailsAllowed")})}),e(v,{label:t("verifyEmail"),fieldId:"kc-verify-email",labelIcon:e(D,{helpText:t("verifyEmailHelpText"),fieldLabelId:"verifyEmail"}),hasNoPaddingTop:!0,children:e(de,{id:"kc-verify-email-switch","data-testid":"verify-email-switch",name:"verifyEmail",value:a.verifyEmail?"on":"off",label:t("on"),labelOff:t("off"),isChecked:a.verifyEmail,onChange:o=>{p({verifyEmail:o})},"aria-label":t("verifyEmail")})})]})}),e(ye,{className:"kc-user-info-settings",title:t("userInfoSettings"),children:e(ae,{isHorizontal:!0,role:"manage-realm",children:e(v,{label:t("editUsernameAllowed"),fieldId:"kc-edit-username",labelIcon:e(D,{helpText:t("editUsernameHelp"),fieldLabelId:"editUsernameAllowed"}),hasNoPaddingTop:!0,children:e(de,{id:"kc-edit-username-switch","data-testid":"edit-username-switch",value:a.editUsernameAllowed?"on":"off",label:t("on"),labelOff:t("off"),isChecked:a.editUsernameAllowed,onChange:o=>{p({editUsernameAllowed:o})},"aria-label":t("editUsernameAllowed")})})})})]})},al=({isOpen:a,onClose:l})=>{const{t}=H(),{realm:n}=ce(),{addAlert:s,addError:r}=be(),[p,o]=m(!1),[T,c]=m(!1),[h,A]=m(!1),x=p||T;async function f(){A(!0);try{const g=await M.realms.export({realm:n,exportClients:T,exportGroupsAndRoles:p});Va.saveAs(new Blob([lt(g)],{type:"application/json"}),"realm-export.json"),s(t("exportSuccess"),le.success),l()}catch(g){r("exportFail",g)}A(!1)}return d(je,{variant:Xe.small,title:t("partialExport"),isOpen:a,onClose:l,actions:[e(R,{"data-testid":"export-button",isDisabled:h,onClick:f,children:t("export")},"export"),e(R,{"data-testid":"cancel-button",variant:ie.link,onClick:l,children:t("cancel")},"cancel")],children:[e(st,{children:e(Re,{children:t("partialExportHeaderText")})}),d(rt,{isHorizontal:!0,className:"keycloak__realm-settings__partial-import_form",children:[e(v,{label:t("includeGroupsAndRoles"),fieldId:"include-groups-and-roles-check",hasNoPaddingTop:!0,children:e(de,{id:"include-groups-and-roles-check","data-testid":"include-groups-and-roles-check",isChecked:p,onChange:o,label:t("on"),labelOff:t("off"),"aria-label":t("includeGroupsAndRoles")})}),e(v,{label:t("includeClients"),fieldId:"include-clients-check",hasNoPaddingTop:!0,children:e(de,{id:"include-clients-check","data-testid":"include-clients-check",onChange:c,isChecked:T,label:t("on"),labelOff:t("off"),"aria-label":t("includeClients")})})]}),x&&e(pt,{"data-testid":"warning-message",variant:"warning",component:"p",title:t("exportWarningTitle"),isInline:!0,children:t("exportWarningDescription")})]})},qt={users:!1,clients:!1,groups:!1,identityProviders:!1,realmRoles:!1,clientRoles:!1},nl=a=>{const{t:l}=H(),{realm:t}=ce(),[n,s]=m(),r=!!n,[p,o]=m(!1),[T,c]=m(!1),[h,A]=m(!1),[x,f]=m("FAIL"),[g,E]=m({}),[i,u]=m(),{addError:k}=be(),[S,I]=m(qt),y=Object.values(S).some(L=>L),b=()=>{I(qt)},w=()=>{s(void 0),E({}),f("FAIL"),b()};Ie(()=>{A(!1),u(void 0),w()},[a.open]);const F=L=>{w(),s(L),Array.isArray(L)?L.length>0&&E(L[0]):E(L)},V=L=>{E(L),o(!1),b()},C=(L,Z)=>{const _e=Z.currentTarget.name;I({...S,[_e]:L})},_=L=>L.map(Z=>e(W,{value:Z,"data-testid":Z.id+"-select-option",children:Z.realm||Z.id},Z.id)),X=(L,Z)=>{f(Z),c(!1)},K=()=>[e(W,{value:"FAIL",children:l("FAIL")},"fail"),e(W,{value:"SKIP",children:l("SKIP")},"skip"),e(W,{value:"OVERWRITE",children:l("OVERWRITE")},"overwrite")],j=()=>Y("users")||Y("groups")||Y("clients")||Y("identityProviders")||ue()||he(),Y=L=>{const Z=g[L];return Z!==void 0&&Z.length>0},ue=()=>{const L=g.roles?.realm;return L!==void 0&&L.length>0},he=()=>{const L=g.roles?.client;return L!==void 0&&Object.keys(L).length>0},B=L=>r?L==="realmRoles"?g.roles?.realm?.length??0:L==="clientRoles"?he()?Ve(g.roles.client):0:g[L]?.length??0:0,Ve=L=>Object.values(L).reduce((Z,_e)=>Z+_e.length,0),q=(L,Z)=>e(ca,{"aria-labelledby":`${L}-list-item`,children:e(da,{children:e(ua,{dataListCells:[e(xt,{children:e(It,{id:`${L}-checkbox`,label:`${B(L)} ${Z}`,"aria-labelledby":`${L}-checkbox`,name:L,isChecked:S[L],onChange:C,"data-testid":L+"-checkbox"})},L)]})})}),Le=()=>{const L={ifResourceExists:x,id:g.id,realm:g.realm};return S.users&&(L.users=g.users),S.groups&&(L.groups=g.groups),S.identityProviders&&(L.identityProviders=g.identityProviders),S.clients&&(L.clients=g.clients),(S.realmRoles||S.clientRoles)&&(L.roles=g.roles,S.realmRoles||delete L.roles?.realm,S.clientRoles||delete L.roles?.client),L};async function P(){if(!h){A(!0);try{const L=await M.realms.partialImport({realm:t,rep:Le()});u(L)}catch(L){k("importFail",L)}A(!1)}}const N=()=>e(je,{variant:Xe.medium,title:l("partialImport"),isOpen:a.open,onClose:a.toggleDialog,actions:[e(R,{id:"modal-import","data-testid":"import-button",isDisabled:!y,onClick:()=>{P()},children:l("import")},"import"),e(R,{id:"modal-cancel","data-testid":"cancel-button",variant:ie.link,onClick:()=>{a.toggleDialog()},children:l("cancel")},"cancel")],children:d(Yt,{hasGutter:!0,children:[e(Fe,{children:e(st,{children:e(Re,{children:l("partialImportHeaderText")})})}),e(Fe,{children:e(Tn,{id:"partial-import-file",allowEditingUploadedText:!0,onChange:F})}),r&&j()&&d(J,{children:[e(Fe,{children:e(qe,{})}),Array.isArray(n)&&n.length>1&&d(Fe,{children:[d(Re,{children:[l("selectRealm"),":"]}),e(oe,{toggleId:"realm-selector",isOpen:p,typeAheadAriaLabel:l("realmSelector"),"aria-label":"realmSelector",onToggle:()=>o(!p),onSelect:(L,Z)=>V(Z),placeholderText:g.realm||g.id,children:_(n)})]}),d(Fe,{children:[d(Re,{children:[l("chooseResources"),":"]}),d(oa,{"aria-label":l("resourcesToImport"),isCompact:!0,children:[Y("users")&&q("users",l("users")),Y("groups")&&q("groups",l("groups")),Y("clients")&&q("clients",l("clients")),Y("identityProviders")&&q("identityProviders",l("identityProviders")),ue()&&q("realmRoles",l("realmRoles")),he()&&q("clientRoles",l("clientRoles"))]})]}),d(Fe,{children:[d(Re,{children:[l("selectIfResourceExists"),":"]}),e(oe,{isOpen:T,direction:"up",onToggle:()=>{c(!T)},onSelect:X,placeholderText:l(x),children:K()})]})]})]})}),Q=()=>`${l("importAdded",{count:i?.added})}  ${l("importSkipped",{count:i?.skipped})} ${l("importOverwritten",{count:i?.overwritten})}`,te=async(L=0,Z=15)=>{if(!i)return[];const _e=Math.min(L+Z,i.results.length);return i.results.slice(L,_e)},ve=L=>{switch(L.action){case"ADDED":return e(mt,{color:"green",children:l("added")},L.id);case"SKIPPED":return e(mt,{color:"orange",children:l("skipped")},L.id);case"OVERWRITTEN":return e(mt,{color:"purple",children:l("overwritten")},L.id);default:return""}},De=L=>{const Z=new Map([["CLIENT",l("clients")],["REALM_ROLE",l("realmRoles")],["USER",l("users")],["CLIENT_ROLE",l("clientRoles")],["IDP",l("identityProviders")],["GROUP",l("groups")]]);return e("span",{children:Z.get(L.resourceType)})},xe=()=>d(je,{variant:Xe.medium,title:l("partialImport"),isOpen:a.open,onClose:a.toggleDialog,actions:[e(R,{id:"modal-close","data-testid":"close-button",variant:ie.primary,onClick:()=>{a.toggleDialog()},children:l("close")},"close")],children:[e(pt,{variant:"success",component:"p",isInline:!0,title:Q()}),e(Be,{loader:te,isPaginated:!0,ariaLabelKey:"partialImport",columns:[{name:"action",displayKey:"action",cellRenderer:ve},{name:"resourceType",displayKey:"type",cellRenderer:De},{name:"resourceName",displayKey:"name"},{name:"id",displayKey:"id"}]})]});return i?xe():N()},ll=()=>{const{t:a}=H(),{addAlert:l,addError:t}=be(),{realm:n}=ce(),s=Ye(),[r,p]=m(!1),[o,T]=m(),[c,h]=m(),[A,x]=m(0),[f,g]=m(),[E,i]=m(),u=()=>x(A+1),k=fe({mode:"onChange"});we(()=>M.clientPolicies.listPolicies(),C=>{T(C.policies),i(C.policies||[]),g(lt(C.policies))},[A]);const S=async()=>o??[],I=async()=>{const C=k.getValues(),_=o?.map(X=>{const K=C[X.name];return{...X,enabled:K}});try{await M.clientPolicies.updatePolicy({policies:_}),s(Lt({realm:n,tab:"policies"})),l(a("updateClientPolicySuccess"),le.success)}catch(X){t("updateClientPolicyError",X)}},y=({name:C})=>e(Ce,{to:Ka({realm:n,policyName:C}),children:C}),b=({clientPolicy:C})=>{const[_,X]=ge({titleKey:"disablePolicyConfirmTitle",messageKey:"disablePolicyConfirm",continueButtonLabel:"disable",onConfirm:()=>{k.setValue(C.name,!1),I()}});return d(J,{children:[e(X,{}),e(O,{name:C.name,"data-testid":`${C.name}-switch`,defaultValue:C.enabled,control:k.control,render:({field:K})=>e(de,{label:a("enabled"),labelOff:a("disabled"),isChecked:K.value,onChange:j=>{j?(K.onChange(j),I()):_()},"aria-label":C.name})})]})},w=async()=>{if(f)try{const C=JSON.parse(f);try{await M.clientPolicies.updatePolicy({policies:C}),l(a("updateClientPoliciesSuccess"),le.success),u()}catch(_){t("updateClientPoliciesError",_)}}catch(C){console.warn("Invalid json, ignoring value using {}"),t("updateClientPoliciesError",C)}},[F,V]=ge({titleKey:a("deleteClientPolicyConfirmTitle"),messageKey:a("deleteClientPolicyConfirm",{policyName:c?.name}),continueButtonLabel:a("delete"),continueButtonVariant:ie.danger,onConfirm:async()=>{const C=o?.filter(_=>_.name!==c?.name);try{await M.clientPolicies.updatePolicy({policies:C}),l(a("deleteClientPolicySuccess"),le.success),u()}catch(_){t(a("deleteClientPolicyError"),_)}}});return o?d(J,{children:[e(V,{}),e(re,{children:d(Rt,{className:"kc-policies-config-section",children:[e(Ne,{children:e(ta,{headingLevel:"h1",size:"md",children:a("policiesConfigType")})}),e(Ne,{children:e(ht,{isChecked:!r,name:"policiesView",onChange:()=>p(!1),label:a("policiesConfigTypes.formView"),id:"formView-policiesView","data-testid":"formView-policiesView",className:"kc-form-radio-btn pf-u-mr-sm pf-u-ml-sm"})}),e(Ne,{children:e(ht,{isChecked:r,name:"policiesView",onChange:()=>p(!0),label:a("policiesConfigTypes.jsonEditor"),id:"jsonEditor-policiesView","data-testid":"jsonEditor-policiesView",className:"kc-editor-radio-btn"})})]})}),e(qe,{}),r?d(J,{children:[e("div",{className:"pf-u-mt-md pf-u-ml-lg",children:e(Nt,{isLineNumbersVisible:!0,isLanguageLabelVisible:!0,isReadOnly:!1,code:f,language:Ot.json,height:"30rem",onChange:g})}),d("div",{className:"pf-u-mt-md",children:[e(R,{variant:ie.primary,className:"pf-u-mr-md pf-u-ml-lg","data-testid":"jsonEditor-policies-saveBtn",onClick:w,children:a("save")}),e(R,{variant:ie.link,"data-testid":"jsonEditor-reloadBtn",onClick:()=>{g(lt(E))},children:a("reload")})]})]}):e(Be,{emptyState:e(Ee,{message:a("noClientPolicies"),instructions:a("noClientPoliciesInstructions"),primaryActionText:a("createClientPolicy"),onPrimaryAction:()=>s(Ht({realm:n}))}),ariaLabelKey:"clientPolicies",searchPlaceholderKey:"clientPolicySearch",loader:S,toolbarItem:e(Se,{children:e(R,{id:"createPolicy",component:C=>e(Ce,{...C,to:Ht({realm:n})}),"data-testid":"createPolicy",children:a("createClientPolicy")})}),actions:[{title:a("delete"),onRowClick:C=>{F(),h(C)}}],columns:[{name:"name",cellRenderer:y},{name:"enabled",displayKey:"status",cellRenderer:C=>e(b,{clientPolicy:C})},{name:"description"}]},o.length)]}):e(Ge,{})};function il(){const{t:a}=H(),{realm:l}=ce(),{addAlert:t,addError:n}=be(),[s,r]=m(),[p,o]=m(),[T,c]=m(),[h,A]=m(!1),[x,f]=m(),[g,E]=m(0);we(()=>M.clientPolicies.listProfiles({includeGlobalProfiles:!0}),b=>{o(b.globalProfiles);const w=b.globalProfiles?.map(C=>({...C,global:!0})),F=b.profiles?.map(C=>({...C,global:!1})),V=w?.concat(F??[]);r(V||[]),f(JSON.stringify(V,null,2))},[g]);const i=async()=>s??[],u=b=>jn(b,"global"),[k,S]=ge({titleKey:a("deleteClientProfileConfirmTitle"),messageKey:a("deleteClientProfileConfirm",{profileName:T?.name}),continueButtonLabel:a("delete"),continueButtonVariant:ie.danger,onConfirm:async()=>{const b=s?.filter(w=>w.name!==T?.name&&!w.global).map(w=>u(w));try{await M.clientPolicies.createProfiles({profiles:b,globalProfiles:p}),t(a("deleteClientSuccess"),le.success),E(g+1)}catch(w){n(a("deleteClientError"),w)}}}),I=b=>d(Ce,{to:Fa({realm:l,profileName:b.name}),children:[b.name," ",b.global&&e(mt,{color:"blue",children:a("global")})]},b.name);if(!s)return e(Ge,{});const y=async()=>{if(x)try{const b=JSON.parse(x),w=b.filter(V=>!V.global).map(V=>u(V)),F=b.filter(V=>V.global).map(V=>u(V));try{await M.clientPolicies.createProfiles({profiles:w,globalProfiles:F}),t(a("updateClientProfilesSuccess"),le.success),E(g+1)}catch(V){n("updateClientProfilesError",V)}}catch{console.warn("Invalid json, ignoring value using {}")}};return d(J,{children:[e(S,{}),e(re,{children:d(Rt,{className:"kc-profiles-config-section",children:[e(Ne,{children:e(ta,{headingLevel:"h1",size:"md",children:a("profilesConfigType")})}),e(Ne,{children:e(ht,{isChecked:!h,name:"profilesView",onChange:()=>A(!1),label:a("profilesConfigTypes.formView"),id:"formView-profilesView",className:"kc-form-radio-btn pf-u-mr-sm pf-u-ml-sm","data-testid":"formView-profilesView"})}),e(Ne,{children:e(ht,{isChecked:h,name:"profilesView",onChange:()=>A(!0),label:a("profilesConfigTypes.jsonEditor"),id:"jsonEditor-profilesView",className:"kc-editor-radio-btn","data-testid":"jsonEditor-profilesView"})})]})}),e(qe,{}),h?d(v,{fieldId:"jsonEditor",children:[e("div",{className:"pf-u-mt-md pf-u-ml-lg",children:e(Nt,{isLineNumbersVisible:!0,isLanguageLabelVisible:!0,isReadOnly:!1,code:x,language:Ot.json,height:"30rem",onChange:b=>{f(b??"")}})}),e(Te,{children:d("div",{className:"pf-u-mt-md",children:[e(R,{variant:ie.primary,className:"pf-u-mr-md pf-u-ml-lg",onClick:y,"data-testid":"jsonEditor-saveBtn",children:a("save")}),e(R,{variant:ie.link,onClick:()=>{f(lt(s))},"data-testid":"jsonEditor-reloadBtn",children:a("reload")})]})})]}):e(Be,{ariaLabelKey:"profiles",searchPlaceholderKey:"clientProfileSearch",loader:i,toolbarItem:e(Se,{children:e(R,{id:"createProfile",component:b=>e(Ce,{...b,to:Ma({realm:l,tab:"profiles"})}),"data-testid":"createProfile",children:a("createClientProfile")})}),isRowDisabled:b=>b.global,actions:[{title:a("delete"),onRowClick:b=>{c(b),k()}}],columns:[{name:"name",displayKey:a("name"),cellRenderer:I},{name:"description",displayKey:a("clientProfileDescription")}],emptyState:e(Ee,{message:a("emptyClientProfiles"),instructions:a("emptyClientProfilesInstructions")})},s.length)]})}const sl=({realm:a,save:l})=>{const{t}=H(),{setValue:n,control:s,handleSubmit:r,formState:p}=fe(),o=He({control:s,name:"offlineSessionMaxLifespanEnabled"}),T=()=>{Oe(a,n)};return Ie(T,[]),d(re,{variant:"light",children:[e(ye,{title:t("SSOSessionSettings"),className:"kc-sso-session-template",children:d(ae,{isHorizontal:!0,role:"manage-realm",onSubmit:r(l),children:[e(v,{label:t("SSOSessionIdle"),fieldId:"SSOSessionIdle",labelIcon:e(D,{helpText:t("ssoSessionIdle"),fieldLabelId:"SSOSessionIdle"}),children:e(O,{name:"ssoSessionIdleTimeout",defaultValue:a.ssoSessionIdleTimeout,control:s,render:({field:c})=>e(ee,{className:"kc-sso-session-idle","data-testid":"sso-session-idle-input",value:c.value,onChange:c.onChange,units:["minute","hour","day"]})})}),e(v,{label:t("SSOSessionMax"),fieldId:"SSOSessionMax",labelIcon:e(D,{helpText:t("ssoSessionMax"),fieldLabelId:"SSOSessionMax"}),children:e(O,{name:"ssoSessionMaxLifespan",control:s,render:({field:c})=>e(ee,{className:"kc-sso-session-max","data-testid":"sso-session-max-input",value:c.value,onChange:c.onChange,units:["minute","hour","day"]})})}),e(v,{label:t("SSOSessionIdleRememberMe"),fieldId:"SSOSessionIdleRememberMe",labelIcon:e(D,{helpText:t("ssoSessionIdleRememberMe"),fieldLabelId:"SSOSessionIdleRememberMe"}),children:e(O,{name:"ssoSessionIdleTimeoutRememberMe",control:s,render:({field:c})=>e(ee,{className:"kc-sso-session-idle-remember-me","data-testid":"sso-session-idle-remember-me-input",value:c.value,onChange:c.onChange,units:["minute","hour","day"]})})}),e(v,{label:t("SSOSessionMaxRememberMe"),fieldId:"SSOSessionMaxRememberMe",labelIcon:e(D,{helpText:t("ssoSessionMaxRememberMe"),fieldLabelId:"SSOSessionMaxRememberMe"}),children:e(O,{name:"ssoSessionMaxLifespanRememberMe",control:s,render:({field:c})=>e(ee,{className:"kc-sso-session-max-remember-me","data-testid":"sso-session-max-remember-me-input",value:c.value,onChange:c.onChange,units:["minute","hour","day"]})})})]})}),e(ye,{title:t("clientSessionSettings"),className:"kc-client-session-template",children:d(ae,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:r(l),children:[e(v,{label:t("clientSessionIdle"),fieldId:"clientSessionIdle",labelIcon:e(D,{helpText:t("clientSessionIdleHelp"),fieldLabelId:"clientSessionIdle"}),children:e(O,{name:"clientSessionIdleTimeout",control:s,render:({field:c})=>e(ee,{className:"kc-client-session-idle","data-testid":"client-session-idle-input",value:c.value,onChange:c.onChange,units:["minute","hour","day"]})})}),e(v,{label:t("clientSessionMax"),fieldId:"clientSessionMax",labelIcon:e(D,{helpText:t("clientSessionMaxHelp"),fieldLabelId:"clientSessionMax"}),children:e(O,{name:"clientSessionMaxLifespan",control:s,render:({field:c})=>e(ee,{className:"kc-client-session-max","data-testid":"client-session-max-input",value:c.value,onChange:c.onChange,units:["minute","hour","day"]})})})]})}),e(ye,{title:t("offlineSessionSettings"),className:"kc-offline-session-template",children:d(ae,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:r(l),children:[e(v,{label:t("offlineSessionIdle"),fieldId:"offlineSessionIdle",labelIcon:e(D,{helpText:t("offlineSessionIdleHelp"),fieldLabelId:"offlineSessionIdle"}),children:e(O,{name:"offlineSessionIdleTimeout",control:s,render:({field:c})=>e(ee,{className:"kc-offline-session-idle","data-testid":"offline-session-idle-input","aria-label":"offline-session-idle-input",value:c.value,onChange:c.onChange,units:["minute","hour","day"]})})}),e(v,{hasNoPaddingTop:!0,label:t("offlineSessionMaxLimited"),fieldId:"kc-offlineSessionMaxLimited",labelIcon:e(D,{helpText:t("offlineSessionMaxLimitedHelp"),fieldLabelId:"offlineSessionMaxLimited"}),children:e(O,{name:"offlineSessionMaxLifespanEnabled",control:s,defaultValue:!1,render:({field:c})=>e(de,{id:"kc-offline-session-max","data-testid":"offline-session-max-switch","aria-label":t("offlineSessionMaxLimited"),label:t("enabled"),labelOff:t("disabled"),isChecked:c.value,onChange:c.onChange})})}),o&&e(v,{label:t("offlineSessionMax"),fieldId:"offlineSessionMax",id:"offline-session-max-label",labelIcon:e(D,{helpText:t("offlineSessionMaxHelp"),fieldLabelId:"offlineSessionMax"}),children:e(O,{name:"offlineSessionMaxLifespan",control:s,render:({field:c})=>e(ee,{className:"kc-offline-session-max","data-testid":"offline-session-max-input",value:c.value,onChange:c.onChange,units:["minute","hour","day"]})})})]})}),e(ye,{className:"kc-login-settings-template",title:t("loginSettings"),children:d(ae,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:r(l),children:[e(v,{label:t("loginTimeout"),id:"kc-login-timeout-label",fieldId:"offlineSessionIdle",labelIcon:e(D,{helpText:t("loginTimeoutHelp"),fieldLabelId:"loginTimeout"}),children:e(O,{name:"accessCodeLifespanLogin",control:s,render:({field:c})=>e(ee,{className:"kc-login-timeout","data-testid":"login-timeout-input","aria-label":"login-timeout-input",value:c.value,onChange:c.onChange,units:["minute","hour","day"]})})}),e(v,{label:t("loginActionTimeout"),fieldId:"loginActionTimeout",id:"login-action-timeout-label",labelIcon:e(D,{helpText:t("loginActionTimeoutHelp"),fieldLabelId:"loginActionTimeout"}),children:e(O,{name:"accessCodeLifespanUserAction",control:s,render:({field:c})=>e(ee,{className:"kc-login-action-timeout","data-testid":"login-action-timeout-input",value:c.value,onChange:c.onChange,units:["minute","hour","day"]})})}),d(Te,{children:[e(R,{variant:"primary",type:"submit","data-testid":"sessions-tab-save",isDisabled:!p.isDirty,children:t("save")}),e(R,{variant:"link",onClick:T,children:t("revert")})]})]})})]})},rl=({realm:a,save:l})=>{const{t}=H(),[n,s]=m(!1),[r,p]=m(!1),[o,T]=m(!1),[c,h]=m(!1),{control:A,handleSubmit:x,setValue:f}=fe(),g=Ue().themes,E=()=>{Oe(a,f)};return Ie(E,[]),e(re,{variant:"light",children:d(ae,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:x(l),children:[e(v,{label:t("loginTheme"),fieldId:"kc-login-theme",labelIcon:e(D,{helpText:t("loginThemeHelp"),fieldLabelId:"loginTheme"}),children:e(O,{name:"loginTheme",control:A,defaultValue:"",render:({field:i})=>e(oe,{toggleId:"kc-login-theme",onToggle:()=>s(!n),onSelect:(u,k)=>{i.onChange(k),s(!1)},selections:i.value,variant:pe.single,isOpen:n,placeholderText:t("selectATheme"),"data-testid":"select-login-theme","aria-label":t("selectLoginTheme"),children:g.login.map((u,k)=>e(W,{selected:u.name===i.value,value:u.name,children:t(`${u.name}`)},`login-theme-${k}`))})})}),e(v,{label:t("accountTheme"),fieldId:"kc-account-theme",labelIcon:e(D,{helpText:t("accountThemeHelp"),fieldLabelId:"accountTheme"}),children:e(O,{name:"accountTheme",control:A,defaultValue:"",render:({field:i})=>e(oe,{toggleId:"kc-account-theme",onToggle:()=>p(!r),onSelect:(u,k)=>{i.onChange(k),p(!1)},selections:i.value,variant:pe.single,"aria-label":t("selectAccountTheme"),isOpen:r,placeholderText:t("selectATheme"),"data-testid":"select-account-theme",children:g.account.filter(u=>u.name!=="base").map((u,k)=>e(W,{selected:u.name===i.value,value:u.name,children:t(`${u.name}`)},`account-theme-${k}`))})})}),e(v,{label:t("adminTheme"),fieldId:"kc-admin-ui-theme",labelIcon:e(D,{helpText:t("adminThemeHelp"),fieldLabelId:"adminTheme"}),children:e(O,{name:"adminTheme",control:A,defaultValue:"",render:({field:i})=>e(oe,{toggleId:"kc-admin-ui-theme",onToggle:()=>T(!o),onSelect:(u,k)=>{i.onChange(k),T(!1)},selections:i.value,variant:pe.single,isOpen:o,placeholderText:t("selectATheme"),"data-testid":"select-admin-theme","aria-label":"selectAdminTheme",children:g.admin.filter(u=>u.name!=="base").map((u,k)=>e(W,{selected:u.name===i.value,value:u.name,children:t(`${u.name}`)},`admin-theme-${k}`))})})}),e(v,{label:t("emailTheme"),fieldId:"kc-email-theme",labelIcon:e(D,{helpText:t("emailThemeHelp"),fieldLabelId:"emailTheme"}),children:e(O,{name:"emailTheme",control:A,defaultValue:"",render:({field:i})=>e(oe,{toggleId:"kc-email-theme",onToggle:()=>h(!c),onSelect:(u,k)=>{i.onChange(k),h(!1)},selections:i.value,variant:pe.single,isOpen:c,placeholderText:t("selectATheme"),"data-testid":"select-email-theme","aria-label":t("selectEmailTheme"),children:g.email.map((u,k)=>e(W,{selected:u.name===i.value,value:u.name,children:t(`${u.name}`)},`email-theme-${k}`))})})}),d(Te,{children:[e(R,{variant:"primary",type:"submit","data-testid":"themes-tab-save",children:t("save")}),e(R,{variant:"link",onClick:E,children:t("revert")})]})]})})},ol=({realm:a,reset:l,save:t})=>{const{t:n}=H(),s=Ue(),r=la(),{whoAmI:p}=it(),[o,T]=m(!1),c=Ha(s.providers.signature.providers),h=fe(),{setValue:A,control:x}=h,f=He({control:x,name:"offlineSessionMaxLifespanEnabled",defaultValue:a.offlineSessionMaxLifespanEnabled}),g=He({control:x,name:"ssoSessionIdleTimeout",defaultValue:36e3}),E=He({control:x,name:"revokeRefreshToken",defaultValue:!1});return Ie(()=>{Oe(a,A)},[]),d(re,{variant:"light",children:[e(ye,{title:n("general"),className:"kc-sso-session-template",children:d(ae,{isHorizontal:!0,role:"manage-realm",onSubmit:h.handleSubmit(t),children:[e(v,{label:n("defaultSigAlg"),fieldId:"kc-default-signature-algorithm",labelIcon:e(D,{helpText:n("defaultSigAlgHelp"),fieldLabelId:"algorithm"}),children:e(O,{name:"defaultSignatureAlgorithm",defaultValue:"RS256",control:h.control,render:({field:i})=>e(oe,{toggleId:"kc-default-sig-alg",onToggle:()=>T(!o),onSelect:(u,k)=>{i.onChange(k.toString()),T(!1)},selections:[i.value?.toString()],variant:pe.single,"aria-label":n("defaultSigAlg"),isOpen:o,"data-testid":"select-default-sig-alg",children:c.map((u,k)=>e(W,{selected:u===i.value,value:u},`default-sig-alg-${k}`))})})}),r(ia.DeviceFlow)&&d(J,{children:[e(v,{label:n("oAuthDeviceCodeLifespan"),fieldId:"oAuthDeviceCodeLifespan",labelIcon:e(D,{helpText:n("oAuthDeviceCodeLifespanHelp"),fieldLabelId:"oAuthDeviceCodeLifespan"}),children:e(O,{name:"oauth2DeviceCodeLifespan",defaultValue:0,control:h.control,render:({field:i})=>e(ee,{id:"oAuthDeviceCodeLifespan","data-testid":"oAuthDeviceCodeLifespan",value:i.value||0,onChange:i.onChange,units:["minute","hour","day"]})})}),e(v,{label:n("oAuthDevicePollingInterval"),fieldId:"oAuthDevicePollingInterval",labelIcon:e(D,{helpText:n("oAuthDevicePollingIntervalHelp"),fieldLabelId:"oAuthDevicePollingInterval"}),children:e(O,{name:"oauth2DevicePollingInterval",defaultValue:0,control:h.control,render:({field:i})=>e(nt,{id:"oAuthDevicePollingInterval",value:i.value,min:0,onPlus:()=>i.onChange(i.value||1),onMinus:()=>i.onChange(i.value||-1),onChange:u=>{const k=Number(u.currentTarget.value);i.onChange(isNaN(k)?0:k)},placeholder:n("oAuthDevicePollingInterval")})})}),e(v,{label:n("shortVerificationUri"),fieldId:"shortVerificationUri",labelIcon:e(D,{helpText:n("shortVerificationUriTooltipHelp"),fieldLabelId:"shortVerificationUri"}),children:e(me,{id:"shortVerificationUri",placeholder:n("shortVerificationUri"),...h.register("attributes.shortVerificationUri")})})]})]})}),e(ye,{title:n("refreshTokens"),className:"kc-client-session-template",children:d(ae,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:h.handleSubmit(t),children:[e(v,{hasNoPaddingTop:!0,label:n("revokeRefreshToken"),fieldId:"kc-revoke-refresh-token",labelIcon:e(D,{helpText:n("revokeRefreshTokenHelp"),fieldLabelId:"revokeRefreshToken"}),children:e(O,{name:"revokeRefreshToken",control:h.control,defaultValue:!1,render:({field:i})=>e(de,{id:"kc-revoke-refresh-token","data-testid":"revoke-refresh-token-switch","aria-label":n("revokeRefreshToken"),label:n("enabled"),labelOff:n("disabled"),isChecked:i.value,onChange:i.onChange})})}),E&&e(v,{label:n("refreshTokenMaxReuse"),labelIcon:e(D,{helpText:n("refreshTokenMaxReuseHelp"),fieldLabelId:"refreshTokenMaxReuse"}),fieldId:"refreshTokenMaxReuse",children:e(O,{name:"refreshTokenMaxReuse",defaultValue:0,control:h.control,render:({field:i})=>e(nt,{type:"text",id:"refreshTokenMaxReuseMs",value:i.value,onPlus:()=>i.onChange(i.value+1),onMinus:()=>i.onChange(i.value-1),onChange:u=>i.onChange(Number(u.target.value))})})})]})}),e(ye,{title:n("accessTokens"),className:"kc-offline-session-template",children:d(ae,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:h.handleSubmit(t),children:[e(v,{label:n("accessTokenLifespan"),fieldId:"accessTokenLifespan",helperText:n("recommendedSsoTimeout",{time:Ln(g,p.getLocale())}),labelIcon:e(D,{helpText:n("accessTokenLifespanHelp"),fieldLabelId:"accessTokenLifespan"}),children:e(O,{name:"accessTokenLifespan",control:h.control,render:({field:i})=>e(ee,{validated:i.value>g?"warning":"default",className:"kc-access-token-lifespan","data-testid":"access-token-lifespan-input","aria-label":"access-token-lifespan",value:i.value,onChange:i.onChange,units:["minute","hour","day"]})})}),e(v,{label:n("accessTokenLifespanImplicitFlow"),fieldId:"accessTokenLifespanImplicitFlow",labelIcon:e(D,{helpText:n("accessTokenLifespanImplicitFlow"),fieldLabelId:"accessTokenLifespanImplicitFlow"}),children:e(O,{name:"accessTokenLifespanForImplicitFlow",control:h.control,render:({field:i})=>e(ee,{className:"kc-access-token-lifespan-implicit","data-testid":"access-token-lifespan-implicit-input",value:i.value,onChange:i.onChange,units:["minute","hour","day"]})})}),e(v,{label:n("clientLoginTimeout"),fieldId:"clientLoginTimeout",labelIcon:e(D,{helpText:n("clientLoginTimeoutHelp"),fieldLabelId:"clientLoginTimeout"}),children:e(O,{name:"accessCodeLifespan",control:h.control,render:({field:i})=>e(ee,{className:"kc-client-login-timeout","data-testid":"client-login-timeout-input","aria-label":"client-login-timeout",value:i.value,onChange:i.onChange,units:["minute","hour","day"]})})}),f&&e(v,{label:n("offlineSessionMax"),fieldId:"offlineSessionMax",id:"offline-session-max-label",labelIcon:e(D,{helpText:n("offlineSessionMaxHelp"),fieldLabelId:"offlineSessionMax"}),children:e(O,{name:"offlineSessionMaxLifespan",control:h.control,render:({field:i})=>e(ee,{className:"kc-offline-session-max","data-testid":"offline-session-max-input",value:i.value,onChange:i.onChange,units:["minute","hour","day"]})})})]})}),e(ye,{className:"kc-login-settings-template",title:n("actionTokens"),children:d(ae,{isHorizontal:!0,role:"manage-realm",className:"pf-u-mt-lg",onSubmit:h.handleSubmit(t),children:[e(v,{label:n("userInitiatedActionLifespan"),id:"kc-user-initiated-action-lifespan",fieldId:"userInitiatedActionLifespan",labelIcon:e(D,{helpText:n("userInitiatedActionLifespanHelp"),fieldLabelId:"userInitiatedActionLifespan"}),children:e(O,{name:"actionTokenGeneratedByUserLifespan",control:h.control,render:({field:i})=>e(ee,{className:"kc-user-initiated-action-lifespan","data-testid":"user-initiated-action-lifespan","aria-label":"user-initiated-action-lifespan",value:i.value,onChange:i.onChange,units:["minute","hour","day"]})})}),e(v,{label:n("defaultAdminInitiated"),fieldId:"defaultAdminInitiated",id:"default-admin-initiated-label",labelIcon:e(D,{helpText:n("defaultAdminInitiatedActionLifespanHelp"),fieldLabelId:"defaultAdminInitiated"}),children:e(O,{name:"actionTokenGeneratedByAdminLifespan",control:h.control,render:({field:i})=>e(ee,{className:"kc-default-admin-initiated","data-testid":"default-admin-initated-input","aria-label":"default-admin-initated-input",value:i.value,onChange:i.onChange,units:["minute","hour","day"]})})}),e(Re,{className:"kc-override-action-tokens-subtitle",component:wt.h1,children:n("overrideActionTokens")}),e(v,{label:n("emailVerification"),fieldId:"emailVerification",id:"email-verification",children:e(O,{name:`attributes.${ot("actionTokenGeneratedByUserLifespan.verify-email")}`,defaultValue:"",control:h.control,render:({field:i})=>e(ee,{className:"kc-email-verification","data-testid":"email-verification-input",value:i.value,onChange:u=>i.onChange(u.toString()),units:["minute","hour","day"]})})}),e(v,{label:n("idpAccountEmailVerification"),fieldId:"idpAccountEmailVerification",id:"idp-acct-label",children:e(O,{name:`attributes.${ot("actionTokenGeneratedByUserLifespan.idp-verify-account-via-email")}`,defaultValue:"",control:h.control,render:({field:i})=>e(ee,{className:"kc-idp-email-verification","data-testid":"idp-email-verification-input",value:i.value,onChange:i.onChange,units:["minute","hour","day"]})})}),e(v,{label:n("forgotPassword"),fieldId:"forgotPassword",id:"forgot-password-label",children:e(O,{name:`attributes.${ot("actionTokenGeneratedByUserLifespan.reset-credentials")}`,defaultValue:"",control:h.control,render:({field:i})=>e(ee,{className:"kc-forgot-pw","data-testid":"forgot-pw-input",value:i.value,onChange:i.onChange,units:["minute","hour","day"]})})}),e(v,{label:n("executeActions"),fieldId:"executeActions",id:"execute-actions",children:e(O,{name:`attributes.${ot("actionTokenGeneratedByUserLifespan.execute-actions")}`,defaultValue:"",control:h.control,render:({field:i})=>e(ee,{className:"kc-execute-actions","data-testid":"execute-actions-input",value:i.value,onChange:i.onChange,units:["minute","hour","day"]})})}),d(Te,{children:[e(R,{variant:"primary",type:"submit","data-testid":"tokens-tab-save",isDisabled:!h.formState.isDirty,children:n("save")}),e(R,{variant:"link",onClick:l,children:n("revert")})]})]})})]})},cl=()=>{const{t:a}=H(),[l,t]=$e(),[n,s]=$e(),[r,p]=m(),[o,T]=m([]),[c,h]=m(0),[A,x]=m(0),f=()=>x(A+1),{realm:g}=ce(),{addAlert:E,addError:i}=be(),{enabled:u}=Ua();we(()=>M.realms.getDefaultGroups({realm:g}),w=>{p(w),h(c+1)},[A]);const k=()=>Promise.resolve(r),S=async()=>{try{await Promise.all(o.map(w=>M.realms.removeDefaultGroup({realm:g,id:w.id}))),E(a("groupRemove",{count:o.length}),le.success),T([])}catch(w){i("groupRemoveError",w)}f()},I=async w=>{try{await Promise.all(w.map(F=>M.realms.addDefaultGroup({realm:g,id:F.id}))),E(a("defaultGroupAdded",{count:w.length}),le.success)}catch(F){i("defaultGroupAddedError",F)}f()},[y,b]=ge({titleKey:a("removeConfirmTitle",{count:o.length}),messageKey:a("removeConfirm",{count:o.length}),continueButtonLabel:"delete",continueButtonVariant:ie.danger,onConfirm:S});return r?d(J,{children:[e(b,{}),n&&e(An,{type:"selectMany",text:{title:"addDefaultGroups",ok:"add"},onConfirm:w=>{I(w||[]),s()},onClose:s}),u&&e(Ga,{bodyContent:d(bt,{i18nKey:"defaultGroupsHelp",children:[" ",e(Ce,{to:Ut({realm:g})}),"."]}),children:e(st,{className:"keycloak__section_intro__help",style:{paddingLeft:"var(--pf-c-page__main-section--PaddingLeft)"},children:d(Re,{children:[e(xn,{})," ",a("whatIsDefaultGroups")]})})}),e(Be,{canSelectAll:!0,onSelect:w=>T([...w]),loader:k,ariaLabelKey:"defaultGroups",searchPlaceholderKey:"searchForGroups",toolbarItem:d(J,{children:[e(Se,{children:e(R,{"data-testid":"openCreateGroupModal",variant:"primary",onClick:s,children:a("addGroups")})}),e(Se,{children:e(Qt,{toggle:e(Zt,{onToggle:t,isDisabled:o.length===0}),isOpen:l,isPlain:!0,dropdownItems:[e(at,{component:"button",onClick:()=>{y(),t()},children:a("remove")},"action")]})})]}),actions:[{title:a("remove"),onRowClick:w=>(T([w]),y(),Promise.resolve(!1))}],columns:[{name:"name",displayKey:"groupName"},{name:"path",displayKey:"path"}],emptyState:e(Ee,{hasIcon:!0,message:a("noDefaultGroups"),instructions:d(bt,{i18nKey:"noDefaultGroupsInstructions",children:[" ",e(Ce,{className:"pf-u-font-weight-light",to:Ut({realm:g})}),"Add groups..."]}),primaryActionText:a("addGroups"),onPrimaryAction:s})},c)]}):e(Ge,{})},dl=()=>{const{t:a}=H(),[l,t]=m(),[n,s]=m(10),[r,p]=m(0),{addAlert:o,addError:T}=be(),{realm:c}=ce();if(we(()=>M.realms.findOne({realm:c}),t,[]),!l)return e(Ge,{});const h=async A=>{const x=A;try{await M.roles.createComposite({roleId:l.defaultRole.id,realm:c},x),p(r+1),o(a("addAssociatedRolesSuccess"),le.success)}catch(f){T("addAssociatedRolesError",f)}};return d(vt,{activeKey:n,onSelect:(A,x)=>s(x),children:[e(z,{id:"roles",eventKey:10,title:e($,{children:a("defaultRoles")}),"data-testid":"default-roles-tab",children:e(Pn,{name:l.defaultRole.name,id:l.defaultRole.id,type:"roles",isManager:!0,save:A=>h(A.map(x=>x.role))})},r),e(z,{id:"groups",eventKey:20,title:e($,{children:a("defaultGroups")}),"data-testid":"default-groups-tab",children:e(cl,{})})]})};function fa({ariaLabelKey:a="userEventsRegistered",eventTypes:l,addTypes:t,onSelect:n,onDelete:s}){const{t:r}=H(),p=l.map(o=>({id:o,name:r(`eventTypes.${o}.name`),description:r(`eventTypes.${o}.description`)}));return e(Be,{ariaLabelKey:a,searchPlaceholderKey:"searchEventType",loader:p,onSelect:n||void 0,canSelectAll:!!n,toolbarItem:t&&e(Se,{children:e(R,{id:"addTypes",onClick:t,"data-testid":"addTypes",children:r("addSavedTypes")})}),actions:s?[{title:r("remove"),onRowClick:s}]:[],columns:[{name:"name",displayKey:"eventType"},{name:"description",displayKey:"description"}],emptyState:e(Ee,{message:r("emptyEvents"),instructions:r("emptyEventsInstructions")})})}const ul=({onConfirm:a,onClose:l,configured:t})=>{const{t:n}=H(),{enums:s}=Ue(),[r,p]=m([]);return e(je,{variant:Xe.medium,title:n("addTypes"),isOpen:!0,onClose:l,actions:[e(R,{"data-testid":"addEventTypeConfirm",variant:"primary",onClick:()=>a(r),children:n("add")},"confirm"),e(R,{"data-testid":"moveCancel",variant:"link",onClick:l,children:n("cancel")},"cancel")],children:e(fa,{ariaLabelKey:"addTypes",onSelect:o=>p(o),eventTypes:s.eventType.filter(o=>!t.includes(o))})})},Wt=({type:a,form:l,reset:t,clear:n})=>{const{t:s}=H(),{control:r,watch:p,setValue:o,formState:{isDirty:T}}=l,c=a==="admin"?"adminEventsEnabled":"eventsEnabled",h=p(c),[A,x]=ge({titleKey:"events-disable-title",messageKey:"events-disable-confirm",continueButtonLabel:"confirm",onConfirm:()=>o(c,!1,{shouldDirty:!0})});return d(J,{children:[e(x,{}),e(v,{hasNoPaddingTop:!0,label:s("saveEvents"),fieldId:c,labelIcon:e(D,{helpText:s(`save-${a}-eventsHelp`),fieldLabelId:"saveEvents"}),children:e(O,{name:c,defaultValue:!1,control:r,render:({field:f})=>e(de,{"data-testid":c,id:`${c}-switch`,label:s("on"),labelOff:s("off"),isChecked:f.value,onChange:g=>{g?f.onChange(g):A()},"aria-label":s("saveEvents")})})}),h&&d(J,{children:[a==="admin"&&e(v,{hasNoPaddingTop:!0,label:s("includeRepresentation"),fieldId:"includeRepresentation",labelIcon:e(D,{helpText:s("includeRepresentationHelp"),fieldLabelId:"includeRepresentation"}),children:e(O,{name:"adminEventsDetailsEnabled",defaultValue:!1,control:r,render:({field:f})=>e(de,{"data-testid":"includeRepresentation",id:"includeRepresentation",label:s("on"),labelOff:s("off"),isChecked:f.value,onChange:f.onChange,"aria-label":s("includeRepresentation")})})}),e(v,{label:s("expiration"),fieldId:"expiration",labelIcon:e(D,{helpText:s("expirationHelp"),fieldLabelId:"expiration"}),children:e(O,{name:a==="user"?"eventsExpiration":"adminEventsExpiration",defaultValue:"",control:r,render:({field:f})=>e(ee,{value:f.value,onChange:f.onChange,units:["minute","hour","day"]})})})]}),d(Te,{children:[e(R,{variant:"primary",type:"submit",id:`save-${a}`,"data-testid":`save-${a}`,isDisabled:!T,children:s("save")}),e(R,{variant:"link",onClick:t,children:s("revert")})]}),e(qe,{}),e(v,{label:s(a==="user"?"clearUserEvents":"clearAdminEvents"),fieldId:`clear-${a}-events`,labelIcon:e(D,{helpText:s(`${a}-clearEventsHelp`),fieldLabelId:`clear-${a}-events`}),children:e(R,{variant:"danger",id:`clear-${a}-events`,"data-testid":`clear-${a}-events`,onClick:()=>n(),children:s(a==="user"?"clearUserEvents":"clearAdminEvents")})})]})},ml=({form:a,reset:l})=>{const{t}=H(),{control:n,formState:{isDirty:s}}=a,[r,p]=m(!1),T=Ue().providers?.eventsListener.providers;return d(J,{children:[e(v,{hasNoPaddingTop:!0,label:t("eventListeners"),fieldId:"kc-eventListeners",labelIcon:e(D,{helpText:t("eventListenersHelpTextHelp"),fieldLabelId:"eventListeners"}),children:e(O,{name:"eventsListeners",defaultValue:"",control:n,render:({field:c})=>e(oe,{name:"eventsListeners",className:"kc_eventListeners_select","data-testid":"eventListeners-select",chipGroupProps:{numChips:3,expandedText:t("hide"),collapsedText:t("showRemaining")},variant:pe.typeaheadMulti,typeAheadAriaLabel:"Select",onToggle:h=>p(h),selections:c.value,onSelect:(h,A)=>{const x=A.toString(),f=c.value.includes(x)?c.value.filter(g=>g!==x):[...c.value,x];c.onChange(f)},onClear:h=>{h.stopPropagation(),c.onChange([])},isOpen:r,"aria-label":"selectEventsListeners",children:Object.keys(T).map(h=>e(W,{value:h},h))})})}),d(Te,{children:[e(R,{variant:"primary",type:"submit","data-testid":"saveEventListenerBtn",isDisabled:!s,children:t("save")}),e(R,{variant:"link","data-testid":"revertEventListenerBtn",onClick:l,children:t("revert")})]})]})},pl=({realm:a})=>{const{t:l}=H(),t=fe(),{setValue:n,handleSubmit:s}=t,[r,p]=m(0),o=()=>p(new Date().getTime()),[T,c]=m(0),h=()=>c(new Date().getTime()),[A,x]=m("event"),[f,g]=m(),[E,i]=m(),[u,k]=m(!1),{addAlert:S,addError:I}=be(),{realm:y}=ce(),b=K=>{g(K),Oe(K||{},n)},w=async K=>{i(K),F()},[F,V]=ge({titleKey:"deleteEvents",messageKey:"deleteEventsConfirm",continueButtonLabel:"clear",continueButtonVariant:ie.danger,onConfirm:async()=>{try{switch(E){case"admin":await M.realms.clearAdminEvents({realm:y});break;case"user":await M.realms.clearEvents({realm:y});break}S(l(`${E}-events-cleared`),le.success)}catch(K){I(`${E}-events-cleared-error`,K)}}});we(()=>M.realms.getConfigEvents({realm:y}),K=>{b({...K,adminEventsExpiration:a.attributes?.adminEventsExpiration}),h()},[r]);const C=async K=>{const j=!sa(f?.eventsListeners,K.eventsListeners),{adminEventsExpiration:Y,...ue}=K;a.attributes?.adminEventsExpiration!==Y&&await M.realms.update({realm:y},{...a,attributes:{...a.attributes||{},adminEventsExpiration:Y}});try{await M.realms.updateConfigEvents({realm:y},ue),b({...f,...ue,adminEventsExpiration:Y}),S(l(j?"saveEventListenersSuccess":"eventConfigSuccessfully"),le.success)}catch(he){I(l(j?"saveEventListenersError":"eventConfigError"),he)}},_=async K=>{const j=K.map(ue=>ue.id),Y=f.enabledEventTypes?.concat(j);await X(Y)},X=async(K=[])=>{const j={...t.getValues(),enabledEventTypes:K};await C(j),k(!1),o()};return d(J,{children:[e(V,{}),u&&e(ul,{onConfirm:K=>_(K),configured:f?.enabledEventTypes||[],onClose:()=>k(!1)}),d(vt,{activeKey:A,onSelect:(K,j)=>x(j),children:[e(z,{eventKey:"event",title:e($,{children:l("eventListeners")}),"data-testid":"rs-event-listeners-tab",children:e(re,{children:e(ae,{role:"manage-events",isHorizontal:!0,onSubmit:s(C),children:e(ml,{form:t,reset:()=>b(f)})})})}),d(z,{eventKey:"user",title:e($,{children:l("userEventsSettings")}),"data-testid":"rs-events-tab",children:[e(re,{children:e(ae,{role:"manage-events",isHorizontal:!0,onSubmit:s(C),children:e(Wt,{type:"user",form:t,reset:()=>b(f),clear:()=>w("user")})})}),e(re,{children:e(fa,{addTypes:()=>k(!0),eventTypes:f?.enabledEventTypes||[],onDelete:K=>{const j=f?.enabledEventTypes?.filter(Y=>Y!==K.id);X(j),g({...f,enabledEventTypes:j})}},T)})]}),e(z,{eventKey:"admin",title:e($,{children:l("adminEventsSettings")}),"data-testid":"rs-admin-events-tab",children:e(re,{children:e(ae,{role:"manage-events",isHorizontal:!0,onSubmit:s(C),children:e(Wt,{type:"admin",form:t,reset:()=>b(f),clear:()=>w("admin")})})})})]})]})},et=["ACTIVE","PASSIVE","DISABLED"],hl=({onFilter:a})=>{const{t:l}=H(),[t,n]=m(et[0]),[s,r]=$e();return e(oe,{width:300,"data-testid":"filter-type-select",isOpen:s,className:"kc-filter-type-select",variant:pe.single,onToggle:r,toggleIcon:e(ma,{}),onSelect:(p,o)=>{const T=et.find(c=>c===o.toString())||et[0];n(T),a(T),r()},selections:t,"aria-label":l("selectFilterType"),children:et.map(p=>e(W,{"data-testid":`${p}-option`,value:p,children:l(`keysFilter.${p}`)},p))})},fl=({realmComponents:a})=>{const{t:l}=H(),t=Ye(),n=En(),[s,r]=m(""),[p,o]=m(""),{realm:T}=ce(),[c,h]=m(),[A,x]=m();we(async()=>(await M.realms.getKeys({realm:T})).keys?.map(k=>{const S=a.find(I=>I.id===k.providerId);return{...k,provider:S?.name}}),h,[]);const[f,g]=ge({titleKey:l("publicKeys").slice(0,-1),messageKey:s,continueButtonLabel:"close",continueButtonVariant:ie.primary,onConfirm:()=>Promise.resolve()}),[E,i]=ge({titleKey:l("certificate"),messageKey:p,continueButtonLabel:"close",continueButtonVariant:ie.primary,onConfirm:()=>Promise.resolve()});return c?d(re,{variant:"light",padding:{default:"noPadding"},children:[e(g,{}),e(i,{}),e(Be,{isNotCompact:!0,className:"kc-keys-list",loader:A||c,ariaLabelKey:"keysList",searchPlaceholderKey:"searchKey",searchTypeComponent:e(hl,{onFilter:u=>x(u!==et[0]?c.filter(({status:k})=>k===u):void 0)}),canSelectAll:!0,columns:[{name:"algorithm",displayKey:"algorithm",cellFormatters:[Je()],transforms:[ze(15)]},{name:"type",displayKey:"type",cellFormatters:[Je()],transforms:[ze(10)]},{name:"kid",displayKey:"kid",cellFormatters:[Je()],transforms:[ze(10)]},{name:"use",displayKey:"use",cellFormatters:[Je()],transforms:[ze(10)]},{name:"provider",displayKey:"provider",cellRenderer:({provider:u})=>u||"",cellFormatters:[Je()],transforms:[ze(10)]},{name:"validTo",displayKey:"validTo",cellRenderer:({validTo:u})=>u?n(new Date(u)):"",cellFormatters:[Je()],transforms:[ze(10)]},{name:"publicKeys",displayKey:"publicKeys",cellRenderer:({type:u,publicKey:k,certificate:S})=>u==="EC"?e(R,{onClick:()=>{f(),r(k)},variant:"secondary",id:"kc-public-key",children:l("publicKeys").slice(0,-1)}):u==="RSA"?d("div",{className:"button-wrapper",children:[e(R,{onClick:()=>{f(),r(k)},variant:"secondary",id:k,children:l("publicKeys").slice(0,-1)}),e(R,{onClick:()=>{E(),o(S)},variant:"secondary",id:S,className:"kc-certificate",children:l("certificate")})]}):u==="OKP"?e(R,{onClick:()=>{f(),r(k)},variant:"secondary",id:"kc-public-key",children:l("publicKeys").slice(0,-1)}):"",cellFormatters:[],transforms:[ze(20)]}],isSearching:!!A,emptyState:e(Ee,{hasIcon:!0,message:l("noKeys"),instructions:l("noKeysDescription"),primaryActionText:l("addProvider"),onPrimaryAction:()=>t(Pt({realm:T,tab:"providers"}))})})]}):e(Ge,{})},gl="_dialog_121se_2",bl={dialog:gl},vl=({providerType:a,onClose:l})=>{const{t}=H();return e(je,{className:bl.dialog,variant:Xe.medium,title:t("addProvider"),isOpen:!0,onClose:l,children:e(wn,{providerType:a,onClose:l})})},yl=({onConfirm:a,onClose:l})=>{const{t}=H(),s=Ue().componentTypes?.[Dt]??[];return e(je,{variant:"medium",title:t("addProvider"),isOpen:!0,onClose:l,children:e(oa,{onSelectDataListItem:r=>{a(r)},"aria-label":t("addPredefinedMappers"),isCompact:!0,children:s.map(r=>e(ca,{"aria-label":r.id,id:r.id,children:e(da,{children:e(ua,{dataListCells:[e(xt,{"data-testid":`option-${r.id}`,children:r.id},`name-${r.id}`),e(xt,{width:2,children:r.helpText},`helpText-${r.helpText}`)]})})},r.id))})})},Tl=({realmComponents:a,refresh:l})=>{const{t}=H(),{addAlert:n,addError:s}=be(),{realm:r}=ce(),[p,o]=m(""),[T,c]=m([]),[h,A]=$e(),f=Ue().componentTypes?.[Dt]??[],[g,E]=$e(),[i,u]=m(),[k,S]=m(),I=tt(()=>a.map(C=>{const _=f.find(X=>C.providerId===X.id);return{...C,providerDescription:_?.helpText}}),[a]),[y,b]=ge({titleKey:"deleteProviderTitle",messageKey:t("deleteProviderConfirm",{provider:k?.name}),continueButtonLabel:"delete",continueButtonVariant:ie.danger,onConfirm:async()=>{try{await M.components.del({id:k.id,realm:r}),l(),n(t("deleteProviderSuccess"),le.success)}catch(C){s("deleteProviderError",C)}}}),w=()=>{if(p!==""){o(p);const C=I.filter(_=>_.name?.includes(p)||_.providerId?.includes(p));c(C)}else o(""),c(I)},F=C=>{C.key==="Enter"&&w()},V=C=>{o(C)};return d(J,{children:[g&&e(yl,{onClose:()=>E(),onConfirm:C=>{A(),u(C),E()}}),h&&i&&e(vl,{providerType:i,onClose:()=>{A(),l()}}),e(b,{}),d(re,{variant:"light",padding:{default:"noPadding"},children:[e(ra,{children:d(vn,{className:"providers-toolbar",children:[e(Se,{children:d(Ba,{children:[e(_a,{name:"inputGroupName",id:"inputGroupName","data-testid":"provider-search-input",type:"search","aria-label":t("search"),placeholder:t("search"),onChange:V,onKeyDown:F}),e(R,{variant:ie.control,"aria-label":t("search"),onClick:w,children:e(ea,{})})]})}),e(Se,{children:e(R,{"data-testid":"addProviderDropdown",className:"add-provider-dropdown",onClick:()=>E(),children:t("addProvider")})})]})}),e(pa,{variant:"compact",className:"kc-draggable-table",keyField:"id",data:T.length===0?I:T,onDragFinish:async(C,_)=>{const X=I.map(K=>{const j={...K};return delete j.providerDescription,M.components.update({id:K.id},{...j,config:{priority:[(_.length-_.indexOf(K.id)+100).toString()]}})});try{await Promise.all(X),l(),n(t("saveProviderListSuccess"),le.success)}catch(K){s("saveProviderError",K)}},columns:[{name:"name",displayKey:"name",cellRenderer:C=>e(Ce,{"data-testid":"provider-name-link",to:za({realm:r,id:C.id,providerType:C.providerId}),children:C.name},C.name)},{name:"providerId",displayKey:"provider"},{name:"providerDescription",displayKey:"providerDescription"}],actions:[{title:t("delete"),onClick:(C,_,X)=>{S(X),y()}}]})]})]})},kl=a=>[...a].sort((t,n)=>{const s=Number(t.config?.priority),r=Number(n.config?.priority);return(isNaN(r)?0:r)-(isNaN(s)?0:s)}),Cl=()=>{const{t:a}=H(),{realm:l}=ce(),[t,n]=m(),[s,r]=m(0),p=()=>{r(s+1)};we(()=>M.components.find({type:Dt,realm:l}),h=>n(kl(h)),[s]);const o=h=>gt(Pt({realm:l,tab:h})),T=o("list"),c=o("providers");return t?d(ft,{mountOnEnter:!0,unmountOnExit:!0,defaultLocation:Pt({realm:l,tab:"list"}),children:[e(z,{id:"keysList","data-testid":"rs-keys-list-tab","aria-label":"keys-list-subtab",title:e($,{children:a("keysList")}),...T,children:e(fl,{realmComponents:t})}),e(z,{id:"providers","data-testid":"rs-providers-tab","aria-label":"rs-providers-tab",title:e($,{children:a("providers")}),...c,children:e(Tl,{realmComponents:t,refresh:p})})]}):e(Ge,{})},Me=({fieldName:a,url:l})=>{const{t}=H(),{register:n}=aa(),s=a.substr(a.indexOf(".")+1);return e(v,{label:t(s),fieldId:s,labelIcon:e(D,{helpText:d(bt,{i18nKey:`${s}Help`,children:["Default value prevents pages from being included",e(At,{href:l,title:t("learnMore")})]}),fieldLabelId:s}),children:e(me,{id:s,...n(a)})})},Sl=({realm:a,save:l})=>{const{t}=H(),n=fe(),{setValue:s,formState:{isDirty:r},handleSubmit:p}=n,o=()=>Oe(a,s);return Ie(o,[]),e(Et,{...n,children:d(ae,{isHorizontal:!0,role:"manage-realm",className:"keycloak__security-defences__form",onSubmit:p(l),children:[e(Me,{fieldName:"browserSecurityHeaders.xFrameOptions",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options"}),e(Me,{fieldName:"browserSecurityHeaders.contentSecurityPolicy",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy"}),e(Me,{fieldName:"browserSecurityHeaders.contentSecurityPolicyReportOnly",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy-Report-Only"}),e(Me,{fieldName:"browserSecurityHeaders.xContentTypeOptions",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Content-Type-Options"}),e(Me,{fieldName:"browserSecurityHeaders.xRobotsTag",url:"https://developers.google.com/search/docs/advanced/robots/robots_meta_tag"}),e(Me,{fieldName:"browserSecurityHeaders.xXSSProtection",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-XSS-Protection"}),e(Me,{fieldName:"browserSecurityHeaders.strictTransportSecurity",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security"}),e(Me,{fieldName:"browserSecurityHeaders.referrerPolicy",url:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referrer-Policy"}),d(Te,{children:[e(R,{variant:"primary",type:"submit","data-testid":"headers-form-tab-save",isDisabled:!r,children:t("save")}),e(R,{variant:"link",onClick:o,children:t("revert")})]})]})})},ut=({name:a,style:l})=>{const{t}=H(),{control:n,formState:{errors:s}}=aa();return e(v,{style:l,label:t(a),fieldId:a,labelIcon:e(D,{helpText:t(`${a}Help`),fieldLabelId:a}),validated:s[a]?ke.error:ke.default,helperTextInvalid:t("required"),children:e(O,{name:a,defaultValue:"",control:n,rules:{required:!0},render:({field:r})=>e(ee,{"data-testid":a,value:r.value,onChange:r.onChange,validated:s[a]?ke.error:ke.default})})})},Il=({realm:a,save:l})=>{const{t}=H(),n=fe(),{setValue:s,handleSubmit:r,control:p,formState:{isDirty:o}}=n,[T,c]=m(!1),[h,A]=m(!1);let x;(i=>{i.Disabled="Disabled",i.PermanentLockout="PermanentLockout",i.TemporaryLockout="TemporaryLockout",i.PermanentAfterTemporaryLockout="PermanentAfterTemporaryLockout"})(x||(x={}));const f=["Disabled","PermanentLockout","TemporaryLockout","PermanentAfterTemporaryLockout"],g=()=>{Oe(a,s),A(!1)};Ie(g,[]);const E=n.getValues("bruteForceProtected")?n.getValues("permanentLockout")?n.getValues("maxTemporaryLockouts")==0?"PermanentLockout":"PermanentAfterTemporaryLockout":"TemporaryLockout":"Disabled";return e(Et,{...n,children:d(ae,{role:"manage-realm",isHorizontal:!0,onSubmit:r(l),children:[e(v,{label:t("bruteForceMode"),fieldId:"kc-brute-force-mode",labelIcon:e(D,{helpText:t("bruteForceModeHelpText"),fieldLabelId:"bruteForceMode"}),children:e(oe,{toggleId:"kc-brute-force-mode",onToggle:()=>c(!T),onSelect:(i,u)=>{switch(u){case"Disabled":n.setValue("bruteForceProtected",!1),n.setValue("permanentLockout",!1),n.setValue("maxTemporaryLockouts",0);break;case"TemporaryLockout":n.setValue("bruteForceProtected",!0),n.setValue("permanentLockout",!1),n.setValue("maxTemporaryLockouts",0);break;case"PermanentLockout":n.setValue("bruteForceProtected",!0),n.setValue("permanentLockout",!0),n.setValue("maxTemporaryLockouts",0);break;case"PermanentAfterTemporaryLockout":n.setValue("bruteForceProtected",!0),n.setValue("permanentLockout",!0),n.setValue("maxTemporaryLockouts",1);break}A(!0),c(!1)},selections:E,variant:pe.single,isOpen:T,"data-testid":"select-brute-force-mode","aria-label":t("selectUnmanagedAttributePolicy"),children:f.map(i=>e(W,{value:i,children:t(`bruteForceMode.${i}`)},i))})}),E!=="Disabled"&&d(J,{children:[e(v,{label:t("failureFactor"),labelIcon:e(D,{helpText:t("failureFactorHelp"),fieldLabelId:"failureFactor"}),fieldId:"failureFactor",children:e(O,{name:"failureFactor",defaultValue:0,control:p,rules:{required:!0},render:({field:i})=>e(nt,{type:"text",id:"failureFactor",value:i.value,onPlus:()=>i.onChange(i.value+1),onMinus:()=>i.onChange(i.value-1),onChange:u=>i.onChange(Number(u.target.value))})})}),E==="PermanentAfterTemporaryLockout"&&e(v,{label:t("maxTemporaryLockouts"),labelIcon:e(D,{helpText:t("maxTemporaryLockoutsHelp"),fieldLabelId:"maxTemporaryLockouts"}),fieldId:"maxTemporaryLockouts",hasNoPaddingTop:!0,children:e(O,{name:"maxTemporaryLockouts",defaultValue:0,control:p,render:({field:i})=>e(nt,{type:"text",id:"maxTemporaryLockouts",value:i.value,onPlus:()=>i.onChange(i.value+1),onMinus:()=>i.onChange(i.value-1),onChange:u=>i.onChange(Number(u.target.value)),"aria-label":t("maxTemporaryLockouts")})})}),(E==="TemporaryLockout"||E==="PermanentAfterTemporaryLockout")&&d(J,{children:[e(ut,{name:"waitIncrementSeconds"}),e(ut,{name:"maxFailureWaitSeconds"}),e(ut,{name:"maxDeltaTimeSeconds"})]}),e(v,{label:t("quickLoginCheckMilliSeconds"),labelIcon:e(D,{helpText:t("quickLoginCheckMilliSecondsHelp"),fieldLabelId:"quickLoginCheckMilliSeconds"}),fieldId:"quickLoginCheckMilliSeconds",children:e(O,{name:"quickLoginCheckMilliSeconds",defaultValue:0,control:p,render:({field:i})=>e(nt,{type:"text",id:"quickLoginCheckMilliSeconds",value:i.value,onPlus:()=>i.onChange(i.value+1),onMinus:()=>i.onChange(i.value-1),onChange:u=>i.onChange(Number(u.target.value))})})}),e(ut,{name:"minimumQuickLoginWaitSeconds"})]}),d(Te,{children:[e(R,{variant:"primary",type:"submit","data-testid":"brute-force-tab-save",isDisabled:!o&&!h,children:t("save")}),e(R,{variant:"link",onClick:g,children:t("revert")})]})]})})},Ll=({realm:a,save:l})=>{const{t}=H(),[n,s]=m(10);return d(vt,{activeKey:n,onSelect:(r,p)=>s(p),children:[e(z,{id:"headers",eventKey:10,"data-testid":"security-defenses-headers-tab",title:e($,{children:t("headers")}),children:e(re,{variant:"light",children:e(Sl,{realm:a,save:l})})}),e(z,{id:"bruteForce",eventKey:20,"data-testid":"security-defenses-brute-force-tab",title:e($,{children:t("bruteForceDetection")}),children:e(re,{variant:"light",children:e(Il,{realm:a,save:l})})})]})},Pl=()=>{const{config:a,save:l}=Vt(),{t}=H(),n=Ye(),{realm:s}=ce(),[r,p]=m(0),[o,T]=m();Ie(()=>p(f=>f+1),[a]);async function c(){return a?.groups??[]}const[h,A]=ge({titleKey:"deleteDialogTitle",children:d(bt,{i18nKey:"deleteDialogDescription",children:[" ",e("strong",{children:{group:o?.name}}),"."]}),continueButtonLabel:"delete",continueButtonVariant:ie.danger,onConfirm(){const f=(a?.groups??[]).filter(g=>g!==o);l({...a,groups:f},{successMessageKey:"deleteSuccess",errorMessageKey:"deleteAttributeGroupError"})}});function x(f){T(f),h()}return d(re,{variant:"light",className:"pf-u-p-0",children:[e(A,{}),e(Be,{loader:c,ariaLabelKey:"tableTitle",toolbarItem:e(Se,{children:e(R,{component:f=>e(Ce,{"data-testid":"create-attributes-groups-action",...f,to:Gt({realm:s})}),children:t("createGroupText")})}),columns:[{name:"name",displayKey:"columnName",cellRenderer:f=>e(Ce,{to:$a({realm:s,name:f.name}),children:f.name})},{name:"displayHeader",displayKey:"columnDisplayName"},{name:"displayDescription",displayKey:"columnDisplayDescription"}],actions:[{title:t("delete"),onRowClick:x}],emptyState:e(Ee,{message:t("emptyStateMessage"),instructions:t("emptyStateInstructions"),primaryActionText:t("createGroupText"),onPrimaryAction:()=>n(Gt({realm:s}))})},r)]})},Jt=["username","email"],Al=()=>{const{config:a,save:l}=Vt(),{realm:t}=ce(),{t:n}=H(),s=Ye(),[r,p]=m("allGroups"),[o,T]=$e(),[c,h]=m(a?.attributes),[A,x]=m(""),[f,g]=ge({titleKey:n("deleteAttributeConfirmTitle"),messageKey:n("deleteAttributeConfirm",{attributeName:A}),continueButtonLabel:n("delete"),continueButtonVariant:ie.danger,onConfirm:async()=>{if(!a?.attributes)return;const S=a.attributes.filter(I=>I.name!==A);l({...a,attributes:S,groups:a.groups},{successMessageKey:"deleteAttributeSuccess",errorMessageKey:"deleteAttributeError"}),x("")}});if(!a)return e(Ge,{});const E=a.attributes??[],i=a.groups??[],u=async(S,I)=>{const y=E.findIndex(w=>w.name===S.name);let b={};b=E[y],E.splice(y,1),E.splice(I,0,b),l({attributes:E,groups:i},{successMessageKey:"updatedUserProfileSuccess",errorMessageKey:"updatedUserProfileError"})},k=S=>e(Ce,{to:Bt({realm:t,attributeName:S.name}),children:S.name},S.name);return d(J,{children:[e(ra,{children:d(yn,{children:[e(Se,{children:e(oe,{width:200,"data-testid":"filter-select",isOpen:o,variant:pe.single,onToggle:T,toggleIcon:e(ma,{}),onSelect:(S,I)=>{const y=I.toString();p(y),h(y==="allGroups"?E:E.filter(b=>b.group===y)),T()},selections:r==="allGroups"?n(r):r,children:[e(W,{"data-testid":"all-groups",value:"allGroups",children:n("allGroups")},"allGroups"),...ja(E.filter(S=>!!S.group),"group").map(S=>e(W,{"data-testid":`${S.group}-option`,value:S.group},S.group))]})}),e(Se,{className:"kc-toolbar-attributesTab",children:e(R,{"data-testid":"createAttributeBtn",variant:"primary",component:S=>e(Ce,{...S,to:qa({realm:t})}),children:n("createAttribute")})})]})}),e(qe,{}),e(g,{}),e(pa,{keyField:"name",onDragFinish:async(S,I)=>{const y=E.map(V=>V.name),b=I.indexOf(S),w=y.indexOf(S),F=E[w];F.name&&u(F,b)},actions:[{title:n("edit"),onClick:(S,I,y)=>{s(Bt({realm:t,attributeName:y.name}))}},{title:n("delete"),isActionable:({name:S})=>!Jt.includes(S),isDisabled:Jt.includes(name),onClick:(S,I,y)=>{x(y.name),f()}}],columns:[{name:"name",displayKey:n("attributeName"),cellRenderer:k},{name:"displayName",displayKey:n("attributeDisplayName")},{name:"group",displayKey:n("attributeGroup")}],data:c??E})]})},xl=()=>{const{config:a,save:l,isSaving:t}=Vt(),{t:n}=H(),{addError:s}=be(),[r,p]=m();Ie(()=>o(),[a,r]);function o(){r?.setValue(a?lt(a):"")}async function T(){const c=r?.getValue();if(c)try{await l(JSON.parse(c))}catch(h){s("invalidJsonError",h);return}}return d(re,{variant:"light",children:[e(Nt,{language:Ot.json,height:"30rem",onEditorDidMount:c=>p(c),isLanguageLabelVisible:!0}),e(rt,{children:d(Te,{children:[e(R,{"data-testid":"save",variant:"primary",onClick:T,isDisabled:t,children:n("save")}),e(R,{variant:"link",onClick:o,isDisabled:t,children:n("revert")})]})})]})},El=()=>{const{realm:a}=ce(),{t:l}=H(),t=p=>gt(_t({realm:a,tab:p})),n=t("attributes"),s=t("attributes-group"),r=t("json-editor");return e(Dn,{children:d(ft,{defaultLocation:_t({realm:a,tab:"attributes"}),mountOnEnter:!0,children:[e(z,{title:e($,{children:l("attributes")}),"data-testid":"attributesTab",...n,children:e(Al,{})}),e(z,{title:e($,{children:l("attributesGroup")}),"data-testid":"attributesGroupTab",...s,children:e(Pl,{})}),e(z,{title:e($,{children:l("jsonEditor")}),"data-testid":"jsonEditorTab",...r,children:e(xl,{})})]})})},wl=({save:a,onChange:l,value:t,realmName:n,refresh:s})=>{const{t:r}=H(),{refresh:p}=na(),{addAlert:o,addError:T}=be(),c=Ye(),[h,A]=m(!1),[x,f]=m(!1),{hasAccess:g}=Wa(),E=g("manage-realm"),[i,u]=ge({titleKey:"disableConfirmTitle",messageKey:"disableConfirmRealm",continueButtonLabel:"disable",onConfirm:()=>{l(!t),a()}}),[k,S]=ge({titleKey:"deleteConfirmTitle",messageKey:"deleteConfirmRealmSetting",continueButtonLabel:"delete",continueButtonVariant:ie.danger,onConfirm:async()=>{try{await M.realms.del({realm:n}),o(r("deletedSuccessRealmSetting"),le.success),await p(),c(Ja({realm:Xa.masterRealm})),s()}catch(I){T("deleteErrorRealmSetting",I)}}});return d(J,{children:[e(u,{}),e(S,{}),e(nl,{open:h,toggleDialog:()=>A(!h)}),e(al,{isOpen:x,onClose:()=>f(!1)}),e(ln,{titleKey:n,subKey:"realmSettingsExplain",helpUrl:Ya.realmSettingsUrl,divider:!1,dropdownItems:[e(at,{"data-testid":"openPartialImportModal",isDisabled:!E,onClick:()=>{A(!0)},children:r("partialImport")},"import"),e(at,{"data-testid":"openPartialExportModal",isDisabled:!E,onClick:()=>f(!0),children:r("partialExport")},"export"),e(Qa,{},"separator"),e(at,{isDisabled:!E,onClick:k,children:r("delete")},"delete")],isEnabled:t,isReadOnly:!E,onToggle:I=>{I?(l(I),a()):i()}})]})},Dl=({realm:a,refresh:l})=>{const{t}=H(),{addAlert:n,addError:s}=be(),{realm:r}=ce(),{refresh:p}=na(),o=Ye(),T=la(),{control:c,setValue:h,getValues:A}=fe({mode:"onChange"}),[x,f]=m(0),g=()=>{f(x+1)};Ie((B=a)=>{Oe(B,h)},[h,a]);const i=async B=>{B=Za(B),B.attributes?.["acr.loa.map"]&&typeof B.attributes["acr.loa.map"]!="string"&&(B.attributes["acr.loa.map"]=JSON.stringify(Object.fromEntries(B.attributes["acr.loa.map"].filter(({key:q})=>q!=="").map(({key:q,value:Le})=>[q,Le]))));try{const q={...a,...B,id:B.realm};q.smtpServer?.port===""&&(q.smtpServer={...q.smtpServer,port:null});const Le=await en(tn(M.baseUrl,`admin/realms/${r}/ui-ext`),{method:"PUT",body:JSON.stringify(q),headers:{"Content-Type":"application/json",...an(await M.getAccessToken())}});if(!Le.ok)throw new Error(Le.statusText);n(t("realmSaveSuccess"),le.success)}catch(q){s("realmSaveError",q)}r!==(B.realm||a.realm)&&(await p(),o(Ct({realm:B.realm,tab:"general"}))),l()},u=B=>gt(Ct({realm:r,tab:B})),k=u("general"),S=u("login"),I=u("email"),y=u("themes"),b=u("keys"),w=u("events"),F=u("localization"),V=u("security-defenses"),C=u("sessions"),_=u("tokens"),X=u("client-policies"),K=u("user-profile"),j=u("user-registration"),Y=B=>gt(Lt({realm:r,tab:B})),ue=Y("profiles"),he=Y("policies");return d(J,{children:[e(O,{name:"enabled",defaultValue:!0,control:c,render:({field:B})=>e(wl,{value:B.value,onChange:B.onChange,realmName:r,refresh:g,save:()=>i(A())})}),e(re,{variant:"light",className:"pf-u-p-0",children:d(ft,{isBox:!0,mountOnEnter:!0,"aria-label":"realm-settings-tabs",defaultLocation:Ct({realm:r,tab:"general"}),children:[e(z,{title:e($,{children:t("general")}),"data-testid":"rs-general-tab",...k,children:e(Xn,{realm:a,save:i})}),e(z,{title:e($,{children:t("login")}),"data-testid":"rs-login-tab",...S,children:e(tl,{refresh:l,realm:a})}),e(z,{title:e($,{children:t("email")}),"data-testid":"rs-email-tab",...I,children:e(Jn,{realm:a,save:i})}),e(z,{title:e($,{children:t("themes")}),"data-testid":"rs-themes-tab",...y,children:e(rl,{realm:a,save:i})}),e(z,{title:e($,{children:t("keys")}),"data-testid":"rs-keys-tab",...b,children:e(Cl,{})}),e(z,{title:e($,{children:t("events")}),"data-testid":"rs-realm-events-tab",...w,children:e(pl,{realm:a})}),e(z,{title:e($,{children:t("localization")}),"data-testid":"rs-localization-tab",...F,children:e(el,{save:i,realm:a},x)}),e(z,{title:e($,{children:t("securityDefences")}),"data-testid":"rs-security-defenses-tab",...V,children:e(Ll,{realm:a,save:i})}),e(z,{title:e($,{children:t("sessions")}),"data-testid":"rs-sessions-tab",...C,children:e(sl,{realm:a,save:i},x)}),e(z,{title:e($,{children:t("tokens")}),"data-testid":"rs-tokens-tab",..._,children:e(ol,{save:i,realm:a})}),T(ia.ClientPolicies)&&e(z,{title:e($,{children:t("clientPolicies")}),"data-testid":"rs-clientPolicies-tab",...X,children:d(ft,{mountOnEnter:!0,defaultLocation:Lt({realm:r,tab:"profiles"}),children:[e(z,{id:"profiles","data-testid":"rs-policies-clientProfiles-tab","aria-label":t("clientProfilesSubTab"),title:e($,{children:t("profiles")}),tooltip:e(zt,{content:t("clientPoliciesProfilesHelpText")}),...ue,children:e(il,{})}),e(z,{id:"policies","data-testid":"rs-policies-clientPolicies-tab","aria-label":t("clientPoliciesSubTab"),...he,title:e($,{children:t("policies")}),tooltip:e(zt,{content:t("clientPoliciesPoliciesHelpText")}),children:e(ll,{})})]})}),e(z,{title:e($,{children:t("userProfile")}),"data-testid":"rs-user-profile-tab",...K,children:e(El,{})}),e(z,{title:e($,{children:t("userRegistration")}),"data-testid":"rs-userRegistration-tab",...j,children:e(dl,{})})]})})]})};function Ri(){const{realm:a}=nn(),[l,t]=m(),[n,s]=m(0),r=()=>{s(n+1),t(void 0)};return we(()=>M.realms.findOne({realm:a}),t,[n]),l?e(Dl,{realm:l,refresh:r}):e(Ge,{})}export{Ri as default};
//# sourceMappingURL=RealmSettingsSection-ToDhfN3H.js.map
