import{jsx as t,jsxs as $,Fragment as B}from"react/jsx-runtime";import{u as C,Z as y,a0 as v,a1 as b,a3 as k,V as W,q as _,f as U,I as N,J as q,S as M,aX as X,a6 as Y,a7 as D,h as A,cR as O,aY as P,ac as Z,ae as G,a9 as z,aa as E,ax as H}from"./index-C9t2UlUN.js";import{useState as L,useEffect as Q}from"react";import{F as ee}from"./FileUpload-CTw4RKK1.js";import{G as te}from"./GroupPickerDialog-tI6XV7Ln.js";import{F,a as V}from"./FlexItem-BEayPdRt.js";import{A as ne,a as ae,K as le}from"./KeySelect-CPI9XGq0.js";import{E as oe,a as re}from"./EmptyStateBody-CyIhnUop.js";import{M as se}from"./MultiLineInput-DibC-IV_.js";import{P as ie}from"./PasswordInput-CJKuHljf.js";import{u as de}from"./useToggle-K3Kx99tM.js";import{A as ce,S as ue}from"./AddRoleMappingModal-BWNuJU0W.js";import{C as pe,L as he}from"./CodeEditor-Cp4g17EF.js";import{K as fe}from"./KeycloakTextInput-DrlF32nr.js";import{K as ge}from"./KeycloakTextArea-DChmurIP.js";const me=({name:e,label:n,helpText:d,isDisabled:s=!1,defaultValue:o,isNew:l=!0})=>{const{t:a}=C(),{control:i}=y();return t(v,{hasNoPaddingTop:!0,label:a(n),fieldId:e,labelIcon:t(b,{helpText:a(d),fieldLabelId:`${n}`}),children:t(k,{name:S(e),"data-testid":e,defaultValue:l?o:!1,control:i,render:({field:r})=>t(W,{id:e,isDisabled:s,label:a("on"),labelOff:a("off"),isChecked:r.value==="true"||r.value===!0||r.value?.[0]==="true",onChange:h=>r.onChange(""+h),"data-testid":e,"aria-label":a(n)})})})},Ie=({name:e,label:n,helpText:d,defaultValue:s,isDisabled:o=!1,required:l=!1})=>{const{t:a}=C(),{control:i,formState:{errors:r}}=y(),[h,u]=L(!1),[c,p]=L([]),[g,w]=L("");_(()=>{const I={max:20};return g&&(I.clientId=g,I.search=!0),U.clients.find(I)},I=>p(I),[g]);const x=I=>[t(M,{value:"",children:a("none")},"empty"),...I.map(T=>t(M,{value:T.clientId},T.id))];return t(v,{label:a(n),isRequired:l,labelIcon:t(b,{helpText:a(d),fieldLabelId:n}),fieldId:e,validated:r[e]?"error":"default",helperTextInvalid:a("required"),children:t(k,{name:e,defaultValue:s||"",control:i,rules:l?{required:!0}:{},render:({field:I})=>t(N,{toggleId:e,variant:q.typeahead,onToggle:T=>u(T),isOpen:h,isDisabled:o,selections:I.value,onFilter:(T,f)=>(w(f),x(c)),onSelect:(T,f)=>{I.onChange(f.toString()),u(!1)},typeAheadAriaLabel:a(n),children:x(c)})})})},Ce=e=>t(Ie,{...e,name:S(e.name)}),ve=({name:e,label:n,helpText:d,defaultValue:s,isDisabled:o=!1})=>{const{t:l}=C(),{control:a}=y(),[i,r]=L(""),[h,u]=L(!1);return t(v,{label:l(n),labelIcon:t(b,{helpText:l(d),fieldLabelId:`${n}`}),fieldId:e,children:t(k,{name:S(e),control:a,defaultValue:s||"",render:({field:c})=>t(ee,{id:e,value:c.value,type:"text",filename:i,isDisabled:o,onFileInputChange:(p,g)=>r(g.name),onReadStarted:()=>u(!0),onReadFinished:()=>u(!1),onClearClick:()=>{c.onChange(""),r("")},isLoading:h,allowEditingUploadedText:!1,onChange:(p,g)=>{c.onChange(p),r(g)}})})})},be=({name:e,label:n,helpText:d,required:s})=>{const{t:o}=C(),[l,a]=L(!1),[i,r]=L(),{control:h}=y();return t(k,{name:S(e),defaultValue:"",control:h,render:({field:u})=>$(B,{children:[l&&t(te,{type:"selectOne",text:{title:"selectGroup",ok:"select"},onConfirm:c=>{u.onChange(c?.[0].path),r(c),a(!1)},onClose:()=>a(!1),filterGroups:i}),t(v,{label:o(n),labelIcon:t(b,{helpText:o(d),fieldLabelId:`${n}`}),fieldId:e,isRequired:s,children:$(X,{children:[t(Y,{children:u.value&&t(D,{onClick:()=>u.onChange(void 0),children:u.value})}),t(A,{id:"kc-join-groups-button",onClick:()=>a(!l),variant:"secondary","data-testid":"join-groups-button",children:o("selectGroup")})]})})]})})},Se=({name:e,label:n,helpText:d,defaultValue:s,options:o,required:l,isDisabled:a=!1})=>{const{t:i}=C(),{control:r}=y(),[h,u]=L(!1);return t(v,{label:i(n),labelIcon:t(b,{helpText:i(d),fieldLabelId:`${n}`}),fieldId:e,isRequired:l,children:t(k,{name:S(e),"data-testid":e,defaultValue:s||o?.[0]||"",control:r,render:({field:c})=>t(N,{toggleId:e,isDisabled:a,onToggle:p=>u(p),onSelect:(p,g)=>{c.onChange(g),u(!1)},selections:c.value,variant:q.single,"aria-label":i(n),isOpen:h,children:o?.map(p=>t(M,{selected:p===c.value,value:p},p))})})})},Te=({name:e,label:n,helpText:d,required:s,isDisabled:o})=>{const{t:l}=C(),{getValues:a,setValue:i,register:r}=y(),[h,u]=L([]),c=S(e);Q(()=>{r(c);const f=JSON.parse(a(c)||"[]");u(f.map(m=>({...m,id:O()})))},[]);const p=()=>u([...h,{key:"",value:"",id:O()}]),g=(f=h)=>{i(c,JSON.stringify(f.filter(m=>m.key!=="").map(({id:m,...R})=>R)))},w=(f,m)=>{I(f,{...h[f],key:m})},x=(f,m)=>{I(f,{...h[f],value:m})},I=(f,m)=>u([...h.slice(0,f),m,...h.slice(f+1)]),T=f=>{const m=[...h.slice(0,f),...h.slice(f+1)];u(m),g(m)};return h.length!==0?$(v,{label:l(n),labelIcon:t(b,{helpText:l(d),fieldLabelId:`${n}`}),fieldId:e,isRequired:s,children:[$(F,{direction:{default:"column"},children:[$(F,{children:[t(V,{grow:{default:"grow"},spacer:{default:"spacerNone"},children:t("strong",{children:l("key")})}),t(V,{grow:{default:"grow"},children:t("strong",{children:l("value")})})]}),h.map((f,m)=>$(F,{"data-testid":"row",children:[t(V,{grow:{default:"grow"},children:t(P,{name:`${c}.${m}.key`,placeholder:l("keyPlaceholder"),"aria-label":l("key"),defaultValue:f.key,"data-testid":`${c}.${m}.key`,onChange:R=>w(m,R),onBlur:()=>g()})}),t(V,{grow:{default:"grow"},spacer:{default:"spacerNone"},children:t(P,{name:`${c}.${m}.value`,placeholder:l("valuePlaceholder"),"aria-label":l("value"),defaultValue:f.value,"data-testid":`${c}.${m}.value`,onChange:R=>x(m,R),onBlur:()=>g()})}),t(V,{children:t(A,{variant:"link",title:l("removeAttribute"),isDisabled:o,onClick:()=>T(m),"data-testid":`${c}.${m}.remove`,children:t(Z,{})})})]},f.id))]}),t(ne,{children:t(ae,{children:t(A,{"data-testid":`${c}-add-row`,className:"pf-u-px-0 pf-u-mt-sm",variant:"link",icon:t(G,{}),onClick:()=>p(),children:l("addAttribute",{label:n})})})})]}):$(oe,{"data-testid":`${e}-empty-state`,className:"pf-u-p-0",variant:"xs",children:[t(re,{children:l("missingAttributes",{label:n})}),t(A,{"data-testid":`${e}-add-row`,variant:"link",icon:t(G,{}),isSmall:!0,onClick:p,isDisabled:o,children:l("addAttribute",{label:n})})]})};function K(e){return typeof e=="string"&&e.length>0?e.split("##"):[]}function ye(e){return e.join("##")}const Le=({name:e,label:n,helpText:d,defaultValue:s,options:o,isDisabled:l=!1,stringify:a,required:i})=>{const{t:r}=C(),{control:h}=y(),[u,c]=L(!1);return t(v,{label:r(n),labelIcon:t(b,{helpText:r(d),fieldLabelId:`${n}`}),fieldId:e,isRequired:i,children:t(k,{name:S(e),control:h,defaultValue:s?[s]:[],render:({field:p})=>t(N,{toggleId:e,"data-testid":e,isDisabled:l,chipGroupProps:{numChips:3,expandedText:r("hide"),collapsedText:r("showRemaining")},variant:q.typeaheadMulti,typeAheadAriaLabel:"Select",onToggle:g=>c(g),selections:a?K(p.value):p.value,onSelect:(g,w)=>{const x=w.toString(),I=a?K(p.value):p.value;let T;I.includes(x)?T=I.filter(f=>f!==x):T=[...I,x],p.onChange(a?ye(T):T)},onClear:g=>{g.stopPropagation(),p.onChange(a?"":[])},isOpen:u,"aria-label":r(n),children:o?.map(g=>t(M,{value:g},g))})})})};function xe(e){return e&&Array.isArray(e)?e:[e]}const $e=({name:e,label:n,defaultValue:d,helpText:s,stringify:o,required:l,isDisabled:a=!1})=>{const{t:i}=C(),r=S(e);return t(v,{label:i(n),labelIcon:t(b,{helpText:i(s),fieldLabelId:`${n}`}),fieldId:e,isRequired:l,children:t(se,{"aria-label":i(n),name:r,isDisabled:a,defaultValue:xe(d),addButtonLabel:i("addMultivaluedLabel",{fieldLabel:i(n).toLowerCase()}),stringify:o})})},ke=({name:e,label:n,helpText:d,defaultValue:s,required:o,isDisabled:l=!1})=>{const{t:a}=C(),{register:i}=y();return t(v,{label:a(n),labelIcon:t(b,{helpText:a(d),fieldLabelId:`${n}`}),fieldId:e,isRequired:o,children:t(ie,{id:e,"data-testid":e,isDisabled:l,defaultValue:s?.toString(),...i(S(e))})})},j=e=>e?.includes(".")?e.split("."):["",e||""],we=e=>e.client?.clientId?`${e.client.clientId}.${e.role.name}`:e.role.name,Re=({name:e,label:n,helpText:d,defaultValue:s,required:o,isDisabled:l=!1})=>{const{t:a}=C(),[i,r]=de(),{control:h,formState:{errors:u}}=y(),c=S(e);return t(v,{label:a(n),labelIcon:t(b,{helpText:a(d),fieldLabelId:`${n}`}),validated:u[c]?"error":"default",helperTextInvalid:a("required"),fieldId:e,isRequired:o,children:t(k,{name:c,defaultValue:s||"",control:h,render:({field:p})=>$(z,{children:[i&&t(ce,{id:"id",type:"roles",name:e,onAssign:g=>p.onChange(we(g[0])),onClose:r,isRadio:!0}),p.value!==""&&t(E,{children:t(D,{textMaxWidth:"500px",onClick:()=>p.onChange(""),children:t(ue,{role:{name:j(p.value)[1]},client:{clientId:j(p.value)[0]}})})}),t(E,{children:t(A,{onClick:r,variant:"secondary","data-testid":"add-roles",disabled:l,children:a("selectRole.label")})})]})})})},Ve=({name:e,label:n,helpText:d,defaultValue:s,required:o,isDisabled:l=!1})=>{const{t:a}=C(),{control:i}=y();return t(v,{label:a(n),labelIcon:t(b,{helpText:t("span",{style:{whiteSpace:"pre-wrap"},children:d}),fieldLabelId:`${n}`}),fieldId:e,isRequired:o,children:t(k,{name:S(e),defaultValue:s,control:i,render:({field:r})=>t(pe,{id:e,"data-testid":e,isReadOnly:l,type:"text",onChange:r.onChange,code:r.value,height:"600px",language:he.javascript})})})},Ae=({name:e,label:n,helpText:d,defaultValue:s,isDisabled:o=!1,required:l})=>{const{t:a}=C(),{register:i}=y();return t(v,{label:a(n),labelIcon:t(b,{helpText:a(d),fieldLabelId:`${n}`}),fieldId:e,isRequired:l,children:t(fe,{id:e,"data-testid":e,isDisabled:o,defaultValue:s?.toString(),...i(S(e))})})},Me=({name:e,label:n,helpText:d,defaultValue:s,required:o,isDisabled:l=!1})=>{const{t:a}=C(),{register:i}=y();return t(v,{label:a(n),labelIcon:t(b,{helpText:a(d),fieldLabelId:`${n}`}),fieldId:e,required:o,children:t(ge,{id:e,"data-testid":e,isDisabled:l,defaultValue:s?.toString(),...i(S(e))})})},Fe=({name:e,label:n,helpText:d,required:s=!1})=>{const{t:o}=C(),{formState:{errors:l}}=y(),[a,i]=L(),r=S(e);_(()=>U.users.getProfile(),u=>i(u),[]);const h=u=>u?.attributes?u.attributes.map(c=>({key:c.name,label:c.name})):[];return a?t(v,{label:o(n),isRequired:s,labelIcon:t(b,{helpText:o(d),fieldLabelId:n}),fieldId:r,validated:l[r]?"error":"default",helperTextInvalid:o("required"),children:t(le,{name:r,rules:s?{required:!0}:{},selectItems:h(a)})}):null},J={String:Ae,Text:Me,boolean:me,List:Se,Role:Re,Script:Ve,Map:Te,Group:be,ClientList:Ce,UserProfileAttributeList:Fe,MultivaluedList:Le,MultivaluedString:$e,File:ve,Password:ke},Ne=e=>e in J,Ze=({properties:e,...n})=>t(B,{children:e.map(d=>{const s=d.type;if(Ne(s)){const o=J[s];return t(o,{...d,...n},d.name)}else console.warn(`There is no editor registered for ${s}`)})}),S=e=>H(`config.${e}`);export{Ie as C,Ze as D,S as c};
//# sourceMappingURL=DynamicComponents-D5DD9CFr.js.map
