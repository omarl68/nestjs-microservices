import{jsxs as h,Fragment as b,jsx as e}from"react/jsx-runtime";import{useState as A}from"react";import{u as _,Z as R,a4 as m,a0 as p,a2 as n,a1 as I,a3 as U,I as x,J as y,S,a as q,aO as j,d as E}from"./index-C9t2UlUN.js";import{K}from"./KeycloakTextArea-DChmurIP.js";import{K as w}from"./KeycloakTextInput-DrlF32nr.js";import{T as g,S as k,F as D}from"./discovery-settings-sewf1As9.js";import{E as F}from"./ExpandableSection-DjAskWMd.js";import{C as P}from"./ClientIdSecret-4ICGdsMs.js";import{R as z,D as H}from"./DisplayOrder-Dong-iTt.js";const T=["plain","S256"],C=({readOnly:t})=>{const{t:l}=_(),[i,r]=A(!1),{register:o,control:c,formState:{errors:u}}=R(),v=m({control:c,name:"config.validateSignature"}),f=m({control:c,name:"config.useJwksUrl"}),s=m({control:c,name:"config.pkceEnabled"});return h("div",{className:"pf-c-form pf-m-horizontal",children:[e(p,{label:l("authorizationUrl"),fieldId:"kc-authorization-url",isRequired:!0,validated:u.config?.authorizationUrl?n.error:n.default,helperTextInvalid:l("required"),children:e(w,{type:"url","data-testid":"authorizationUrl",id:"kc-authorization-url",validated:u.config?.authorizationUrl?n.error:n.default,isReadOnly:t,...o("config.authorizationUrl",{required:!0})})}),e(p,{label:l("tokenUrl"),fieldId:"tokenUrl",isRequired:!0,validated:u.config?.tokenUrl?n.error:n.default,helperTextInvalid:l("required"),children:e(w,{type:"url",id:"tokenUrl","data-testid":"tokenUrl",validated:u.config?.tokenUrl?n.error:n.default,isReadOnly:t,...o("config.tokenUrl",{required:!0})})}),e(g,{field:"config.logoutUrl",label:"logoutUrl",isReadOnly:t}),e(g,{field:"config.userInfoUrl",label:"userInfoUrl",isReadOnly:t}),e(g,{field:"config.issuer",label:"issuer",isReadOnly:t}),e(k,{field:"config.validateSignature",label:"validateSignature",isReadOnly:t}),v==="true"&&h(b,{children:[e(k,{field:"config.useJwksUrl",label:"useJwksUrl","data-testid":"useJwksUrl",isReadOnly:t}),f==="true"?e(g,{field:"config.jwksUrl",label:"jwksUrl",isReadOnly:t}):h(b,{children:[e(D,{label:"validatingPublicKey",children:e(K,{"data-testid":"validatingPublicKey","aria-label":l("validatingPublicKey"),...o("config.publicKeySignatureVerifier")})}),e(g,{field:"config.publicKeySignatureVerifierKeyId",label:"validatingPublicKeyId",isReadOnly:t})]})]}),e(k,{field:"config.pkceEnabled",label:"pkceEnabled",isReadOnly:t}),s==="true"&&e(p,{className:"pf-u-pb-3xl",label:l("pkceMethod"),labelIcon:e(I,{helpText:l("pkceMethodHelp"),fieldLabelId:"pkceMethod"}),fieldId:"pkceMethod",children:e(U,{name:"config.pkceMethod",defaultValue:T[0],control:c,render:({field:a})=>e(x,{toggleId:"pkceMethod",required:!0,direction:"down",onToggle:()=>r(!i),onSelect:(d,O)=>{a.onChange(O),r(!1)},selections:l(`${a.value}`),variant:y.single,"aria-label":l("pkceMethod"),isOpen:i,children:T.map(d=>e(S,{selected:d===a.value,value:d,children:l(`${d}`)},d))})})})]})},B=({readOnly:t})=>{const{t:l}=_(),[i,r]=A(!1);return h(b,{children:[t&&e(F,{className:"keycloak__discovery-settings__metadata",toggleText:l(i?"hideMetaData":"showMetaData"),onToggle:()=>r(!i),isExpanded:i,children:e(C,{readOnly:t})}),!t&&e(C,{readOnly:t})]})},M=["client_secret_post","client_secret_basic","client_secret_jwt","private_key_jwt"],Q=({create:t=!0})=>{const l=q().providers.clientSignature.providers,{t:i}=_(),{control:r}=R(),[o,c]=A(!1),[u,v]=A(!1),f=m({control:r,name:"config.clientAuthMethod"});return h(b,{children:[e(p,{label:i("clientAuthentication"),labelIcon:e(I,{helpText:i("clientAuthenticationHelp"),fieldLabelId:"clientAuthentication"}),fieldId:"clientAuthentication",children:e(U,{name:"config.clientAuthMethod",defaultValue:M[0],control:r,render:({field:s})=>e(x,{toggleId:"clientAuthentication",required:!0,onToggle:()=>c(!o),onSelect:(a,d)=>{s.onChange(d),c(!1)},selections:s.value,variant:y.single,"aria-label":i("clientAuthentication"),isOpen:o,children:M.map(a=>e(S,{selected:a===s.value,value:a,children:i(`clientAuthentications.${a}`)},a))})})}),e(P,{secretRequired:f!=="private_key_jwt",create:t}),e(p,{label:i("clientAssertionSigningAlg"),labelIcon:e(I,{helpText:i("clientAssertionSigningAlgHelp"),fieldLabelId:"clientAssertionSigningAlg"}),fieldId:"clientAssertionSigningAlg",children:e(U,{name:"config.clientAssertionSigningAlg",defaultValue:"",control:r,render:({field:s})=>e(x,{maxHeight:200,toggleId:"clientAssertionSigningAlg",onToggle:()=>v(!u),onSelect:(a,d)=>{s.onChange(d.toString()),v(!1)},selections:s.value||i("algorithmNotSpecified"),variant:y.single,"aria-label":i("selectClientAssertionSigningAlg"),isOpen:u,children:[e(S,{selected:s.value==="",value:"",children:i("algorithmNotSpecified")},""),...j(l).map(a=>e(S,{selected:a===s.value,value:a},a))]})})}),(f==="private_key_jwt"||f==="client_secret_jwt")&&e(g,{field:"config.clientAssertionAudience",label:"clientAssertionAudience"}),f==="private_key_jwt"&&e(k,{field:"config.jwtX509HeadersEnabled",label:"jwtX509HeadersEnabled"})]})},Y=()=>{const{t}=_(),{tab:l}=E(),{register:i,control:r,formState:{errors:o}}=R(),c=m({control:r,name:"alias"});return h(b,{children:[e(z,{id:c}),e(p,{label:t("alias"),labelIcon:e(I,{helpText:t("aliasHelp"),fieldLabelId:"alias"}),fieldId:"alias",isRequired:!0,validated:o.alias?n.error:n.default,helperTextInvalid:t("required"),children:e(w,{isReadOnly:l==="settings",isRequired:!0,id:"alias","data-testid":"alias",validated:o.alias?n.error:n.default,...i("alias",{required:!0})})}),e(g,{field:"displayName",label:"displayName"}),e(H,{})]})};export{B as D,Y as O,Q as a};
//# sourceMappingURL=OIDCGeneralSettings-DSZraG0A.js.map
