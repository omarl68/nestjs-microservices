import{jsx as e,jsxs as m,Fragment as x}from"react/jsx-runtime";import{useState as b}from"react";import{u as R,Z as P,a4 as h,a0 as o,a1 as d,a2 as c,a3 as v,I as y,J as A,S as n,ab as L,b as B,bl as V}from"./index-C9t2UlUN.js";import{K as j}from"./KeycloakTextArea-DChmurIP.js";import{K as f}from"./KeycloakTextInput-DrlF32nr.js";import{S as s,F as G,T as X}from"./discovery-settings-sewf1As9.js";import{E as Q}from"./ExpandableSection-DjAskWMd.js";import{F as $}from"./ViewHeader-cxZm8XhN.js";import{R as J,D as W}from"./DisplayOrder-Dong-iTt.js";const U=({readOnly:t})=>{const{t:i}=R(),{register:u,control:r,formState:{errors:g}}=P(),[T,S]=b(!1),[E,C]=b(!1),[O,w]=b(!1),[_,D]=b(!1),[H,N]=b(!1),F=h({control:r,name:"config.wantAuthnRequestsSigned"}),M=h({control:r,name:"config.wantAssertionsEncrypted"}),q=h({control:r,name:"config.validateSignature"}),k=h({control:r,name:"config.useMetadataDescriptorUrl"}),K=h({control:r,name:"config.principalType"});return m("div",{className:"pf-c-form pf-m-horizontal",children:[e(o,{label:i("serviceProviderEntityId"),fieldId:"kc-saml-service-provider-entity-id",labelIcon:e(d,{helpText:i("serviceProviderEntityIdHelp"),fieldLabelId:"serviceProviderEntityId"}),children:e(f,{"data-testid":"serviceProviderEntityId",id:"kc-saml-service-provider-entity-id",...u("config.entityId")})}),e(o,{label:i("identityProviderEntityId"),fieldId:"kc-identity-provider-entity-id",labelIcon:e(d,{helpText:i("identityProviderEntityIdHelp"),fieldLabelId:"identityProviderEntityId"}),children:e(f,{"data-testid":"identityProviderEntityId",id:"kc-identity-provider-entity-id",...u("config.idpEntityId")})}),e(o,{label:i("ssoServiceUrl"),labelIcon:e(d,{helpText:i("ssoServiceUrlHelp"),fieldLabelId:"ssoServiceUrl"}),fieldId:"kc-sso-service-url",isRequired:!0,validated:g.config?.singleSignOnServiceUrl?c.error:c.default,helperTextInvalid:i("required"),children:e(f,{type:"url","data-testid":"sso-service-url",id:"kc-sso-service-url",validated:g.config?.singleSignOnServiceUrl?c.error:c.default,isReadOnly:t,...u("config.singleSignOnServiceUrl",{required:!0})})}),e(o,{label:i("singleLogoutServiceUrl"),labelIcon:e(d,{helpText:i("singleLogoutServiceUrlHelp"),fieldLabelId:"singleLogoutServiceUrl"}),fieldId:"single-logout-service-url","data-testid":"single-logout-service-url",validated:g.config?.singleLogoutServiceUrl?c.error:c.default,helperTextInvalid:i("required"),children:e(f,{type:"url",id:"single-logout-service-url",isReadOnly:t,...u("config.singleLogoutServiceUrl")})}),e(s,{field:"config.backchannelSupported",label:"backchannelLogout","data-testid":"backchannelLogout",isReadOnly:t}),e(s,{field:"config.sendIdTokenOnLogout",label:"sendIdTokenOnLogout","data-testid":"sendIdTokenOnLogout",defaultValue:"true",isReadOnly:t}),e(s,{field:"config.sendClientIdOnLogout",label:"sendClientIdOnLogout","data-testid":"sendClientIdOnLogout",isReadOnly:t}),e(o,{label:i("nameIdPolicyFormat"),labelIcon:e(d,{helpText:i("nameIdPolicyFormatHelp"),fieldLabelId:"nameIdPolicyFormat"}),fieldId:"kc-nameIdPolicyFormat",helperTextInvalid:i("required"),children:e(v,{name:"config.nameIDPolicyFormat",defaultValue:"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent",control:r,render:({field:a})=>m(y,{toggleId:"kc-nameIdPolicyFormat",onToggle:l=>S(l),isOpen:T,onSelect:(l,p)=>{a.onChange(p),S(!1)},selections:a.value,variant:A.single,isDisabled:t,children:[e(n,{"data-testid":"persistent-option",value:"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent",isPlaceholder:!0,children:i("persistent")}),e(n,{"data-testid":"transient-option",value:"urn:oasis:names:tc:SAML:2.0:nameid-format:transient",children:i("transient")}),e(n,{"data-testid":"email-option",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress",children:i("email")}),e(n,{"data-testid":"kerberos-option",value:"urn:oasis:names:tc:SAML:2.0:nameid-format:kerberos",children:i("kerberos")}),e(n,{"data-testid":"x509-option",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName",children:i("x509")}),e(n,{"data-testid":"windowsDomainQN-option",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:WindowsDomainQualifiedName",children:i("windowsDomainQN")}),e(n,{"data-testid":"unspecified-option",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified",children:i("unspecified")})]})})}),e(o,{label:i("principalType"),labelIcon:e(d,{helpText:i("principalTypeHelp"),fieldLabelId:"principalType"}),fieldId:"kc-principalType",helperTextInvalid:i("required"),children:e(v,{name:"config.principalType",defaultValue:i("subjectNameId"),control:r,render:({field:a})=>m(y,{toggleId:"kc-principalType",onToggle:l=>C(l),isOpen:E,onSelect:(l,p)=>{a.onChange(p.toString()),C(!1)},selections:a.value,variant:A.single,isDisabled:t,children:[e(n,{"data-testid":"subjectNameId-option",value:"SUBJECT",isPlaceholder:!0,children:i("subjectNameId")}),e(n,{"data-testid":"attributeName-option",value:"ATTRIBUTE",children:i("attributeName")}),e(n,{"data-testid":"attributeFriendlyName-option",value:"FRIENDLY_ATTRIBUTE",children:i("attributeFriendlyName")})]})})}),K?.includes("ATTRIBUTE")&&e(o,{label:i("principalAttribute"),labelIcon:e(d,{helpText:i("principalAttributeHelp"),fieldLabelId:"principalAttribute"}),fieldId:"principalAttribute",children:e(f,{id:"principalAttribute","data-testid":"principalAttribute",isReadOnly:t,...u("config.principalAttribute")})}),e(s,{field:"config.allowCreate",label:"allowCreate",isReadOnly:t}),e(s,{field:"config.postBindingResponse",label:"httpPostBindingResponse",isReadOnly:t}),e(s,{field:"config.postBindingAuthnRequest",label:"httpPostBindingAuthnRequest",isReadOnly:t}),e(s,{field:"config.postBindingLogout",label:"httpPostBindingLogout",isReadOnly:t}),e(s,{field:"config.wantAuthnRequestsSigned",label:"wantAuthnRequestsSigned",isReadOnly:t}),F==="true"&&m(x,{children:[e(o,{label:i("signatureAlgorithm"),labelIcon:e(d,{helpText:i("signatureAlgorithmHelp"),fieldLabelId:"signatureAlgorithm"}),fieldId:"kc-signatureAlgorithm",children:e(v,{name:"config.signatureAlgorithm",defaultValue:"RSA_SHA256",control:r,render:({field:a})=>m(y,{toggleId:"kc-signatureAlgorithm",onToggle:l=>w(l),isOpen:O,onSelect:(l,p)=>{a.onChange(p.toString()),w(!1)},selections:a.value,variant:A.single,isDisabled:t,children:[e(n,{value:"RSA_SHA1"}),e(n,{value:"RSA_SHA256",isPlaceholder:!0}),e(n,{value:"RSA_SHA256_MGF1"}),e(n,{value:"RSA_SHA512"}),e(n,{value:"RSA_SHA512_MGF1"}),e(n,{value:"DSA_SHA1"})]})})}),e(o,{label:i("samlSignatureKeyName"),labelIcon:e(d,{helpText:i("samlSignatureKeyNameHelp"),fieldLabelId:"samlSignatureKeyName"}),fieldId:"kc-samlSignatureKeyName",children:e(v,{name:"config.xmlSigKeyInfoKeyNameTransformer",defaultValue:i("keyID"),control:r,render:({field:a})=>m(y,{toggleId:"kc-samlSignatureKeyName",onToggle:l=>N(l),isOpen:H,onSelect:(l,p)=>{a.onChange(p.toString()),N(!1)},selections:a.value,variant:A.single,isDisabled:t,children:[e(n,{value:"NONE"}),e(n,{value:i("keyID"),isPlaceholder:!0}),e(n,{value:i("certSubject")})]})})})]}),e(s,{field:"config.wantAssertionsSigned",label:"wantAssertionsSigned",isReadOnly:t}),e(s,{field:"config.wantAssertionsEncrypted",label:"wantAssertionsEncrypted",isReadOnly:t}),M==="true"&&e(o,{label:i("encryptionAlgorithm"),labelIcon:e(d,{helpText:i("encryptionAlgorithmHelp"),fieldLabelId:"encryptionAlgorithm"}),fieldId:"kc-encryptionAlgorithm",children:e(v,{name:"config.encryptionAlgorithm",defaultValue:"RSA-OAEP",control:r,render:({field:a})=>m(y,{toggleId:"kc-encryptionAlgorithm",onToggle:l=>D(l),isOpen:_,onSelect:(l,p)=>{a.onChange(p.toString()),D(!1)},selections:a.value,variant:A.single,isDisabled:t,children:[e(n,{value:"RSA-OAEP"}),e(n,{value:"RSA1_5"})]})})}),e(s,{field:"config.forceAuthn",label:"forceAuthentication",isReadOnly:t}),e(s,{field:"config.validateSignature",label:"validateSignature",isReadOnly:t}),q==="true"&&m(x,{children:[e(o,{label:i("metadataDescriptorUrl"),labelIcon:e(d,{helpText:i("metadataDescriptorUrlHelp"),fieldLabelId:"metadataDescriptorUrl"}),isRequired:k==="true",validated:g.config?.metadataDescriptorUrl?c.error:c.default,fieldId:"metadataDescriptorUrl",helperTextInvalid:i("required"),children:e(f,{type:"url",id:"metadataDescriptorUrl","data-testid":"metadataDescriptorUrl",isReadOnly:t,validated:g.config?.metadataDescriptorUrl?c.error:c.default,...u("config.metadataDescriptorUrl",{required:k==="true"})})}),e(s,{field:"config.useMetadataDescriptorUrl",label:"useMetadataDescriptorUrl","data-testid":"useMetadataDescriptorUrl",isReadOnly:t}),k!=="true"&&e(G,{label:"validatingX509Certs",children:e(j,{id:"validatingX509Certs","data-testid":"validatingX509Certs",isReadOnly:t,...u("config.signingCertificate")})})]}),e(s,{field:"config.signSpMetadata",label:"signServiceProviderMetadata","data-testid":"signServiceProviderMetadata",isReadOnly:t}),e(s,{field:"config.loginHint",label:"passSubject","data-testid":"passSubject",isReadOnly:t}),e(o,{label:i("allowedClockSkew"),labelIcon:e(d,{helpText:i("allowedClockSkewHelp"),fieldLabelId:"allowedClockSkew"}),fieldId:"allowedClockSkew",helperTextInvalid:i("required"),children:e(v,{name:"config.allowedClockSkew",defaultValue:0,control:r,render:({field:a})=>{const l=Number(a.value);return e(L,{"data-testid":"allowedClockSkew",inputName:"allowedClockSkew",min:0,max:2147483,value:l,readOnly:!0,onPlus:()=>a.onChange(l+1),onMinus:()=>a.onChange(l-1),onChange:p=>{const I=Number(p.target.value);a.onChange(I<0?0:I)}})}})}),e(o,{label:i("attributeConsumingServiceIndex"),labelIcon:e(d,{helpText:i("attributeConsumingServiceIndexHelp"),fieldLabelId:"attributeConsumingServiceIndex"}),fieldId:"attributeConsumingServiceIndex",helperTextInvalid:i("required"),children:e(v,{name:"config.attributeConsumingServiceIndex",defaultValue:0,control:r,render:({field:a})=>{const l=Number(a.value);return e(L,{"data-testid":"attributeConsumingServiceIndex",inputName:"attributeConsumingServiceIndex",min:0,max:2147483,value:l,readOnly:!0,onPlus:()=>a.onChange(l+1),onMinus:()=>a.onChange(l-1),onChange:p=>{const I=Number(p.target.value);a.onChange(I<0?0:I)}})}})}),e(o,{label:i("attributeConsumingServiceName"),labelIcon:e(d,{helpText:i("attributeConsumingServiceNameHelp"),fieldLabelId:"attributeConsumingServiceName"}),fieldId:"attributeConsumingServiceName",helperTextInvalid:i("required"),children:e(f,{id:"attributeConsumingServiceName","data-testid":"attributeConsumingServiceName",isReadOnly:t,...u("config.attributeConsumingServiceName")})})]})},re=({readOnly:t})=>{const{t:i}=R(),[u,r]=b(!1);return t?e(Q,{className:"keycloak__discovery-settings__metadata",toggleText:i(u?"hideMetaData":"showMetaData"),onToggle:g=>r(g),isExpanded:u,children:e(U,{readOnly:t})}):e(U,{readOnly:t})},oe=({isAliasReadonly:t=!1})=>{const{t:i}=R(),{realm:u}=B(),{register:r,control:g,formState:{errors:T}}=P(),S=h({control:g,name:"alias"});return m(x,{children:[e(J,{id:S}),e(o,{label:i("alias"),labelIcon:e(d,{helpText:i("aliasHelp"),fieldLabelId:"alias"}),fieldId:"alias",isRequired:!0,validated:T.alias?c.error:c.default,helperTextInvalid:i("required"),children:e(f,{isRequired:!0,id:"alias","data-testid":"alias",isReadOnly:t,validated:T.alias?c.error:c.default,...r("alias",{required:!0})})}),e(X,{field:"displayName",label:"displayName","data-testid":"displayName"}),e(W,{}),t?e(o,{label:i("endpoints"),fieldId:"endpoints",labelIcon:e(d,{helpText:i("aliasHelp"),fieldLabelId:"alias"}),className:"keycloak__identity-providers__saml_link",children:e($,{title:i("samlEndpointsLabel"),href:`${V.authUrl}/realms/${u}/broker/${S}/endpoint/descriptor`,isInline:!0})}):null]})};export{re as D,oe as S};
//# sourceMappingURL=SamlGeneralSettings-CdfgS81L.js.map
