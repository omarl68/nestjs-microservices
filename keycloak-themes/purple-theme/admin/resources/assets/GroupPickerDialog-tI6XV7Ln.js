import{jsx as c,jsxs as K,Fragment as Se}from"react/jsx-runtime";import*as I from"react";import w,{useState as x,useEffect as Ve,useRef as se,Fragment as Te}from"react";import{_ as X,k as y,bP as De,ad as Ae,bo as ie,ca as Le,l as Oe,aD as oe,c9 as re,c_ as Re,c3 as Be,K as ge,u as q,e as ee,g as Me,h as U,B as be,a0 as Fe,a2 as Q,f as O,A as ve,b as Ne,c as ke,aR as $e,bR as je,q as we,aX as Ke,bz as Ue,bK as P,U as qe,c$ as Ce,d0 as ce,O as ze,aq as He,ct as Je,D as Y,b1 as We,bS as Xe,bT as le}from"./index-C9t2UlUN.js";import{h as de,l as Qe,i as ue,P as Ee,L as me}from"./PaginatingTableToolbar-oQUfBy2J.js";import{u as J}from"./useToggle-K3Kx99tM.js";import{K as Ye}from"./KeycloakTextInput-DrlF32nr.js";import{M as Ie,a as te}from"./Modal-Bgkd26UL.js";import{F as Ze}from"./Form-Cdw1qhWG.js";import{C as Pe}from"./ConfirmDialog-BDkqxnFL.js";import{s as W,e as et,D as tt,a as at,c as nt,d as st}from"./DataListItemRow-Bimi62Tu.js";import{b as it,a as ot}from"./_baseFlatten-BQ8y46Zj.js";const ye=e=>{var{children:t,className:o,visibility:r,id:i,"aria-label":u,"aria-labelledby":f,isPlainButtonAction:a}=e,s=X(e,["children","className","visibility","id","aria-label","aria-labelledby","isPlainButtonAction"]);return I.createElement("div",Object.assign({className:y(W.dataListItemAction,De(r,W),o)},s),a?I.createElement("div",{className:y(W.dataListAction)},t):t)};ye.displayName="DataListAction";const xe=e=>{var{className:t="",onChange:o=(d,k)=>{},isValid:r=!0,isDisabled:i=!1,isChecked:u=!1,checked:f=!1,defaultChecked:a,otherControls:s=!1}=e,l=X(e,["className","onChange","isValid","isDisabled","isChecked","checked","defaultChecked","otherControls"]);const v=I.createElement("div",{className:y(W.dataListCheck)},I.createElement("input",Object.assign({},l,{type:"checkbox",onChange:d=>o(d.currentTarget.checked,d),"aria-invalid":!r,disabled:i},[!0,!1].includes(a)&&{defaultChecked:a},![!0,!1].includes(a)&&{checked:u||f})));return I.createElement(I.Fragment,null,!s&&I.createElement("div",{className:y(W.dataListItemControl,t)},v),s&&v)};xe.displayName="DataListCheck";const Ge=e=>{var{isNested:t=!1,toolbar:o,children:r}=e,i=X(e,["isNested","toolbar","children"]);return I.createElement(I.Fragment,null,o&&I.createElement(I.Fragment,null,o,I.createElement(Ae,null)),I.createElement("ul",Object.assign({className:y("pf-c-tree-view__list"),role:t?"group":"tree"},i),r))};Ge.displayName="TreeViewList";const E={badge:"pf-c-badge",modifiers:{compact:"pf-m-compact",guides:"pf-m-guides",expanded:"pf-m-expanded",noBackground:"pf-m-no-background",current:"pf-m-current",read:"pf-m-read",selectable:"pf-m-selectable",truncate:"pf-m-truncate"},themeDark:"pf-theme-dark",treeView:"pf-c-tree-view",treeViewAction:"pf-c-tree-view__action",treeViewContent:"pf-c-tree-view__content",treeViewListItem:"pf-c-tree-view__list-item",treeViewNode:"pf-c-tree-view__node",treeViewNodeCheck:"pf-c-tree-view__node-check",treeViewNodeContainer:"pf-c-tree-view__node-container",treeViewNodeContent:"pf-c-tree-view__node-content",treeViewNodeCount:"pf-c-tree-view__node-count",treeViewNodeIcon:"pf-c-tree-view__node-icon",treeViewNodeText:"pf-c-tree-view__node-text",treeViewNodeTitle:"pf-c-tree-view__node-title",treeViewNodeToggle:"pf-c-tree-view__node-toggle",treeViewNodeToggleIcon:"pf-c-tree-view__node-toggle-icon",treeViewSearch:"pf-c-tree-view__search"},rt=({name:e,title:t,id:o,isExpanded:r,defaultExpanded:i=!1,children:u=null,onSelect:f,onCheck:a,hasCheck:s=!1,checkProps:l={checked:!1},hasBadge:v=!1,customBadgeContent:d,badgeProps:k={isRead:!0},isSelectable:g=!1,isCompact:C,activeItems:_=[],itemData:D,parentItem:M,icon:R,expandedIcon:T,action:A,compareItems:G,useMemo:p})=>{const[N,S]=x(i);Ve(()=>{r!=null?S(r):i!=null&&S(N||i)},[r,i]);let V="button";s?V="label":g&&(V="div");const B=s||g?"button":"span",z=n=>w.createElement(B,Object.assign({className:y(E.treeViewNodeToggle),onClick:m=>{(g||s)&&S(!N),g&&m.stopPropagation()}},(s||g)&&{"aria-labelledby":`label-${n}`},{tabIndex:-1}),w.createElement("span",{className:y(E.treeViewNodeToggleIcon)},w.createElement(Oe,{"aria-hidden":"true"}))),H=n=>w.createElement("span",{className:y(E.treeViewNodeCheck)},w.createElement("input",Object.assign({type:"checkbox",onChange:m=>a&&a(m,D,M),onClick:m=>m.stopPropagation(),ref:m=>m&&(m.indeterminate=l.checked===null)},l,{checked:l.checked===null?!1:l.checked,id:n,tabIndex:-1}))),j=w.createElement("span",{className:y(E.treeViewNodeIcon)},!N&&R,N&&(T||R)),F=()=>{const n=w.createElement(w.Fragment,null,C&&t&&w.createElement("span",{className:y(E.treeViewNodeTitle)},t),g?w.createElement("button",{tabIndex:-1,className:y(E.treeViewNodeText)},e):w.createElement("span",{className:y(E.treeViewNodeText)},e));return C?w.createElement("span",{className:y(E.treeViewNodeContent)},n):n},b=w.createElement(w.Fragment,null,v&&u&&w.createElement("span",{className:y(E.treeViewNodeCount)},w.createElement(ie,Object.assign({},k),d||u.props.data.length)),v&&!u&&d!==void 0&&w.createElement("span",{className:y(E.treeViewNodeCount)},w.createElement(ie,Object.assign({},k),d)));return w.createElement("li",Object.assign({id:o,className:y(E.treeViewListItem,N&&E.modifiers.expanded)},N&&{"aria-expanded":"true"},{role:"treeitem",tabIndex:-1}),w.createElement("div",{className:y(E.treeViewContent)},w.createElement(Le,{prefix:g?"selectable-id":"checkbox-id"},n=>w.createElement(V,Object.assign({className:y(E.treeViewNode,u&&(g||s)&&E.modifiers.selectable,(!u||g)&&_&&_.length>0&&_.some(m=>G&&m&&G(m,D))?E.modifiers.current:""),onClick:m=>{s||(f&&f(m,D,M),!g&&u&&m.isDefaultPrevented()!==!0&&S(!N))}},s&&{htmlFor:n},(s||g&&u)&&{id:`label-${n}`}),w.createElement("span",{className:y(E.treeViewNodeContainer)},u&&z(n),s&&H(n),R&&j,F(),b))),A&&w.createElement("div",{className:y(E.treeViewAction)},A)),N&&u)},_e=w.memo(rt,(e,t)=>{if(!t.useMemo)return!1;const o=e.activeItems&&e.activeItems.length>0&&e.activeItems.some(i=>e.compareItems&&i&&e.compareItems(i,e.itemData)),r=t.activeItems&&t.activeItems.length>0&&t.activeItems.some(i=>t.compareItems&&i&&t.compareItems(i,t.itemData));return!(o||r||e.name!==t.name||e.title!==t.title||e.id!==t.id||e.isExpanded!==t.isExpanded||e.defaultExpanded!==t.defaultExpanded||e.onSelect!==t.onSelect||e.onCheck!==t.onCheck||e.hasCheck!==t.hasCheck||e.checkProps!==t.checkProps||e.hasBadge!==t.hasBadge||e.customBadgeContent!==t.customBadgeContent||e.badgeProps!==t.badgeProps||e.isCompact!==t.isCompact||e.icon!==t.icon||e.expandedIcon!==t.expandedIcon||e.action!==t.action||e.parentItem!==t.parentItem||e.itemData!==t.itemData)});_e.displayName="TreeViewListItem";class ct extends I.Component{constructor(){super(...arguments),this.displayName="TreeViewRoot",this.treeRef=I.createRef(),this.handleKeys=t=>{var o,r,i,u,f,a,s;if(!this.treeRef.current.contains(t.target))return;const l=document.activeElement,v=t.key,d=Array.from((o=this.treeRef.current)===null||o===void 0?void 0:o.getElementsByClassName("pf-c-tree-view__node")).filter(k=>!k.classList.contains("pf-m-disabled"));if(v===oe.Space&&(l.click(),t.preventDefault()),de(t,d,k=>l===k,void 0,[],void 0,!0,!0),["ArrowLeft","ArrowRight"].includes(v)){const k=(i=(r=l?.firstElementChild)===null||r===void 0?void 0:r.firstElementChild)===null||i===void 0?void 0:i.classList.contains("pf-c-tree-view__node-toggle"),g=(u=l?.closest("li"))===null||u===void 0?void 0:u.classList.contains("pf-m-expanded");if(v==="ArrowLeft")if(k&&g)l.click();else{const C=(f=l?.closest("ul"))===null||f===void 0?void 0:f.parentElement;if(C?.tagName!=="DIV"){const _=C?.querySelector("button");l.tabIndex=-1,_&&(_.tabIndex=0,_.focus())}}else if(k&&!g){l.tabIndex=-1,l.click();const C=(s=(a=l?.closest("li"))===null||a===void 0?void 0:a.querySelector("ul > li"))===null||s===void 0?void 0:s.querySelector("button");C&&(C.tabIndex=0,C.focus())}t.preventDefault()}},this.handleKeysCheckbox=t=>{var o,r,i,u,f;if(!this.treeRef.current.contains(t.target))return;const a=document.activeElement,s=t.key;s===oe.Space&&(a.click(),t.preventDefault());const l=Array.from((o=this.treeRef.current)===null||o===void 0?void 0:o.getElementsByClassName("pf-c-tree-view__node"));de(t,l,v=>v.contains(a),v=>v.querySelector("button,input"),[],void 0,!0,!0),["ArrowLeft","ArrowRight"].includes(s)&&(s==="ArrowLeft"?a?.tagName==="INPUT"?!((r=a?.parentElement)===null||r===void 0)&&r.previousSibling&&a.parentElement.previousSibling.focus():a?.previousSibling&&(((i=a.previousElementSibling)===null||i===void 0?void 0:i.tagName)==="SPAN"?a.previousSibling.firstChild.focus():a.previousSibling.focus()):a?.tagName==="INPUT"?!((u=a.parentElement)===null||u===void 0)&&u.nextSibling&&a.parentElement.nextSibling.focus():a?.nextSibling&&(((f=a.nextElementSibling)===null||f===void 0?void 0:f.tagName)==="SPAN"?a.nextSibling.firstChild.focus():a.nextSibling.focus()),t.preventDefault())},this.variantStyleModifiers={default:"",compact:E.modifiers.compact,compactNoBackground:[E.modifiers.compact,E.modifiers.noBackground]}}componentDidMount(){var t;if(re&&window.addEventListener("keydown",this.props.hasChecks||this.props.hasSelectableNodes?this.handleKeysCheckbox:this.handleKeys),this.props.hasChecks||this.props.hasSelectableNodes){const o=this.treeRef.current.getElementsByClassName("pf-c-tree-view__node-toggle")[0];if(o&&(o.tabIndex=0),this.props.hasChecks){const r=this.treeRef.current.getElementsByTagName("INPUT")[0];r&&(r.tabIndex=0)}if(this.props.hasSelectableNodes){const r=this.treeRef.current.getElementsByClassName("pf-c-tree-view__node-text")[0];r&&(r.tabIndex=0)}}else((t=this.treeRef.current)===null||t===void 0?void 0:t.getElementsByClassName("pf-c-tree-view__node")[0]).tabIndex=0}componentWillUnmount(){re&&window.removeEventListener("keydown",this.props.hasChecks||this.props.hasSelectableNodes?this.handleKeysCheckbox:this.handleKeys)}render(){const t=this.props,{children:o,hasChecks:r,hasGuides:i,variant:u,className:f,hasSelectableNodes:a}=t,s=X(t,["children","hasChecks","hasGuides","variant","className","hasSelectableNodes"]);return I.createElement("div",Object.assign({className:y(E.treeView,i&&E.modifiers.guides,this.variantStyleModifiers[u],f),ref:this.treeRef},s),o)}}const ae=e=>{var{data:t,isNested:o=!1,hasChecks:r=!1,hasBadges:i=!1,hasGuides:u=!1,hasSelectableNodes:f=!1,variant:a="default",defaultAllExpanded:s=!1,allExpanded:l,icon:v,expandedIcon:d,parentItem:k,onSelect:g,onCheck:C,toolbar:_,activeItems:D,compareItems:M=(p,N)=>p.id===N.id,className:R,useMemo:T}=e,A=X(e,["data","isNested","hasChecks","hasBadges","hasGuides","hasSelectableNodes","variant","defaultAllExpanded","allExpanded","icon","expandedIcon","parentItem","onSelect","onCheck","toolbar","activeItems","compareItems","className","useMemo"]);const G=I.createElement(Ge,{isNested:o,toolbar:_},t.map(p=>{var N,S;return I.createElement(_e,Object.assign({key:((N=p.id)===null||N===void 0?void 0:N.toString())||((S=p.name)===null||S===void 0?void 0:S.toString()),name:p.name,title:p.title,id:p.id,isExpanded:l,isSelectable:f,defaultExpanded:p.defaultExpanded!==void 0?p.defaultExpanded:s,onSelect:g,onCheck:C,hasCheck:p.hasCheck!==void 0?p.hasCheck:r,checkProps:p.checkProps,hasBadge:p.hasBadge!==void 0?p.hasBadge:i,customBadgeContent:p.customBadgeContent,badgeProps:p.badgeProps,activeItems:D,parentItem:k,itemData:p,icon:p.icon!==void 0?p.icon:v,expandedIcon:p.expandedIcon!==void 0?p.expandedIcon:d,action:p.action,compareItems:M,isCompact:a==="compact"||a==="compactNoBackground",useMemo:T},p.children&&{children:I.createElement(ae,{data:p.children,isNested:!0,parentItem:p,hasChecks:r,hasBadges:i,hasGuides:u,hasSelectableNodes:f,variant:a,allExpanded:l,defaultAllExpanded:s,onSelect:g,onCheck:C,activeItems:D,icon:v,expandedIcon:d})}))}));return I.createElement(I.Fragment,null,k?G:I.createElement(ct,Object.assign({hasSelectableNodes:f,hasChecks:r,hasGuides:u,variant:a,className:R},A),G))};ae.displayName="TreeView";var fe=it(function(e){var t=Qe(e);return ue(t)&&(t=void 0),Re(ot(e,1,ue,!0),Be(t))});const lt=({group:{path:e},onMouseEnter:t,...o})=>{const[r,i]=x(""),f=c("span",{onMouseEnter:a=>{i(e),t?.(a)},...o,children:e});return r!==""?c(ge,{content:r,isVisible:!0,children:f}):f},he=({id:e,rename:t,handleModalToggle:o,refresh:r})=>{const{t:i}=q(),{addAlert:u,addError:f}=ee(),{register:a,handleSubmit:s,formState:{errors:l}}=Me({defaultValues:{name:t?.name}}),v=async d=>{d.name=d.name?.trim();try{e?t?await O.groups.update({id:e},{...t,name:d.name}):await(d.id?O.groups.updateChildGroup({id:e},d):O.groups.createChildGroup({id:e},d)):await O.groups.create(d),r(t?{...t,name:d.name}:void 0),o(),u(i(t?"groupUpdated":"groupCreated"),ve.success)}catch(k){f("couldNotCreateGroup",k)}};return c(Ie,{variant:te.small,title:i(t?"renameAGroup":"createAGroup"),isOpen:!0,onClose:o,actions:[c(U,{"data-testid":`${t?"rename":"create"}Group`,variant:"primary",type:"submit",form:"group-form",children:i(t?"rename":"create")},"confirm"),c(U,{id:"modal-cancel","data-testid":"cancel",variant:be.link,onClick:()=>{o()},children:i("cancel")},"cancel")],children:c(Ze,{id:"group-form",isHorizontal:!0,onSubmit:s(v),children:c(Fe,{name:"create-modal-group",label:i("name"),fieldId:"create-group-name",helperTextInvalid:i("required"),validated:l.name?Q.error:Q.default,isRequired:!0,children:c(Ye,{"data-testid":"groupNameInput",autoFocus:!0,id:"create-group-name",validated:l.name?Q.error:Q.default,...a("name",{required:!0})})})})})},dt=({selectedRows:e,show:t,toggleDialog:o,refresh:r})=>{const{t:i}=q(),{addAlert:u,addError:f}=ee(),a=async()=>{try{for(const s of e)await O.groups.del({id:s.id});r(),u(i("groupDeleted",{count:e.length}))}catch(s){f("groupDeleteError",s)}};return c(Pe,{titleKey:i("deleteConfirmTitle",{count:e.length}),messageKey:i("deleteConfirmGroup",{count:e.length,groupName:e[0]?.name}),continueButtonLabel:"delete",continueButtonVariant:be.danger,onConfirm:a,open:t,toggleDialog:o})},ut=e=>e.id?O.groups.updateRoot(e):O.groups.create(e),mt=async(e,t)=>O.groups.updateChildGroup({id:t.id},e),ft=({source:e,onClose:t,refresh:o})=>{const{t:r}=q(),{addAlert:i,addError:u}=ee();return c(pt,{type:"selectOne",filterGroups:[e],text:{title:"moveToGroup",ok:"moveHere"},onClose:t,onConfirm:async a=>{try{await(a?mt(e,a[0]):ut(e)),o(),i(r("moveGroupSuccess"))}catch(s){u("moveGroupError",s)}},isMove:!0})};function ne(e){let t=e.length;for(const o of e)o.subGroups&&(t+=ne(o.subGroups));return t}const ht=({group:e,refresh:t})=>{const{t:o}=q(),[r,i]=J(),[u,f]=J(),[a,s]=J(),[l,v]=J(),[d,k]=J(),g=ke(),{realm:C}=Ne();return K(Se,{children:[u&&c(he,{id:e.id,rename:e,refresh:()=>{g(P({realm:C})),t()},handleModalToggle:f}),a&&c(he,{id:e.id,handleModalToggle:s,refresh:t}),l&&c(ft,{source:e,refresh:t,onClose:v}),c(dt,{show:d,toggleDialog:k,selectedRows:[e],refresh:()=>{g(P({realm:C})),t()}}),c(ze,{toggle:c(He,{onToggle:i}),isOpen:r,isPlain:!0,position:Je.right,dropdownItems:[c(Y,{onClick:f,children:o("rename")},"rename"),c(Y,{onClick:v,children:o("moveTo")},"move"),c(Y,{onClick:s,children:o("createChildGroup")},"create"),c(We,{},"separator"),c(Y,{onClick:k,children:o("delete")},"delete")]})]})},Z=50,Gt=({refresh:e,canViewDetails:t})=>{const{t:o}=q(),{realm:r}=Ne(),i=ke(),{addAlert:u}=ee(),{hasAccess:f}=$e(),[a,s]=x(),{subGroups:l,clear:v}=je(),[d,k]=x(""),[g,C]=x(20),[_,D]=x(0),M=se(0),R=se(20),[T,A]=x(0),[G,p]=x(!1),[N,S]=x(),[V,B]=x(0),[z,H]=x(0),j=()=>{H(z+1),e()},F=(n,m)=>({id:n.id,name:c(ge,{content:n.name,children:c("span",{children:n.name})}),access:n.access||{},children:n.subGroups&&n.subGroups.length>0?n.subGroups.map(h=>F(h,m)):void 0,action:(f("manage-users")||n.access?.manage)&&c(ht,{group:n,refresh:m}),defaultExpanded:l.map(h=>h.id).includes(n.id)});we(async()=>{const n=await ce("groups",Object.assign({first:`${_}`,max:`${g+1}`,exact:`${G}`,global:`${d!==""}`},d===""?null:{search:d}));let m=[];return N&&(m=await ce(`groups/${N.id}/children`,{first:`${V}`,max:`${Z}`})),{groups:n,subGroups:m}},({groups:n,subGroups:m})=>{if(N){const h=b(a||[],N.id,[]);if(h.length&&m.length){const L=h.pop();L.children=[...(fe(L.children||[]).splice(0,Z),m.map($=>F($,j),"id")),...m.length===Z?[{id:"next",name:c(U,{variant:"plain",onClick:()=>B(V+Z),children:c(Ce,{})})}]:[]]}}d||M.current!==_||R.current!==g?s(n.map(h=>F(h,j))):s(fe(a,n.map(h=>F(h,j)),"id")),A(ne(n)),M.current=_,R.current=g},[z,_,V,g,d,G,N]);const b=(n,m,h)=>{for(let L=0;L<n.length;L++){const $=n[L];if($.id===m)return h.push($),h;$.children&&(h.push($),b($.children,m,h),h[h.length-1].id!==m&&h.pop())}return h};return a?c(Ee,{count:T,first:_,max:g,onNextClick:D,onPreviousClick:D,onPerPageSelect:(n,m)=>{D(n),C(m)},inputGroupName:"searchForGroups",inputGroupPlaceholder:o("searchForGroups"),inputGroupOnEnter:k,toolbarItem:K(Ke,{className:"pf-u-pt-sm",children:[c(Ue,{id:"exact","data-testid":"exact-search",name:"exact",isChecked:G,onChange:n=>p(n)}),c("label",{htmlFor:"exact",className:"pf-u-pl-sm",children:o("exactSearch")})]}),children:a.length>0&&c(ae,{data:a.slice(0,g),allExpanded:d.length>0,activeItems:N?[N]:void 0,hasGuides:!0,hasSelectableNodes:!0,className:"keycloak_groups_treeview",onSelect:(n,m)=>{if(m.id==="next")return;S(m);const h=b(a,m.id,[]);l.every(({id:L})=>h.find($=>$.id===L))||v(),t||h.at(-1)?.access?.view||l.at(-1)?.access?.view?i(P({realm:r,id:h.map(L=>L.id).join("/")})):(u(o("noViewRights"),ve.warning),i(P({realm:r})))}})}):c(qe,{})},pt=({id:e,type:t,filterGroups:o,text:r,canBrowse:i=!0,isMove:u=!1,onClose:f,onConfirm:a})=>{const{t:s}=q(),[l,v]=x([]),[d,k]=x([]),[g,C]=x([]),[_,D]=x(""),[M,R]=x([]),[T,A]=x(),[G,p]=x(!1),[N,S]=x(10),[V,B]=x(0),[z,H]=x(0),j=()=>d[d.length-1];we(async()=>{let b,n,m;if(T){if(!d.map(({id:h})=>h).includes(T)&&(b=await O.groups.findOne({id:T}),!b))throw new Error(s("notFound"));if(b?.id){const h={first:V,max:N+1,parentId:b.id};n=await O.groups.listSubGroups(h)}}else{const h={first:V,max:N+1};G&&(h.search=_),n=await O.groups.find(h)}return e&&(m=await O.users.listGroups({id:e})),{group:b,groups:n,existingUserGroups:m}},async({group:b,groups:n,existingUserGroups:m})=>{R(m||[]),b&&k([...d,b]),n&&(n.forEach(h=>{h.checked=!!l.find(L=>L.id===h.id)}),C(n)),H(G?ne(n||[]):n?.length||0)},[T,_,V,N]);const F=b=>[...M.map(n=>n.id),...(o||[]).map(n=>n.id)].some(n=>n===b?.id);return c(Ie,{variant:G?te.medium:te.small,title:s(r.title,{group1:o?.[0]?.name,group2:d.length?j().name:s("root")}),isOpen:!0,onClose:f,actions:[c(U,{"data-testid":`${r.ok}-button`,variant:"primary",form:"group-form",onClick:()=>{a(t==="selectMany"?l:d.length?[j()]:void 0)},isDisabled:t==="selectMany"&&l.length===0,children:s(r.ok)},"confirm")],children:K(Ee,{count:z-(T||G?V:0),first:V,max:N,onNextClick:B,onPreviousClick:B,onPerPageSelect:(b,n)=>{B(b),S(n)},inputGroupName:"search",inputGroupOnEnter:b=>{D(b),p(b!==""),B(0),S(10),k([]),A(void 0)},inputGroupPlaceholder:s("searchForGroups"),children:[K(Xe,{children:[d.length>0&&c(le,{children:c(U,{variant:"link",onClick:()=>{A(void 0),k([]),B(0),S(10)},children:s("groups")})},"home"),d.map((b,n)=>K(le,{children:[d.length-1!==n&&c(U,{variant:"link",onClick:()=>{A(b.id),k([...d].slice(0,n)),B(0),S(10)},children:b.name}),d.length-1===n&&b.name]},n))]}),c(et,{"aria-label":s("groups"),isCompact:!0,children:g.slice(T?V:0,N+(T?V:0)).map(b=>K(Te,{children:[(!G||b.name?.includes(_))&&c(pe,{group:b,isRowDisabled:F,onSelect:A,type:t,isSearching:G,setIsSearching:p,selectedRows:l,setSelectedRows:v,canBrowse:i},b.id),G&&b.subGroups?.map(n=>c(pe,{group:n,isRowDisabled:F,onSelect:A,type:t,isSearching:G,setIsSearching:p,selectedRows:l,setSelectedRows:v,canBrowse:i},n.id))]},b.id))}),g.length===0&&!G&&c(me,{hasIcon:!1,message:s("moveGroupEmpty"),instructions:u?s("moveGroupEmptyInstructions"):void 0}),g.length===0&&G&&c(me,{message:s("noSearchResults"),instructions:s("noSearchResultsInstructions")})]})})},pe=({group:e,type:t,isRowDisabled:o,isSearching:r,setIsSearching:i,onSelect:u,selectedRows:f,setSelectedRows:a,canBrowse:s})=>{const{t:l}=q();return c(tt,{"aria-labelledby":e.name,id:e.id,onClick:v=>{t==="selectOne"?u(e.id):v.target.type!=="checkbox"&&(u(e.id),i(!1))},children:K(at,{className:`join-group-dialog-row${o(e)?"-m-disabled":""}`,"data-testid":e.name,children:[t==="selectMany"&&c(xe,{className:"kc-join-group-modal-check","data-testid":`${e.name}-check`,"aria-label":e.name,checked:e.checked,isDisabled:o(e),onChange:v=>{e.checked=v;let d=[];e.checked?d=[...f,e]:d=f.filter(k=>k.id!==e.id),a(d)},"aria-labelledby":`select-${e.name}`}),c(nt,{dataListCells:[c(st,{className:"keycloak-groups-group-path",children:r?c(lt,{id:`select-${e.name}`,group:e}):c("span",{id:`select-${e.name}`,children:e.name})},`name-${e.id}`)]}),c(ye,{id:"actions","aria-labelledby":`select-${e.name}`,"aria-label":l("groupName"),isPlainButtonAction:!0,children:(s||t==="selectOne")&&c(U,{variant:"link","aria-label":l("select"),children:c(Ce,{})})})]})},e.id)};export{dt as D,pt as G,ft as M,he as a,lt as b,Gt as c};
//# sourceMappingURL=GroupPickerDialog-tI6XV7Ln.js.map
