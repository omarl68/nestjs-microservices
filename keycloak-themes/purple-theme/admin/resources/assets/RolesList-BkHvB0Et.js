import{jsx as t,jsxs as f,Fragment as L}from"react/jsx-runtime";import{useState as h}from"react";import{u as b,c as N,e as E,b as K,q as I,B as T,f as u,A as g,U as v,h as w,L as p,br as B,ar as D,bL as P,a1 as V}from"./index-C9t2UlUN.js";import{u as $}from"./ConfirmDialog-BDkqxnFL.js";import{L as j}from"./PaginatingTableToolbar-oQUfBy2J.js";import{a1 as q}from"./KeycloakDataTable-2rLFZPhG.js";const U=({defaultRoleName:m,toDetail:c,messageBundle:l,...a})=>{const{t:s}=b(l),{realm:d}=K();return a.name!==m?t(p,{to:c(a.id),children:a.name}):f(L,{children:[f(p,{to:P({realm:d,tab:"user-registration"}),children:[a.name," "]}),t(V,{helpText:s(`${l}:defaultRole`),fieldLabelId:"defaultRole"})]})},W=({loader:m,paginated:c=!0,parentRoleId:l,messageBundle:a="roles",toCreate:s,toDetail:d,isReadOnly:n})=>{const{t:o}=b(),C=N(),{addAlert:R,addError:F}=E(),{realm:S}=K(),[i,A]=h(),[r,y]=h();I(()=>u.realms.findOne({realm:S}),e=>{A(e)},[]);const[k,x]=$({titleKey:"roleDeleteConfirm",messageKey:o("roleDeleteConfirmDialog",{selectedRoleName:r?r.name:""}),continueButtonLabel:"delete",continueButtonVariant:T.danger,onConfirm:async()=>{try{l?await u.roles.delCompositeRoles({id:l},[r]):await u.roles.delById({id:r.id}),y(void 0),R(o("roleDeletedSuccess"),g.success)}catch(e){F("roleDeleteError",e)}}});return i?f(L,{children:[t(x,{}),t(q,{loader:m,ariaLabelKey:"roleList",searchPlaceholderKey:"searchForRoles",isPaginated:c,toolbarItem:!n&&t(w,{"data-testid":"create-role",component:e=>t(p,{...e,to:s}),children:o("createRole")}),actions:n?[]:[{title:o("delete"),onRowClick:e=>{y(e),i.defaultRole&&e.name===i.defaultRole.name?R(o("defaultRoleDeleteError"),g.danger):k()}}],columns:[{name:"name",displayKey:"roleName",cellRenderer:e=>t(U,{...e,defaultRoleName:i.defaultRole?.name,toDetail:d,messageBundle:a})},{name:"composite",displayKey:"composite",cellFormatters:[B(),D()]},{name:"description",displayKey:"description",cellFormatters:[D()]}],emptyState:t(j,{hasIcon:!0,message:o(`noRoles-${a}`),instructions:n?"":o(`noRolesInstructions-${a}`),primaryActionText:n?"":o("createRole"),onPrimaryAction:()=>C(s)})},r?r.id:"roleList")]}):t(v,{})};export{W as R};
//# sourceMappingURL=RolesList-BkHvB0Et.js.map
