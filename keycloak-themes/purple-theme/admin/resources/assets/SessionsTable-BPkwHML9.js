import{jsxs as x,Fragment as F,jsx as s}from"react/jsx-runtime";import{useState as U,useMemo as M}from"react";import{m as T,b as f,dh as V,c as j,u as E,e as P,as as B,h as N,L as C,be as W,aF as q,di as G,f as d,dj as H,dk as g}from"./index-C9t2UlUN.js";import{u as J}from"./ConfirmDialog-BDkqxnFL.js";import{L as Q}from"./PaginatingTableToolbar-oQUfBy2J.js";import{a1 as X}from"./KeycloakDataTable-2rLFZPhG.js";import{u as Y}from"./useFormatDate-Yp0qEhJS.js";import{b as Z}from"./ToolbarContent-D6TJq6fk.js";import{L as _,a as $,b as ee}from"./ListItem-B-msUVzK.js";const se={name:"CubesIcon",height:512,width:512,svgPath:"M488.6 250.2L392 214V105.5c0-15-9.3-28.4-23.4-33.7l-100-37.5c-8.1-3.1-17.1-3.1-25.3 0l-100 37.5c-14.1 5.3-23.4 18.7-23.4 33.7V214l-96.6 36.2C9.3 255.5 0 268.9 0 283.9V394c0 13.6 7.7 26.1 19.9 32.2l100 50c10.1 5.1 22.1 5.1 32.2 0l103.9-52 103.9 52c10.1 5.1 22.1 5.1 32.2 0l100-50c12.2-6.1 19.9-18.6 19.9-32.2V283.9c0-15-9.3-28.4-23.4-33.7zM358 214.8l-85 31.9v-68.2l85-37v73.3zM154 104.1l102-38.2 102 38.2v.6l-102 41.4-102-41.4v-.6zm84 291.1l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6zm240 112l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6z",yOffset:0,xOffset:0},te=T(se),v=t=>t?.startsWith("lightweight-"),ae=t=>{const{realm:n}=f();return s(C,{to:W({realm:n,id:t.userId,tab:"sessions"}),children:t.username})},ne=t=>{const{realm:n}=f();return s(_,{variant:$.inline,children:Object.entries(t.clients).map(([o,i])=>s(ee,{children:s(C,{to:q({realm:n,clientId:o,tab:"sessions"}),children:i})},o))})};function ye({loader:t,hiddenColumns:n=[],emptyInstructions:o,logoutUser:i,filter:b,isSearching:I,isPaginated:L}){const{realm:r}=f(),{whoAmI:S}=V(),y=j(),{t:l}=E(),{addError:k}=P(),p=Y(),[A,K]=U(0),m=()=>K(e=>e+1),h=!!B(G.path),w=M(()=>[{name:"username",displayKey:"user",cellRenderer:ae},{name:"type",displayKey:"type"},{name:"start",displayKey:"started",cellRenderer:a=>p(new Date(a.start))},{name:"lastAccess",displayKey:"lastAccess",cellRenderer:a=>p(new Date(a.lastAccess))},{name:"ipAddress",displayKey:"ipAddress"},{name:"clients",displayKey:"clients",cellRenderer:ne}].filter(({name:a})=>!n.includes(a)),[r,n]),[O,D]=J({titleKey:"logoutAllSessions",messageKey:"logoutAllDescription",continueButtonLabel:"confirm",onConfirm:async()=>{try{await d.users.logout({id:i}),h&&v(i)?y(g({realm:r})):m()}catch(e){k("logoutAllSessionsError",e)}}});async function R(e,a,u){const c=u.data;await d.realms.deleteSession({realm:r,session:c.id,isOffline:!0}),m()}async function z(e,a,u){const c=u.data;await d.realms.deleteSession({realm:r,session:c.id,isOffline:!1}),c.userId===S.getUserId()?await H.logout({redirectUri:""}):h&&v(c.userId)?y(g({realm:r})):m()}return x(F,{children:[s(D,{}),s(X,{loader:t,ariaLabelKey:"titleSessions",searchPlaceholderKey:"searchForSession",isPaginated:L,isSearching:I,searchTypeComponent:b,toolbarItem:i&&s(Z,{children:s(N,{onClick:O,children:l("logoutAllSessions")})}),columns:w,actionResolver:e=>e.data.type==="Offline"||e.data.type==="OFFLINE"?[{title:l("revoke"),onClick:R}]:[{title:l("signOut"),onClick:z}],emptyState:s(Q,{hasIcon:!0,icon:te,message:l("noSessions"),instructions:o||l("noSessionsDescription")})},A)]})}export{te as C,ye as S,v as i};
//# sourceMappingURL=SessionsTable-BPkwHML9.js.map
