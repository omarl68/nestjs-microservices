import{jsxs as s,Fragment as v,jsx as e}from"react/jsx-runtime";import{u as C,c as b,b as A,g as w,e as x,P as S,F as T,a0 as k,h as c,L as j,aE as E,M as I,ai as V,aj as P,f as i,ak as K,N as L,A as O,aF as H}from"./index-C9t2UlUN.js";import{useState as N}from"react";import{F as U}from"./FormAccess-DnQCcStE.js";import{F as $}from"./FileUploadForm-DmYGfve4.js";import{K as z}from"./KeycloakTextInput-DrlF32nr.js";import{V as G}from"./ViewHeader-cxZm8XhN.js";import{C as R,a as W}from"./ClientDescription--30ytydx.js";import{L as B}from"./CodeEditor-Cp4g17EF.js";import{A as D}from"./Form-Cdw1qhWG.js";import"react-dom";import"./copy-icon-CYSS18Ce.js";import"./FileUpload-CTw4RKK1.js";import"./Modal-Bgkd26UL.js";import"./ToolbarContent-D6TJq6fk.js";import"./useIsFeatureEnabled-CkHhuO9z.js";import"./SwitchControl-KjYluOpZ.js";import"./EmptyStateBody-CyIhnUop.js";import"./EmptyStateSecondaryActions-BekVwNvY.js";const J=a=>a.match(/(<.[^(><.)]+>)/g);function ut(){const{t:a}=C(),m=b(),{realm:o}=A(),n=w(),{register:p,handleSubmit:d,setValue:u}=n,[h,f]=N({}),{addAlert:g,addError:l}=x(),F=async r=>{try{const t=await y(r);I(t,u),f(t)}catch(t){l("importParseError",t)}};async function y(r){if(!J(r))return JSON.parse(r);const t=await V(`${K(i.baseUrl)}admin/realms/${o}/client-description-converter`,{method:"POST",body:r,headers:P(await i.getAccessToken())});if(!t.ok)throw new Error(`Server responded with invalid status: ${t.statusText}`);return t.json()}return s(v,{children:[e(G,{titleKey:"importClient",subKey:"clientsExplain"}),e(S,{variant:"light",children:e(U,{isHorizontal:!0,onSubmit:d(async r=>{try{const t=await i.clients.create({...h,...L({...r,attributes:r.attributes||{}})});g(a("clientImportSuccess"),O.success),m(H({realm:o,clientId:t.id,tab:"settings"}))}catch(t){l("clientImportError",t)}}),role:"manage-clients",children:s(T,{...n,children:[e($,{id:"realm-file",language:B.json,extension:".json,.xml",helpText:a("helpFileUploadClient"),onChange:F}),e(R,{hasConfigureAccess:!0}),e(k,{label:a("type"),fieldId:"kc-type",children:e(z,{id:"kc-type",isReadOnly:!0,...p("protocol")})}),e(W,{unWrap:!0}),s(D,{children:[e(c,{variant:"primary",type:"submit",children:a("save")}),e(c,{variant:"link",component:r=>e(j,{...r,to:E({realm:o})}),children:a("cancel")})]})]})})})]})}export{ut as default};
//# sourceMappingURL=ImportForm-Cz2CnYvO.js.map
