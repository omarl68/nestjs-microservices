import{jsxs as d,Fragment as H,jsx as e}from"react/jsx-runtime";import{useMemo as I,useEffect as T}from"react";import{u as k,b as v,c as G,d as P,g as A,P as D,a0 as p,a1 as c,Y as K,G as L,F as S,h,L as j,dP as y}from"./index-C9t2UlUN.js";import{F as O}from"./FormAccess-DnQCcStE.js";import{K as U}from"./KeyValueInput-BJlDoGlu.js";import{K as u}from"./KeycloakTextInput-DrlF32nr.js";import{V}from"./ViewHeader-cxZm8XhN.js";import{u as q,U as R}from"./UserProfileContext-BGkDcTK6.js";/* empty css                               */import{A as w}from"./Form-Cdw1qhWG.js";import"react-dom";import"./copy-icon-CYSS18Ce.js";import"./KeySelect-CPI9XGq0.js";import"./useToggle-K3Kx99tM.js";import"./EmptyStateBody-CyIhnUop.js";import"./ToolbarContent-D6TJq6fk.js";function B(t){return Object.entries(t).reduce((r,[o,s])=>typeof s=="string"?[...r,{key:o,value:s}]:[...r],[])}function E(t){return Object.fromEntries(t.filter(r=>r.key.length>0).map(r=>[r.key,r.value]))}const b={annotations:[],displayDescription:"",displayHeader:"",name:""};function z(){const{t}=k(),{realm:r}=v(),{config:o,save:s}=q(),g=G(),x=P(),a=A({defaultValues:b}),i=I(()=>o?.groups?.find(({name:n})=>n===x.name),[o?.groups]);T(()=>{if(!i)return;const n=i.annotations?B(i.annotations):[];a.reset({...b,...i,annotations:n})},[i]);const F=async n=>{if(!o)return;const l=[...o.groups??[]],m=i?l.indexOf(i):-1,f={...n,annotations:E(n.annotations)};m===-1?l.push(f):l[m]=f,await s({...o,groups:l})&&g(y({realm:r,tab:"attributes-group"}))};return d(H,{children:[e(V,{titleKey:i?"editGroupText":"createGroupText",divider:!0}),e(D,{variant:"light",onSubmit:a.handleSubmit(F),children:d(O,{isHorizontal:!0,role:"manage-realm",children:[d(p,{label:t("nameField"),fieldId:"kc-name",isRequired:!0,helperTextInvalid:t("required"),validated:a.formState.errors.name?"error":"default",labelIcon:e(c,{helpText:t("nameHintHelp"),fieldLabelId:"nameField"}),children:[e(u,{id:"kc-name",isReadOnly:!!i,...a.register("name",{required:!0})}),!!i&&e("input",{type:"hidden",...a.register("name")})]}),e(p,{label:t("displayHeaderField"),fieldId:"kc-display-header",labelIcon:e(c,{helpText:t("displayHeaderHintHelp"),fieldLabelId:"displayHeaderField"}),children:e(u,{id:"kc-display-header",...a.register("displayHeader")})}),e(p,{label:t("displayDescriptionField"),fieldId:"kc-display-description",labelIcon:e(c,{helpText:t("displayDescriptionHintHelp"),fieldLabelId:"displayDescriptionField"}),children:e(u,{id:"kc-display-description",...a.register("displayDescription")})}),e(K,{children:e(L,{component:"h2",children:t("annotationsText")})}),e(p,{label:t("annotationsText"),fieldId:"kc-annotations",children:e(S,{...a,children:e(U,{label:t("annotationsText"),name:"annotations"})})}),d(w,{children:[e(h,{variant:"primary",type:"submit","data-testid":"saveGroupBtn",children:t("save")}),e(h,{variant:"link",component:n=>e(j,{...n,to:y({realm:r,tab:"attributes-group"})}),children:t("cancel")})]})]})})]})}const oe=()=>e(R,{children:e(z,{})});export{oe as default};
//# sourceMappingURL=AttributesGroupDetails-BXAZbuBR.js.map
