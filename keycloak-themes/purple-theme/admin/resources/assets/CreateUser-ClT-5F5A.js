import{jsx as a,jsxs as v,Fragment as w}from"react/jsx-runtime";import{useState as m}from"react";import{u as A,e as C,c as F,b as y,g as E,q as V,U as x,P as G,f as n,A as K,be as M,e3 as N,e4 as R}from"./index-C9t2UlUN.js";import{V as S}from"./ViewHeader-cxZm8XhN.js";import{U as j,t as k}from"./UserForm-BB1TTnrw.js";/* empty css                     */import"react-dom";import"./ToolbarContent-D6TJq6fk.js";import"./FormAccess-DnQCcStE.js";import"./Form-Cdw1qhWG.js";import"./copy-icon-CYSS18Ce.js";import"./GroupPickerDialog-tI6XV7Ln.js";import"./PaginatingTableToolbar-oQUfBy2J.js";import"./EmptyStateBody-CyIhnUop.js";import"./EmptyStateSecondaryActions-BekVwNvY.js";import"./useToggle-K3Kx99tM.js";import"./KeycloakTextInput-DrlF32nr.js";import"./Modal-Bgkd26UL.js";import"./ConfirmDialog-BDkqxnFL.js";import"./DataListItemRow-Bimi62Tu.js";import"./grip-vertical-icon-B_ub3hpF.js";import"./_baseFlatten-BQ8y46Zj.js";import"./useFormatDate-Yp0qEhJS.js";function ie(){const{t}=A(),{addAlert:l,addError:c}=C(),d=F(),{realm:s}=y(),o=E({mode:"onChange"}),[u,f]=m([]),[p,g]=m(),[U,h]=m();V(()=>Promise.all([n.realms.findOne({realm:s}),n.users.getProfileMetadata({realm:s})]),([r,e])=>{if(!r)throw new Error(t("notFound"));g(r),o.setValue("attributes.locale",r.defaultLocale||""),h(e)},[]);const P=async r=>{try{const e=await n.users.create({...k(r),groups:u.map(i=>i.path),enabled:!0});l(t("userCreated"),K.success),d(M({id:e.id,realm:s,tab:"settings"}))}catch(e){N(e)?R(e,o.setError,(i,b)=>t(i,b)):c("userCreateError",e)}};return p?v(w,{children:[a(S,{titleKey:t("createUser"),className:"kc-username-view-header"}),a(G,{variant:"light",children:a(j,{form:o,realm:p,userProfileMetadata:U,onGroupsUpdate:f,save:P})})]}):a(x,{})}export{ie as default};
//# sourceMappingURL=CreateUser-ClT-5F5A.js.map
