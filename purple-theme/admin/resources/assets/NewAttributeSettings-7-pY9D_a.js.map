{"version":3,"file":"NewAttributeSettings-7-pY9D_a.js","sources":["../../src/realm-settings/user-profile/attribute/AttributeAnnotations.tsx","../../src/realm-settings/user-profile/attribute/AttributeGeneralSettings.tsx","../../src/realm-settings/user-profile/attribute/AttributePermission.tsx","../../src/realm-settings/user-profile/attribute/ValidatorSelect.tsx","../../src/realm-settings/user-profile/attribute/AddValidatorDialog.tsx","../../src/realm-settings/user-profile/attribute/AttributeValidations.tsx","../../src/realm-settings/NewAttributeSettings.tsx"],"sourcesContent":["import { useTranslation } from \"react-i18next\";\nimport { FormGroup, Grid, GridItem } from \"@patternfly/react-core\";\n\nimport { FormAccess } from \"../../../components/form/FormAccess\";\nimport { KeyValueInput } from \"../../../components/key-value-form/KeyValueInput\";\n\nimport \"../../realm-settings-section.css\";\n\nexport const AttributeAnnotations = () => {\n  const { t } = useTranslation();\n\n  return (\n    <FormAccess role=\"manage-realm\" isHorizontal>\n      <FormGroup\n        hasNoPaddingTop\n        label={t(\"annotations\")}\n        fieldId=\"kc-annotations\"\n        className=\"kc-annotations-label\"\n      >\n        <Grid className=\"kc-annotations\">\n          <GridItem>\n            <KeyValueInput\n              name=\"annotations\"\n              label={t(\"annotations\")}\n              defaultKeyValue={[\n                {\n                  key: \"inputType\",\n                  label: t(\"inputType\"),\n                  values: [\n                    \"text\",\n                    \"textarea\",\n                    \"select\",\n                    \"select-radiobuttons\",\n                    \"multiselect\",\n                    \"multiselect-checkboxes\",\n                    \"html5-email\",\n                    \"html5-tel\",\n                    \"html5-url\",\n                    \"html5-number\",\n                    \"html5-range\",\n                    \"html5-datetime-local\",\n                    \"html5-date\",\n                    \"html5-month\",\n                    \"html5-week\",\n                    \"html5-time\",\n                  ],\n                },\n                {\n                  key: \"inputHelperTextBefore\",\n                  label: t(\"inputHelperTextBefore\"),\n                },\n                {\n                  key: \"inputHelperTextAfter\",\n                  label: t(\"inputHelperTextAfter\"),\n                },\n                {\n                  key: \"inputOptionLabelsI18nPrefix\",\n                  label: t(\"inputOptionLabelsI18nPrefix\"),\n                },\n                {\n                  key: \"inputTypePlaceholder\",\n                  label: t(\"inputTypePlaceholder\"),\n                },\n                {\n                  key: \"inputTypeSize\",\n                  label: t(\"inputTypeSize\"),\n                },\n                {\n                  key: \"inputTypeCols\",\n                  label: t(\"inputTypeCols\"),\n                },\n                {\n                  key: \"inputTypeRows\",\n                  label: t(\"inputTypeRows\"),\n                },\n                {\n                  key: \"inputTypeStep\",\n                  label: t(\"inputTypeStep\"),\n                },\n                {\n                  key: \"kcNumberFormat\",\n                  label: t(\"kcNumberFormat\"),\n                },\n                {\n                  key: \"kcNumberUnFormat\",\n                  label: t(\"kcNumberUnFormat\"),\n                },\n              ]}\n            />\n          </GridItem>\n        </Grid>\n      </FormGroup>\n    </FormAccess>\n  );\n};\n","import type ClientScopeRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/clientScopeRepresentation\";\nimport type { UserProfileConfig } from \"@keycloak/keycloak-admin-client/lib/defs/userProfileMetadata\";\nimport {\n  Divider,\n  FormGroup,\n  Radio,\n  Select,\n  SelectOption,\n  SelectVariant,\n  Switch,\n} from \"@patternfly/react-core\";\nimport { isEqual } from \"lodash-es\";\nimport { useState } from \"react\";\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  useWatch,\n} from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { HelpItem } from \"ui-shared\";\n\nimport { adminClient } from \"../../../admin-client\";\nimport { DefaultSwitchControl } from \"../../../components/SwitchControl\";\nimport { FormAccess } from \"../../../components/form/FormAccess\";\nimport { KeycloakSpinner } from \"../../../components/keycloak-spinner/KeycloakSpinner\";\nimport { KeycloakTextInput } from \"../../../components/keycloak-text-input/KeycloakTextInput\";\nimport { useFetch } from \"../../../utils/useFetch\";\nimport { useParams } from \"../../../utils/useParams\";\nimport { USERNAME_EMAIL } from \"../../NewAttributeSettings\";\nimport type { AttributeParams } from \"../../routes/Attribute\";\n\nimport \"../../realm-settings-section.css\";\n\nconst REQUIRED_FOR = [\n  { label: \"requiredForLabel.both\", value: [\"admin\", \"user\"] },\n  { label: \"requiredForLabel.users\", value: [\"user\"] },\n  { label: \"requiredForLabel.admins\", value: [\"admin\"] },\n] as const;\n\nexport const AttributeGeneralSettings = () => {\n  const { t } = useTranslation();\n  const form = useFormContext();\n  const [clientScopes, setClientScopes] =\n    useState<ClientScopeRepresentation[]>();\n  const [config, setConfig] = useState<UserProfileConfig>();\n  const [selectEnabledWhenOpen, setSelectEnabledWhenOpen] = useState(false);\n  const [selectRequiredForOpen, setSelectRequiredForOpen] = useState(false);\n  const [isAttributeGroupDropdownOpen, setIsAttributeGroupDropdownOpen] =\n    useState(false);\n  const { attributeName } = useParams<AttributeParams>();\n  const editMode = attributeName ? true : false;\n\n  const hasSelector = useWatch({\n    control: form.control,\n    name: \"hasSelector\",\n  });\n\n  const hasRequiredScopes = useWatch({\n    control: form.control,\n    name: \"hasRequiredScopes\",\n  });\n\n  const required = useWatch({\n    control: form.control,\n    name: \"isRequired\",\n    defaultValue: false,\n  });\n\n  useFetch(() => adminClient.clientScopes.find(), setClientScopes, []);\n  useFetch(() => adminClient.users.getProfile(), setConfig, []);\n\n  if (!clientScopes) {\n    return <KeycloakSpinner />;\n  }\n\n  function setHasSelector(hasSelector: boolean) {\n    form.setValue(\"hasSelector\", hasSelector);\n  }\n\n  function setHasRequiredScopes(hasRequiredScopes: boolean) {\n    form.setValue(\"hasRequiredScopes\", hasRequiredScopes);\n  }\n\n  return (\n    <FormAccess role=\"manage-realm\" isHorizontal>\n      <FormProvider {...form}>\n        <FormGroup\n          label={t(\"attributeName\")}\n          labelIcon={\n            <HelpItem\n              helpText={t(\"upAttributeNameHelp\")}\n              fieldLabelId=\"attributeName\"\n            />\n          }\n          fieldId=\"kc-attribute-name\"\n          isRequired\n          validated={form.formState.errors.name ? \"error\" : \"default\"}\n          helperTextInvalid={t(\"validateAttributeName\")}\n        >\n          <KeycloakTextInput\n            isRequired\n            id=\"kc-attribute-name\"\n            defaultValue=\"\"\n            data-testid=\"attribute-name\"\n            isDisabled={editMode}\n            validated={form.formState.errors.name ? \"error\" : \"default\"}\n            {...form.register(\"name\", { required: true })}\n          />\n        </FormGroup>\n        <FormGroup\n          label={t(\"attributeDisplayName\")}\n          labelIcon={\n            <HelpItem\n              helpText={t(\"attributeDisplayNameHelp\")}\n              fieldLabelId=\"attributeDisplayName\"\n            />\n          }\n          fieldId=\"kc-attribute-display-name\"\n        >\n          <KeycloakTextInput\n            id=\"kc-attribute-display-name\"\n            defaultValue=\"\"\n            data-testid=\"attribute-display-name\"\n            {...form.register(\"displayName\")}\n          />\n        </FormGroup>\n        <DefaultSwitchControl\n          name=\"multivalued\"\n          label={t(\"multivalued\")}\n          labelIcon={t(\"multivaluedHelp\")}\n        />\n        <FormGroup\n          label={t(\"attributeGroup\")}\n          labelIcon={\n            <HelpItem\n              helpText={t(\"attributeGroupHelp\")}\n              fieldLabelId=\"realm-setting:attributeGroup\"\n            />\n          }\n          fieldId=\"kc-attributeGroup\"\n        >\n          <Controller\n            name=\"group\"\n            defaultValue=\"\"\n            control={form.control}\n            render={({ field }) => (\n              <Select\n                toggleId=\"kc-attributeGroup\"\n                aria-label={t(\"attributeGroup\")}\n                onToggle={() =>\n                  setIsAttributeGroupDropdownOpen(!isAttributeGroupDropdownOpen)\n                }\n                isOpen={isAttributeGroupDropdownOpen}\n                onSelect={(_, value) => {\n                  field.onChange(value.toString());\n                  setIsAttributeGroupDropdownOpen(false);\n                }}\n                selections={[field.value || t(\"none\")]}\n                variant={SelectVariant.single}\n              >\n                {[\n                  <SelectOption key=\"empty\" value=\"\">\n                    {t(\"none\")}\n                  </SelectOption>,\n                  ...(config?.groups?.map((group) => (\n                    <SelectOption key={group.name} value={group.name}>\n                      {group.name}\n                    </SelectOption>\n                  )) || []),\n                ]}\n              </Select>\n            )}\n          ></Controller>\n        </FormGroup>\n        {!USERNAME_EMAIL.includes(attributeName) && (\n          <>\n            <Divider />\n            <FormGroup\n              label={t(\"enabledWhen\")}\n              labelIcon={\n                <HelpItem\n                  helpText={t(\"enabledWhenTooltip\")}\n                  fieldLabelId=\"enabled-when\"\n                />\n              }\n              fieldId=\"enabledWhen\"\n              hasNoPaddingTop\n            >\n              <Radio\n                id=\"always\"\n                data-testid=\"always\"\n                isChecked={!hasSelector}\n                name=\"enabledWhen\"\n                label={t(\"always\")}\n                onChange={() => setHasSelector(false)}\n                className=\"pf-u-mb-md\"\n              />\n              <Radio\n                id=\"scopesAsRequested\"\n                data-testid=\"scopesAsRequested\"\n                isChecked={hasSelector}\n                name=\"enabledWhen\"\n                label={t(\"scopesAsRequested\")}\n                onChange={() => setHasSelector(true)}\n                className=\"pf-u-mb-md\"\n              />\n            </FormGroup>\n            {hasSelector && (\n              <FormGroup fieldId=\"kc-scope-enabled-when\">\n                <Controller\n                  name=\"selector.scopes\"\n                  control={form.control}\n                  defaultValue={[]}\n                  render={({ field }) => (\n                    <Select\n                      name=\"scopes\"\n                      data-testid=\"enabled-when-scope-field\"\n                      variant={SelectVariant.typeaheadMulti}\n                      typeAheadAriaLabel=\"Select\"\n                      chipGroupProps={{\n                        numChips: 3,\n                        expandedText: t(\"hide\"),\n                        collapsedText: t(\"showRemaining\"),\n                      }}\n                      onToggle={(isOpen) => setSelectEnabledWhenOpen(isOpen)}\n                      selections={field.value}\n                      onSelect={(_, selectedValue) => {\n                        const option = selectedValue.toString();\n                        let changedValue = [\"\"];\n                        if (field.value) {\n                          changedValue = field.value.includes(option)\n                            ? field.value.filter(\n                                (item: string) => item !== option,\n                              )\n                            : [...field.value, option];\n                        } else {\n                          changedValue = [option];\n                        }\n\n                        field.onChange(changedValue);\n                      }}\n                      onClear={(selectedValues) => {\n                        selectedValues.stopPropagation();\n                        field.onChange([]);\n                      }}\n                      isOpen={selectEnabledWhenOpen}\n                      aria-labelledby={\"scope\"}\n                    >\n                      {clientScopes.map((option) => (\n                        <SelectOption key={option.name} value={option.name} />\n                      ))}\n                    </Select>\n                  )}\n                />\n              </FormGroup>\n            )}\n          </>\n        )}\n        {attributeName !== \"username\" && (\n          <>\n            <Divider />\n            <FormGroup\n              label={t(\"required\")}\n              labelIcon={\n                <HelpItem\n                  helpText={t(\"requiredHelp\")}\n                  fieldLabelId=\"required\"\n                />\n              }\n              fieldId=\"kc-required\"\n              hasNoPaddingTop\n            >\n              <Controller\n                name=\"isRequired\"\n                data-testid=\"required\"\n                defaultValue={false}\n                control={form.control}\n                render={({ field }) => (\n                  <Switch\n                    id={\"kc-required\"}\n                    onChange={field.onChange}\n                    isChecked={field.value}\n                    label={t(\"on\")}\n                    labelOff={t(\"off\")}\n                    aria-label={t(\"required\")}\n                  />\n                )}\n              />\n            </FormGroup>\n            {required && (\n              <>\n                <FormGroup\n                  label={t(\"requiredFor\")}\n                  fieldId=\"requiredFor\"\n                  hasNoPaddingTop\n                >\n                  <Controller\n                    name=\"required.roles\"\n                    data-testid=\"requiredFor\"\n                    defaultValue={REQUIRED_FOR[0].value}\n                    control={form.control}\n                    render={({ field }) => (\n                      <div className=\"kc-requiredFor\">\n                        {REQUIRED_FOR.map((option) => (\n                          <Radio\n                            id={option.label}\n                            key={option.label}\n                            data-testid={option.label}\n                            isChecked={isEqual(field.value, option.value)}\n                            name=\"roles\"\n                            onChange={() => {\n                              field.onChange(option.value);\n                            }}\n                            label={t(option.label)}\n                            className=\"kc-requiredFor-option\"\n                          />\n                        ))}\n                      </div>\n                    )}\n                  />\n                </FormGroup>\n                <FormGroup\n                  label={t(\"requiredWhen\")}\n                  labelIcon={\n                    <HelpItem\n                      helpText={t(\"requiredWhenTooltip\")}\n                      fieldLabelId=\"required-when\"\n                    />\n                  }\n                  fieldId=\"requiredWhen\"\n                  hasNoPaddingTop\n                >\n                  <Radio\n                    id=\"requiredAlways\"\n                    data-testid=\"requiredAlways\"\n                    isChecked={!hasRequiredScopes}\n                    name=\"requiredWhen\"\n                    label={t(\"always\")}\n                    onChange={() => setHasRequiredScopes(false)}\n                    className=\"pf-u-mb-md\"\n                  />\n                  <Radio\n                    id=\"requiredScopesAsRequested\"\n                    data-testid=\"requiredScopesAsRequested\"\n                    isChecked={hasRequiredScopes}\n                    name=\"requiredWhen\"\n                    label={t(\"scopesAsRequested\")}\n                    onChange={() => setHasRequiredScopes(true)}\n                    className=\"pf-u-mb-md\"\n                  />\n                </FormGroup>\n                {hasRequiredScopes && (\n                  <FormGroup fieldId=\"kc-scope-required-when\">\n                    <Controller\n                      name=\"required.scopes\"\n                      control={form.control}\n                      defaultValue={[]}\n                      render={({ field }) => (\n                        <Select\n                          name=\"scopeRequired\"\n                          data-testid=\"required-when-scope-field\"\n                          variant={SelectVariant.typeaheadMulti}\n                          typeAheadAriaLabel=\"Select\"\n                          chipGroupProps={{\n                            numChips: 3,\n                            expandedText: t(\"hide\"),\n                            collapsedText: t(\"showRemaining\"),\n                          }}\n                          onToggle={(isOpen) =>\n                            setSelectRequiredForOpen(isOpen)\n                          }\n                          selections={field.value}\n                          onSelect={(_, selectedValue) => {\n                            const option = selectedValue.toString();\n                            let changedValue = [\"\"];\n                            if (field.value) {\n                              changedValue = field.value.includes(option)\n                                ? field.value.filter(\n                                    (item: string) => item !== option,\n                                  )\n                                : [...field.value, option];\n                            } else {\n                              changedValue = [option];\n                            }\n                            field.onChange(changedValue);\n                          }}\n                          onClear={(selectedValues) => {\n                            selectedValues.stopPropagation();\n                            field.onChange([]);\n                          }}\n                          isOpen={selectRequiredForOpen}\n                          aria-labelledby={\"scope\"}\n                        >\n                          {clientScopes.map((option) => (\n                            <SelectOption\n                              key={option.name}\n                              value={option.name}\n                            />\n                          ))}\n                        </Select>\n                      )}\n                    />\n                  </FormGroup>\n                )}\n              </>\n            )}\n          </>\n        )}\n      </FormProvider>\n    </FormAccess>\n  );\n};\n","import { Checkbox, FormGroup, Grid, GridItem } from \"@patternfly/react-core\";\nimport { Controller, useFormContext } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { FormAccess } from \"../../../components/form/FormAccess\";\nimport { HelpItem } from \"ui-shared\";\n\nimport \"../../realm-settings-section.css\";\n\nconst Permissions = ({ name }: { name: string }) => {\n  const { t } = useTranslation();\n  const { control } = useFormContext();\n\n  return (\n    <Grid>\n      <Controller\n        name={`permissions.${name}`}\n        control={control}\n        defaultValue={[]}\n        render={({ field }) => (\n          <>\n            <GridItem lg={4} sm={6}>\n              <Checkbox\n                id={`user-${name}`}\n                label={t(\"user\")}\n                value=\"user\"\n                data-testid={`user-${name}`}\n                isChecked={field.value.includes(\"user\")}\n                onChange={() => {\n                  const option = \"user\";\n                  const changedValue = field.value.includes(option)\n                    ? field.value.filter((item: string) => item !== option)\n                    : [...field.value, option];\n\n                  field.onChange(changedValue);\n                }}\n              />\n            </GridItem>\n            <GridItem lg={8} sm={6}>\n              <Checkbox\n                id={`admin-${name}`}\n                label={t(\"admin\")}\n                value=\"admin\"\n                data-testid={`admin-${name}`}\n                isChecked={field.value.includes(\"admin\")}\n                onChange={() => {\n                  const option = \"admin\";\n                  const changedValue = field.value.includes(option)\n                    ? field.value.filter((item: string) => item !== option)\n                    : [...field.value, option];\n\n                  field.onChange(changedValue);\n                }}\n              />\n            </GridItem>\n          </>\n        )}\n      />\n    </Grid>\n  );\n};\n\nexport const AttributePermission = () => {\n  const { t } = useTranslation();\n\n  return (\n    <FormAccess role=\"manage-realm\" isHorizontal>\n      <FormGroup\n        hasNoPaddingTop\n        label={t(\"whoCanEdit\")}\n        labelIcon={\n          <HelpItem helpText={t(\"whoCanEditHelp\")} fieldLabelId=\"whoCanEdit\" />\n        }\n        fieldId=\"kc-who-can-edit\"\n      >\n        <Permissions name=\"edit\" />\n      </FormGroup>\n      <FormGroup\n        hasNoPaddingTop\n        label={t(\"whoCanView\")}\n        labelIcon={\n          <HelpItem helpText={t(\"whoCanViewHelp\")} fieldLabelId=\"whoCanView\" />\n        }\n        fieldId=\"kc-who-can-view\"\n      >\n        <Permissions name=\"view\" />\n      </FormGroup>\n    </FormAccess>\n  );\n};\n","import ComponentTypeRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/componentTypeRepresentation\";\nimport { FormGroup, Select, SelectOption } from \"@patternfly/react-core\";\nimport { useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useServerInfo } from \"../../../context/server-info/ServerInfoProvider\";\nimport useToggle from \"../../../utils/useToggle\";\n\ntype ValidatorSelectProps = {\n  selectedValidators: string[];\n  onChange: (validator: ComponentTypeRepresentation) => void;\n};\n\nexport const ValidatorSelect = ({\n  selectedValidators,\n  onChange,\n}: ValidatorSelectProps) => {\n  const { t } = useTranslation();\n  const allValidator: ComponentTypeRepresentation[] =\n    useServerInfo().componentTypes?.[\"org.keycloak.validate.Validator\"] || [];\n  const validators = useMemo(\n    () => allValidator.filter(({ id }) => !selectedValidators.includes(id)),\n    [selectedValidators],\n  );\n  const [open, toggle] = useToggle();\n  const [value, setValue] = useState<ComponentTypeRepresentation>();\n\n  return (\n    <FormGroup label={t(\"validatorType\")} fieldId=\"validator\">\n      <Select\n        toggleId=\"validator\"\n        onToggle={toggle}\n        onSelect={(_, value) => {\n          const option = value as ComponentTypeRepresentation;\n          onChange(option);\n          setValue(option);\n          toggle();\n        }}\n        selections={value?.id}\n        variant=\"single\"\n        aria-label={t(\"selectOne\")}\n        isOpen={open}\n        placeholderText={t(\"choose\")}\n        menuAppendTo=\"parent\"\n        maxHeight={300}\n      >\n        {validators.map((option) => (\n          <SelectOption\n            selected={value?.id === option.id}\n            key={option.id}\n            value={option}\n            description={option.helpText}\n          >\n            {option.id}\n          </SelectOption>\n        ))}\n      </Select>\n    </FormGroup>\n  );\n};\n","import ComponentRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/componentRepresentation\";\nimport ComponentTypeRepresentation from \"@keycloak/keycloak-admin-client/lib/defs/componentTypeRepresentation\";\nimport { Button, Form, Modal, ModalVariant } from \"@patternfly/react-core\";\nimport { useState } from \"react\";\nimport { FormProvider, useForm } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { DynamicComponents } from \"../../../components/dynamic/DynamicComponents\";\nimport { useServerInfo } from \"../../../context/server-info/ServerInfoProvider\";\nimport type { IndexedValidations } from \"../../NewAttributeSettings\";\nimport { ValidatorSelect } from \"./ValidatorSelect\";\n\nexport type AddValidatorDialogProps = {\n  selectedValidators: IndexedValidations[];\n  toggleDialog: () => void;\n  onConfirm: (newValidator: ComponentRepresentation) => void;\n};\n\nexport const AddValidatorDialog = ({\n  selectedValidators,\n  toggleDialog,\n  onConfirm,\n}: AddValidatorDialogProps) => {\n  const { t } = useTranslation();\n  const [selectedValidator, setSelectedValidator] =\n    useState<ComponentTypeRepresentation>();\n\n  const allSelected =\n    useServerInfo().componentTypes?.[\"org.keycloak.validate.Validator\"]\n      .length === selectedValidators.length;\n  const form = useForm<ComponentTypeRepresentation>();\n  const { handleSubmit } = form;\n\n  const save = (newValidator: ComponentTypeRepresentation) => {\n    onConfirm({ ...newValidator, id: selectedValidator?.id });\n    toggleDialog();\n  };\n\n  return (\n    <Modal\n      variant={ModalVariant.small}\n      title={t(\"addValidator\")}\n      isOpen\n      onClose={toggleDialog}\n      actions={[\n        <Button\n          key=\"save\"\n          data-testid=\"save-validator-role-button\"\n          variant=\"primary\"\n          type=\"submit\"\n          form=\"add-validator\"\n        >\n          {t(\"save\")}\n        </Button>,\n        <Button\n          key=\"cancel\"\n          data-testid=\"cancel-validator-role-button\"\n          variant=\"link\"\n          onClick={toggleDialog}\n        >\n          {t(\"cancel\")}\n        </Button>,\n      ]}\n    >\n      {allSelected ? (\n        t(\"emptyValidators\")\n      ) : (\n        <Form id=\"add-validator\" onSubmit={handleSubmit(save)}>\n          <ValidatorSelect\n            selectedValidators={selectedValidators.map(\n              (validator) => validator.key,\n            )}\n            onChange={setSelectedValidator}\n          />\n          {selectedValidator && (\n            <FormProvider {...form}>\n              <DynamicComponents properties={selectedValidator.properties} />\n            </FormProvider>\n          )}\n        </Form>\n      )}\n    </Modal>\n  );\n};\n","import {\n  Button,\n  ButtonVariant,\n  Divider,\n  Text,\n  TextVariants,\n} from \"@patternfly/react-core\";\nimport { PlusCircleIcon } from \"@patternfly/react-icons\";\nimport {\n  TableComposable,\n  Tbody,\n  Td,\n  Th,\n  Thead,\n  Tr,\n} from \"@patternfly/react-table\";\nimport { useEffect, useState } from \"react\";\nimport { useFormContext, useWatch } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { useConfirmDialog } from \"../../../components/confirm-dialog/ConfirmDialog\";\nimport { DefaultValue } from \"../../../components/key-value-form/KeyValueInput\";\nimport useToggle from \"../../../utils/useToggle\";\nimport type { IndexedValidations } from \"../../NewAttributeSettings\";\nimport { AddValidatorDialog } from \"../attribute/AddValidatorDialog\";\n\nimport \"../../realm-settings-section.css\";\n\nexport const AttributeValidations = () => {\n  const { t } = useTranslation();\n  const [addValidatorModalOpen, toggleModal] = useToggle();\n  const [validatorToDelete, setValidatorToDelete] = useState<string>();\n  const { setValue, control, register, getValues } = useFormContext();\n\n  const validators: IndexedValidations[] = useWatch({\n    name: \"validations\",\n    control,\n    defaultValue: [],\n  });\n\n  useEffect(() => {\n    register(\"validations\");\n  }, [register]);\n\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\n    titleKey: t(\"deleteValidatorConfirmTitle\"),\n    messageKey: t(\"deleteValidatorConfirmMsg\", {\n      validatorName: validatorToDelete,\n    }),\n    continueButtonLabel: \"delete\",\n    continueButtonVariant: ButtonVariant.danger,\n    onConfirm: async () => {\n      const updatedValidators = validators.filter(\n        (validator) => validator.key !== validatorToDelete,\n      );\n\n      setValue(\"validations\", [...updatedValidators]);\n    },\n  });\n\n  return (\n    <>\n      {addValidatorModalOpen && (\n        <AddValidatorDialog\n          selectedValidators={validators}\n          onConfirm={(newValidator) => {\n            const annotations: DefaultValue[] = getValues(\"annotations\");\n            if (\n              newValidator.id === \"options\" &&\n              !annotations.find((a) => a.key === \"inputType\")\n            ) {\n              setValue(\"annotations\", [\n                ...annotations,\n                { key: \"inputType\", value: \"select\" },\n              ]);\n            }\n            setValue(\"validations\", [\n              ...validators,\n              { key: newValidator.id, value: newValidator.config },\n            ]);\n          }}\n          toggleDialog={toggleModal}\n        />\n      )}\n      <DeleteConfirm />\n      <div className=\"kc-attributes-validations\">\n        <Button\n          id=\"addValidator\"\n          onClick={() => toggleModal()}\n          variant=\"link\"\n          data-testid=\"addValidator\"\n          className=\"kc--attributes-validations--add-validation-button\"\n          icon={<PlusCircleIcon />}\n        >\n          {t(\"addValidator\")}\n        </Button>\n        <Divider />\n        {validators.length !== 0 ? (\n          <TableComposable>\n            <Thead>\n              <Tr>\n                <Th>{t(\"validatorColNames.colName\")}</Th>\n                <Th>{t(\"validatorColNames.colConfig\")}</Th>\n                <Th aria-hidden=\"true\" />\n              </Tr>\n            </Thead>\n            <Tbody>\n              {validators.map((validator) => (\n                <Tr key={validator.key}>\n                  <Td dataLabel={t(\"validatorColNames.colName\")}>\n                    {validator.key}\n                  </Td>\n                  <Td dataLabel={t(\"validatorColNames.colConfig\")}>\n                    {JSON.stringify(validator.value)}\n                  </Td>\n                  <Td className=\"kc--attributes-validations--action-cell\">\n                    <Button\n                      key=\"validator\"\n                      variant=\"link\"\n                      data-testid=\"deleteValidator\"\n                      onClick={() => {\n                        toggleDeleteDialog();\n                        setValidatorToDelete(validator.key);\n                      }}\n                    >\n                      {t(\"delete\")}\n                    </Button>\n                  </Td>\n                </Tr>\n              ))}\n            </Tbody>\n          </TableComposable>\n        ) : (\n          <Text className=\"kc-emptyValidators\" component={TextVariants.p}>\n            {t(\"emptyValidators\")}\n          </Text>\n        )}\n      </div>\n    </>\n  );\n};\n","import type {\n  UserProfileAttribute,\n  UserProfileConfig,\n} from \"@keycloak/keycloak-admin-client/lib/defs/userProfileMetadata\";\nimport {\n  AlertVariant,\n  Button,\n  Form,\n  PageSection,\n} from \"@patternfly/react-core\";\nimport { flatten } from \"flat\";\nimport { useState } from \"react\";\nimport { FormProvider, useForm, useFormContext } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { ScrollForm } from \"ui-shared\";\nimport { adminClient } from \"../admin-client\";\nimport { useAlerts } from \"../components/alert/Alerts\";\nimport { FixedButtonsGroup } from \"../components/form/FixedButtonGroup\";\nimport { ViewHeader } from \"../components/view-header/ViewHeader\";\nimport { convertToFormValues } from \"../util\";\nimport { useFetch } from \"../utils/useFetch\";\nimport { useParams } from \"../utils/useParams\";\nimport type { AttributeParams } from \"./routes/Attribute\";\nimport { toUserProfile } from \"./routes/UserProfile\";\nimport { UserProfileProvider } from \"./user-profile/UserProfileContext\";\nimport { AttributeAnnotations } from \"./user-profile/attribute/AttributeAnnotations\";\nimport { AttributeGeneralSettings } from \"./user-profile/attribute/AttributeGeneralSettings\";\nimport { AttributePermission } from \"./user-profile/attribute/AttributePermission\";\nimport { AttributeValidations } from \"./user-profile/attribute/AttributeValidations\";\n\nimport \"./realm-settings-section.css\";\n\ntype IndexedAnnotations = {\n  key: string;\n  value?: Record<string, unknown>;\n};\n\nexport type IndexedValidations = {\n  key: string;\n  value?: Record<string, unknown>;\n};\n\ntype UserProfileAttributeFormFields = Omit<\n  UserProfileAttribute,\n  \"validations\" | \"annotations\"\n> &\n  Attribute &\n  Permission & {\n    validations: IndexedValidations[];\n    annotations: IndexedAnnotations[];\n    hasSelector: boolean;\n    hasRequiredScopes: boolean;\n  };\n\ntype Attribute = {\n  roles: string[];\n  scopes: string[];\n  isRequired: boolean;\n};\n\ntype Permission = {\n  view: PermissionView[];\n  edit: PermissionEdit[];\n};\n\ntype PermissionView = [\n  {\n    adminView: boolean;\n    userView: boolean;\n  },\n];\n\ntype PermissionEdit = [\n  {\n    adminEdit: boolean;\n    userEdit: boolean;\n  },\n];\n\nexport const USERNAME_EMAIL = [\"username\", \"email\"];\n\nconst CreateAttributeFormContent = ({\n  save,\n}: {\n  save: (profileConfig: UserProfileConfig) => void;\n}) => {\n  const { t } = useTranslation();\n  const form = useFormContext();\n  const { realm, attributeName } = useParams<AttributeParams>();\n  const editMode = attributeName ? true : false;\n\n  return (\n    <UserProfileProvider>\n      <ScrollForm\n        label={t(\"jumpToSection\")}\n        sections={[\n          { title: t(\"generalSettings\"), panel: <AttributeGeneralSettings /> },\n          { title: t(\"permission\"), panel: <AttributePermission /> },\n          { title: t(\"validations\"), panel: <AttributeValidations /> },\n          { title: t(\"annotations\"), panel: <AttributeAnnotations /> },\n        ]}\n      />\n      <Form onSubmit={form.handleSubmit(save)}>\n        <FixedButtonsGroup name=\"attribute-settings\">\n          <Button\n            variant=\"primary\"\n            type=\"submit\"\n            data-testid=\"attribute-create\"\n          >\n            {editMode ? t(\"save\") : t(\"create\")}\n          </Button>\n          <Link\n            to={toUserProfile({ realm, tab: \"attributes\" })}\n            data-testid=\"attribute-cancel\"\n            className=\"kc-attributeCancel\"\n          >\n            {t(\"cancel\")}\n          </Link>\n        </FixedButtonsGroup>\n      </Form>\n    </UserProfileProvider>\n  );\n};\n\nexport default function NewAttributeSettings() {\n  const { realm, attributeName } = useParams<AttributeParams>();\n  const form = useForm<UserProfileAttributeFormFields>();\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const { addAlert, addError } = useAlerts();\n  const [config, setConfig] = useState<UserProfileConfig | null>(null);\n  const editMode = attributeName ? true : false;\n\n  useFetch(\n    () => adminClient.users.getProfile(),\n    (config) => {\n      setConfig(config);\n      const {\n        annotations,\n        validations,\n        permissions,\n        selector,\n        required,\n        multivalued,\n        ...values\n      } = config.attributes!.find(\n        (attribute) => attribute.name === attributeName,\n      ) || { permissions: { edit: [\"admin\"] } };\n      convertToFormValues(\n        {\n          ...values,\n          hasSelector: typeof selector !== \"undefined\",\n          hasRequiredScopes: typeof required?.scopes !== \"undefined\",\n        },\n        form.setValue,\n      );\n      Object.entries(\n        flatten<any, any>({ permissions, selector, required }, { safe: true }),\n      ).map(([key, value]) => form.setValue(key as any, value));\n      form.setValue(\n        \"annotations\",\n        Object.entries(annotations || {}).map(([key, value]) => ({\n          key,\n          value: value as Record<string, unknown>,\n        })),\n      );\n      form.setValue(\n        \"validations\",\n        Object.entries(validations || {}).map(([key, value]) => ({\n          key,\n          value: value as Record<string, unknown>,\n        })),\n      );\n      form.setValue(\"isRequired\", required !== undefined);\n      form.setValue(\"multivalued\", multivalued === true);\n    },\n    [],\n  );\n\n  const save = async ({\n    hasSelector,\n    hasRequiredScopes,\n    ...formFields\n  }: UserProfileAttributeFormFields) => {\n    if (!hasSelector) {\n      delete formFields.selector;\n    }\n\n    if (!hasRequiredScopes) {\n      delete formFields.required?.scopes;\n    }\n\n    const validations = formFields.validations.reduce(\n      (prevValidations, currentValidations) => {\n        prevValidations[currentValidations.key] =\n          currentValidations.value || {};\n        return prevValidations;\n      },\n      {} as Record<string, unknown>,\n    );\n\n    const annotations = formFields.annotations.reduce(\n      (obj, item) => Object.assign(obj, { [item.key]: item.value }),\n      {},\n    );\n\n    const patchAttributes = () =>\n      config?.attributes!.map((attribute) => {\n        if (attribute.name !== attributeName) {\n          return attribute;\n        }\n\n        delete attribute.required;\n        return Object.assign(\n          {\n            ...attribute,\n            name: attributeName,\n            displayName: formFields.displayName!,\n            selector: formFields.selector,\n            permissions: formFields.permissions!,\n            multivalued: formFields.multivalued,\n            annotations,\n            validations,\n          },\n          formFields.isRequired ? { required: formFields.required } : undefined,\n          formFields.group ? { group: formFields.group } : { group: null },\n        );\n      });\n\n    const addAttribute = () =>\n      config?.attributes!.concat([\n        Object.assign(\n          {\n            name: formFields.name,\n            displayName: formFields.displayName!,\n            required: formFields.isRequired ? formFields.required : undefined,\n            selector: formFields.selector,\n            permissions: formFields.permissions!,\n            multivalued: formFields.multivalued,\n            annotations,\n            validations,\n          },\n          formFields.isRequired ? { required: formFields.required } : undefined,\n          formFields.group ? { group: formFields.group } : undefined,\n        ),\n      ] as UserProfileAttribute);\n\n    const updatedAttributes = editMode ? patchAttributes() : addAttribute();\n\n    try {\n      await adminClient.users.updateProfile({\n        ...config,\n        attributes: updatedAttributes as UserProfileAttribute[],\n        realm,\n      });\n\n      navigate(toUserProfile({ realm, tab: \"attributes\" }));\n\n      addAlert(t(\"createAttributeSuccess\"), AlertVariant.success);\n    } catch (error) {\n      addError(\"createAttributeError\", error);\n    }\n  };\n\n  return (\n    <FormProvider {...form}>\n      <ViewHeader\n        titleKey={editMode ? attributeName : t(\"createAttribute\")}\n        subKey={editMode ? \"\" : t(\"createAttributeSubTitle\")}\n      />\n      <PageSection variant=\"light\">\n        <CreateAttributeFormContent save={() => form.handleSubmit(save)()} />\n      </PageSection>\n    </FormProvider>\n  );\n}\n"],"names":["AttributeAnnotations","t","useTranslation","jsx","FormAccess","FormGroup","Grid","GridItem","KeyValueInput","REQUIRED_FOR","AttributeGeneralSettings","form","useFormContext","clientScopes","setClientScopes","useState","config","setConfig","selectEnabledWhenOpen","setSelectEnabledWhenOpen","selectRequiredForOpen","setSelectRequiredForOpen","isAttributeGroupDropdownOpen","setIsAttributeGroupDropdownOpen","attributeName","useParams","editMode","hasSelector","useWatch","hasRequiredScopes","required","useFetch","adminClient","KeycloakSpinner","setHasSelector","setHasRequiredScopes","jsxs","FormProvider","HelpItem","KeycloakTextInput","DefaultSwitchControl","Controller","field","Select","_","value","SelectVariant","SelectOption","group","USERNAME_EMAIL","Fragment","Divider","Radio","isOpen","selectedValue","option","changedValue","item","selectedValues","Switch","isEqual","Permissions","name","control","Checkbox","AttributePermission","ValidatorSelect","selectedValidators","onChange","allValidator","useServerInfo","validators","useMemo","id","open","toggle","useToggle","setValue","AddValidatorDialog","toggleDialog","onConfirm","selectedValidator","setSelectedValidator","allSelected","useForm","handleSubmit","save","newValidator","Modal","ModalVariant","Button","Form","validator","DynamicComponents","AttributeValidations","addValidatorModalOpen","toggleModal","validatorToDelete","setValidatorToDelete","register","getValues","useEffect","toggleDeleteDialog","DeleteConfirm","useConfirmDialog","ButtonVariant","updatedValidators","annotations","a","PlusCircleIcon","TableComposable","Thead","Tr","Th","Tbody","Td","Text","TextVariants","CreateAttributeFormContent","realm","UserProfileProvider","ScrollForm","FixedButtonsGroup","Link","toUserProfile","NewAttributeSettings","navigate","useNavigate","addAlert","addError","useAlerts","validations","permissions","selector","multivalued","values","attribute","convertToFormValues","flatten","key","formFields","prevValidations","currentValidations","obj","updatedAttributes","AlertVariant","error","ViewHeader","PageSection"],"mappings":"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"}