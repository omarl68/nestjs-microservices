{"version":3,"file":"Page-CuTYajrr.js","sources":["../../src/page/Page.tsx"],"sourcesContent":["import { ButtonVariant, DropdownItem } from \"@patternfly/react-core\";\nimport { useTranslation } from \"react-i18next\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { adminClient } from \"../admin-client\";\nimport { useAlerts } from \"../components/alert/Alerts\";\nimport { useConfirmDialog } from \"../components/confirm-dialog/ConfirmDialog\";\nimport { ViewHeader } from \"../components/view-header/ViewHeader\";\nimport { useServerInfo } from \"../context/server-info/ServerInfoProvider\";\nimport { PageHandler } from \"./PageHandler\";\nimport { PAGE_PROVIDER } from \"./PageList\";\nimport { PageParams, toPage } from \"./routes\";\nimport { useRealm } from \"../context/realm-context/RealmContext\";\n\nexport default function Page() {\n  const { t } = useTranslation();\n  const { componentTypes } = useServerInfo();\n  const { realm } = useRealm();\n  const pages = componentTypes?.[PAGE_PROVIDER];\n  const navigate = useNavigate();\n  const { id, providerId } = useParams<PageParams>();\n  const { addAlert, addError } = useAlerts();\n\n  const page = pages?.find((p) => p.id === providerId);\n  if (!page) {\n    throw new Error(t(\"notFound\"));\n  }\n\n  const [toggleDeleteDialog, DeleteConfirm] = useConfirmDialog({\n    titleKey: \"itemDeleteConfirmTitle\",\n    messageKey: \"itemDeleteConfirm\",\n    continueButtonLabel: \"delete\",\n    continueButtonVariant: ButtonVariant.danger,\n    onConfirm: async () => {\n      try {\n        await adminClient.components.del({\n          id: id!,\n        });\n        addAlert(t(\"itemDeletedSuccess\"));\n        navigate(toPage({ realm, providerId: providerId! }));\n      } catch (error) {\n        addError(\"itemSaveError\", error);\n      }\n    },\n  });\n  return (\n    <>\n      <DeleteConfirm />\n      <ViewHeader\n        titleKey={id || t(\"createItem\")}\n        dropdownItems={\n          id\n            ? [\n                <DropdownItem\n                  data-testid=\"delete-item\"\n                  key=\"delete\"\n                  onClick={() => toggleDeleteDialog()}\n                >\n                  {t(\"delete\")}\n                </DropdownItem>,\n              ]\n            : undefined\n        }\n      />\n      <PageHandler providerType={PAGE_PROVIDER} id={id} page={page} />\n    </>\n  );\n}\n"],"names":["Page","useTranslation","componentTypes","useServerInfo","realm","useRealm","pages","PAGE_PROVIDER","navigate","useNavigate","id","providerId","useParams","addAlert","addError","useAlerts","page","p","toggleDeleteDialog","DeleteConfirm","useConfirmDialog","ButtonVariant","adminClient","toPage","error","jsxs","Fragment","jsx","ViewHeader","DropdownItem","PageHandler"],"mappings":"uvCAaA,SAAwBA,IAAO,CACvB,KAAA,CAAE,GAAMC,IACR,CAAE,eAAAC,GAAmBC,IACrB,CAAE,MAAAC,GAAUC,IACZC,EAAQJ,IAAiBK,CAAa,EACtCC,EAAWC,IACX,CAAE,GAAAC,EAAI,WAAAC,CAAW,EAAIC,EAAsB,EAC3C,CAAE,SAAAC,EAAU,SAAAC,CAAS,EAAIC,EAAU,EAEnCC,EAAOV,GAAO,KAAMW,GAAMA,EAAE,KAAON,CAAU,EACnD,GAAI,CAACK,EACH,MAAM,IAAI,MAAM,EAAE,UAAU,CAAC,EAG/B,KAAM,CAACE,EAAoBC,CAAa,EAAIC,EAAiB,CAC3D,SAAU,yBACV,WAAY,oBACZ,oBAAqB,SACrB,sBAAuBC,EAAc,OACrC,UAAW,SAAY,CACjB,GAAA,CACI,MAAAC,EAAY,WAAW,IAAI,CAC/B,GAAAZ,CAAA,CACD,EACQG,EAAA,EAAE,oBAAoB,CAAC,EAChCL,EAASe,EAAO,CAAE,MAAAnB,EAAO,WAAAO,CAAA,CAAyB,CAAC,QAC5Ca,EAAO,CACdV,EAAS,gBAAiBU,CAAK,CACjC,CACF,CAAA,CACD,EACD,OAEIC,EAAAC,EAAA,CAAA,SAAA,CAAAC,EAACR,EAAc,EAAA,EACfQ,EAACC,EAAA,CACC,SAAUlB,GAAM,EAAE,YAAY,EAC9B,cACEA,EACI,CACEiB,EAACE,EAAA,CACC,cAAY,cAEZ,QAAS,IAAMX,EAAmB,EAEjC,WAAE,QAAQ,CAAA,EAHP,QAIN,CAEF,EAAA,MAAA,CAER,EACCS,EAAAG,EAAA,CAAY,aAAcvB,EAAe,GAAAG,EAAQ,KAAAM,EAAY,CAChE,CAAA,CAAA,CAEJ"}