import{jsxs as d,Fragment as T,jsx as e}from"react/jsx-runtime";import{useState as U}from"react";import{u as z,c as F,e as k,g as q,q as H,bi as c,D as L,P as V,a0 as m,a1 as p,a2 as n,h as u,B as C,L as B,f as h,A as E}from"./index-C9t2UlUN.js";import{F as K}from"./FormAccess-DnQCcStE.js";import{K as f}from"./KeycloakTextInput-DrlF32nr.js";import{V as P}from"./ViewHeader-cxZm8XhN.js";import{u as j}from"./useParams-DL8-63Ov.js";import{u as G}from"./useToggle-K3Kx99tM.js";import{D as R}from"./DeleteScopeDialog-DQGMYZro.js";import{A as O}from"./Form-Cdw1qhWG.js";import"react-dom";import"./copy-icon-CYSS18Ce.js";import"./ToolbarContent-D6TJq6fk.js";import"./ConfirmDialog-BDkqxnFL.js";import"./Modal-Bgkd26UL.js";function ne(){const{t:a}=z(),{id:i,scopeId:r,realm:l}=j(),g=F(),{addAlert:y,addError:A}=k(),[D,b]=G(),[o,I]=U(),{register:s,reset:S,handleSubmit:N,formState:{errors:v}}=q({mode:"onChange"});H(async()=>{if(r){const t=await h.clients.getAuthorizationScope({id:i,scopeId:r});if(!t)throw new Error(a("notFound"));return t}},t=>{I(t),S({...t})},[]);const w=async t=>{try{r?(await h.clients.updateAuthorizationScope({id:i,scopeId:r},t),I(t)):(await h.clients.createAuthorizationScope({id:i},{name:t.name,displayName:t.displayName,iconUri:t.iconUri}),g(c({realm:l,clientId:i,tab:"scopes"}))),y(a((r?"update":"create")+"ScopeSuccess"),E.success)}catch(x){A("scopeSaveError",x)}};return d(T,{children:[e(R,{clientId:i,open:D,toggleDialog:b,selectedScope:o,refresh:()=>g(c({realm:l,clientId:i,tab:"scopes"}))}),e(P,{titleKey:r?o?.name:a("createAuthorizationScope"),dropdownItems:r?[e(L,{"data-testid":"delete-resource",onClick:()=>b(),children:a("delete")},"delete")]:void 0}),e(V,{variant:"light",children:d(K,{isHorizontal:!0,role:"manage-authorization",onSubmit:N(w),children:[e(m,{label:a("name"),fieldId:"name",labelIcon:e(p,{helpText:a("scopeNameHelp"),fieldLabelId:"name"}),helperTextInvalid:a("required"),validated:v.name?n.error:n.default,isRequired:!0,children:e(f,{id:"name",validated:v.name?n.error:n.default,isRequired:!0,...s("name",{required:!0})})}),e(m,{label:a("displayName"),fieldId:"displayName",labelIcon:e(p,{helpText:a("scopeDisplayNameHelp"),fieldLabelId:"displayName"}),children:e(f,{id:"displayName",...s("displayName")})}),e(m,{label:a("iconUri"),fieldId:"iconUri",labelIcon:e(p,{helpText:a("iconUriHelp"),fieldLabelId:"iconUri"}),children:e(f,{id:"iconUri",...s("iconUri")})}),e(O,{children:d("div",{className:"pf-u-mt-md",children:[e(u,{variant:C.primary,type:"submit","data-testid":"save",children:a("save")}),o?e(u,{variant:"link","data-testid":"revert",onClick:()=>S({...o}),children:a("revert")}):e(u,{variant:"link","data-testid":"cancel",component:t=>e(B,{...t,to:c({realm:l,clientId:i,tab:"scopes"})}),children:a("cancel")})]})})]})})]})}export{ne as default};
//# sourceMappingURL=ScopeDetails-CTNls-1P.js.map
