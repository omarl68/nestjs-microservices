import{jsx as t,jsxs as u,Fragment as R}from"react/jsx-runtime";import*as o from"react";import{useState as q,useMemo as F,Fragment as O}from"react";import{_ as C,k as v,dl as P,cF as j,C as H,cE as L,u as S,aN as G,I as K,S as M,at as B,Z as U,aT as V,a4 as W,bb as Z,bc as f,h as k,ac as z,ae as $}from"./index-C9t2UlUN.js";import{K as _}from"./KeycloakTextInput-DrlF32nr.js";import{K as J,A as Q,a as X}from"./KeySelect-CPI9XGq0.js";import{E as Y,a as D}from"./EmptyStateBody-CyIhnUop.js";const m={helperText:"pf-c-helper-text",helperTextItem:"pf-c-helper-text__item",helperTextItemIcon:"pf-c-helper-text__item-icon",helperTextItemText:"pf-c-helper-text__item-text",modifiers:{indeterminate:"pf-m-indeterminate",warning:"pf-m-warning",success:"pf-m-success",error:"pf-m-error",dynamic:"pf-m-dynamic"},themeDark:"pf-theme-dark"},g=r=>{var{children:c,className:n,component:a="div",id:e,isLiveRegion:i=!1}=r,l=C(r,["children","className","component","id","isLiveRegion"]);const d=a;return o.createElement(d,Object.assign({id:e,className:v(m.helperText,n)},i&&{"aria-live":"polite"},l),c)};g.displayName="HelperText";const ee={default:"",indeterminate:m.modifiers.indeterminate,warning:m.modifiers.warning,success:m.modifiers.success,error:m.modifiers.error},T=r=>{var{children:c,className:n,component:a="div",variant:e="default",icon:i,isDynamic:l=!1,hasIcon:d=l,id:s,screenReaderText:h=`${e} status`}=r,y=C(r,["children","className","component","variant","icon","isDynamic","hasIcon","id","screenReaderText"]);const x=a;return o.createElement(x,Object.assign({className:v(m.helperTextItem,ee[e],l&&m.modifiers.dynamic,n),id:s},y),i&&o.createElement("span",{className:v(m.helperTextItemIcon),"aria-hidden":!0},i),d&&!i&&o.createElement("span",{className:v(m.helperTextItemIcon),"aria-hidden":!0},(e==="default"||e==="indeterminate")&&o.createElement(P,null),e==="warning"&&o.createElement(j,null),e==="success"&&o.createElement(H,null),e==="error"&&o.createElement(L,null)),o.createElement("span",{className:v(m.helperTextItemText)},c,l&&o.createElement("span",{className:"pf-u-screen-reader"},": ",h,";")))};T.displayName="HelperTextItem";const te=({selectItems:r,keyValue:c,...n})=>{const{t:a}=S(),{field:e}=G(n),[i,l]=q(!1),d=F(()=>r.find(s=>s.key===c),[r,c]);return d?.values?t(K,{onToggle:s=>l(s),isOpen:i,onSelect:(s,h)=>{e.onChange(h),l(!1)},selections:e.value?[e.value]:a("choose"),placeholder:a("valuePlaceholder"),children:d.values.map(s=>t(M,{value:s},s))}):t(B,{"aria-label":a("customValue"),"data-testid":n.name,...e})},ie=({name:r,label:c="attributes",defaultKeyValue:n,isDisabled:a=!1})=>{const{t:e}=S(),{control:i,register:l,formState:{errors:d}}=U(),{fields:s,append:h,remove:y}=V({shouldUnregister:!0,control:i,name:r}),x=()=>h({key:"",value:""}),b=W({name:r,control:i,defaultValue:[]});return s.length>0?u(R,{children:[u(Z,{hasGutter:!0,children:[t(f,{className:"pf-c-form__label",span:5,children:t("span",{className:"pf-c-form__label-text",children:e("key")})}),t(f,{className:"pf-c-form__label",span:7,children:t("span",{className:"pf-c-form__label-text",children:e("value")})}),s.map((w,p)=>{const I=d[r]?.[p],E=!!I?.key,N=!!I?.value||!!I?.message,A=I?.message||e("valueError");return u(O,{children:[u(f,{span:5,children:[n?t(J,{name:`${r}.${p}.key`,selectItems:n,rules:{required:!0}}):t(_,{placeholder:e("keyPlaceholder"),"aria-label":e("key"),"data-testid":`${r}-key`,...l(`${r}.${p}.key`,{required:!0}),validated:E?"error":"default",isRequired:!0,isDisabled:a}),E&&t(g,{children:t(T,{variant:"error",children:e("keyError")})})]}),u(f,{span:5,children:[n?t(te,{name:`${r}.${p}.value`,keyValue:b[p]?.key,selectItems:n,rules:{required:!0}}):t(_,{placeholder:e("valuePlaceholder"),"aria-label":e("value"),"data-testid":`${r}-value`,...l(`${r}.${p}.value`,{required:!0}),validated:N?"error":"default",isRequired:!0,isDisabled:a}),N&&t(g,{children:t(T,{variant:"error",children:A})})]}),t(f,{span:2,children:t(k,{variant:"link",title:e("removeAttribute"),onClick:()=>y(p),"data-testid":`${r}-remove`,isDisabled:a,children:t(z,{})})})]},w.id)})]}),t(Q,{children:t(X,{children:t(k,{"data-testid":`${r}-add-row`,className:"pf-u-px-0 pf-u-mt-sm",variant:"link",icon:t($,{}),onClick:x,isDisabled:a,children:e("addAttribute",{label:c})})})})]}):u(Y,{"data-testid":`${r}-empty-state`,className:"pf-u-p-0",variant:"xs",children:[t(D,{children:e("missingAttributes",{label:c})}),t(k,{"data-testid":`${r}-add-row`,variant:"link",icon:t($,{}),isSmall:!0,onClick:x,isDisabled:a,children:e("addAttribute",{label:c})})]})};export{ie as K};
//# sourceMappingURL=KeyValueInput-BJlDoGlu.js.map
