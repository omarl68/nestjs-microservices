import{jsxs as G,jsx as N,Fragment as Y}from"react/jsx-runtime";import*as e from"react";import{Children as q,isValidElement as z,cloneElement as C}from"react";import{_ as k,K as J,h as D,l as M,k as b,cg as Q,ca as O,aY as V,dg as X,u as Z,aR as ee,a3 as te,cW as ae,a0 as oe,bc as ie,bb as ne,aK as se,aL as re}from"./index-C9t2UlUN.js";import{a as le,A as R,F as pe}from"./Form-Cdw1qhWG.js";import{C as de}from"./copy-icon-CYSS18Ce.js";const y={button:"pf-c-button",clipboardCopy:"pf-c-clipboard-copy",clipboardCopyActions:"pf-c-clipboard-copy__actions",clipboardCopyActionsItem:"pf-c-clipboard-copy__actions-item",clipboardCopyExpandableContent:"pf-c-clipboard-copy__expandable-content",clipboardCopyGroup:"pf-c-clipboard-copy__group",clipboardCopyText:"pf-c-clipboard-copy__text",clipboardCopyToggleIcon:"pf-c-clipboard-copy__toggle-icon",modifiers:{expanded:"pf-m-expanded",inline:"pf-m-inline",block:"pf-m-block",code:"pf-m-code"},themeDark:"pf-theme-dark"},A=o=>{var{onClick:i,exitDelay:a=0,entryDelay:n=300,maxWidth:r="100px",position:l="top","aria-label":p="Copyable input",id:s,textId:c,children:h,variant:u="control",onTooltipHidden:t=()=>{},removeFindDomNode:x=!1}=o,m=k(o,["onClick","exitDelay","entryDelay","maxWidth","position","aria-label","id","textId","children","variant","onTooltipHidden","removeFindDomNode"]);return e.createElement(J,{trigger:"mouseenter focus click",exitDelay:a,entryDelay:n,maxWidth:r,position:l,"aria-live":"polite",aria:"none",content:e.createElement("div",null,h),onTooltipHidden:t,removeFindDomNode:x},e.createElement(D,Object.assign({type:"button",variant:u,onClick:i,"aria-label":p,id:s,"aria-labelledby":`${s} ${c}`},m),e.createElement(de,null)))};A.displayName="ClipboardCopyButton";const W=o=>{var{onClick:i,id:a,textId:n,contentId:r,isExpanded:l=!1}=o,p=k(o,["onClick","id","textId","contentId","isExpanded"]);return e.createElement(D,Object.assign({type:"button",variant:"control",onClick:i,id:a,"aria-labelledby":`${a} ${n}`,"aria-controls":`${a} ${r}`,"aria-expanded":l},p),l?e.createElement(le,{"aria-hidden":"true"}):e.createElement(M,{"aria-hidden":"true"}))};W.displayName="ClipboardCopyToggle";class $ extends e.Component{constructor(i){super(i)}render(){const i=this.props,{className:a,children:n,onChange:r,isReadOnly:l,isCode:p}=i,s=k(i,["className","children","onChange","isReadOnly","isCode"]);return e.createElement("div",Object.assign({suppressContentEditableWarning:!0,className:b(y.clipboardCopyExpandableContent,a),onInput:c=>r(c.target.innerText,c),contentEditable:!l},s),p?e.createElement("pre",null,n):n)}}$.displayName="ClipboardCopyExpanded";$.defaultProps={onChange:()=>{},className:"",isReadOnly:!1,isCode:!1};const ce=(o,i)=>{navigator.clipboard.writeText(i.toString())};var S;(function(o){o.inline="inline",o.expansion="expansion",o.inlineCompact="inline-compact"})(S||(S={}));class f extends e.Component{constructor(i){super(i),this.timer=null,this.componentDidUpdate=(a,n)=>{a.children!==this.props.children&&this.updateText(this.props.children)},this.componentWillUnmount=()=>{this.timer&&window.clearTimeout(this.timer)},this.expandContent=a=>{this.setState(n=>({expanded:!n.expanded}))},this.updateText=a=>{this.setState({text:a}),this.props.onChange(a)},this.render=()=>{const a=this.props,{isExpanded:n,onChange:r,switchDelay:l,isReadOnly:p,isCode:s,isBlock:c,exitDelay:h,maxWidth:u,entryDelay:t,onCopy:x,hoverTip:m,clickTip:g,textAriaLabel:E,toggleAriaLabel:w,variant:v,position:_,className:L,additionalActions:F,ouiaId:j,ouiaSafe:B,removeFindDomNode:H}=a,P=k(a,["isExpanded","onChange","switchDelay","isReadOnly","isCode","isBlock","exitDelay","maxWidth","entryDelay","onCopy","hoverTip","clickTip","textAriaLabel","toggleAriaLabel","variant","position","className","additionalActions","ouiaId","ouiaSafe","removeFindDomNode"]),T="text-input-",U="toggle-",K="content-";return e.createElement("div",Object.assign({className:b(y.clipboardCopy,v==="inline-compact"&&y.modifiers.inline,c&&y.modifiers.block,this.state.expanded&&y.modifiers.expanded,L)},P,Q(f.displayName,j,B)),v==="inline-compact"&&e.createElement(O,{prefix:""},d=>e.createElement(e.Fragment,null,!s&&e.createElement("span",{className:b(y.clipboardCopyText),id:`${T}${d}`},this.state.text),s&&e.createElement("code",{className:b(y.clipboardCopyText,y.modifiers.code),id:`${T}${d}`},this.state.text),e.createElement("span",{className:b(y.clipboardCopyActions)},e.createElement("span",{className:b(y.clipboardCopyActionsItem)},e.createElement(A,{variant:"plain",exitDelay:h,entryDelay:t,maxWidth:u,position:_,id:`copy-button-${d}`,textId:`text-input-${d}`,"aria-label":m,onClick:I=>{x(I,this.state.text),this.setState({copied:!0})},onTooltipHidden:()=>this.setState({copied:!1})},this.state.copied?g:m)),F&&F))),v!=="inline-compact"&&e.createElement(O,{prefix:""},d=>e.createElement(e.Fragment,null,e.createElement("div",{className:b(y.clipboardCopyGroup)},v==="expansion"&&e.createElement(W,{isExpanded:this.state.expanded,onClick:this.expandContent,id:`${U}${d}`,textId:`${T}${d}`,contentId:`${K}${d}`,"aria-label":w}),e.createElement(V,{isReadOnly:p||this.state.expanded,onChange:this.updateText,value:this.state.text,id:`text-input-${d}`,"aria-label":E}),e.createElement(A,{exitDelay:h,entryDelay:t,maxWidth:u,position:_,id:`copy-button-${d}`,textId:`text-input-${d}`,"aria-label":m,onClick:I=>{x(I,this.state.text),this.setState({copied:!0})},onTooltipHidden:()=>this.setState({copied:!1}),removeFindDomNode:H},this.state.copied?g:m)),this.state.expanded&&e.createElement($,{isReadOnly:p,isCode:s,id:`content-${d}`,onChange:this.updateText},this.state.text))))},this.state={text:Array.isArray(this.props.children)?this.props.children.join(""):this.props.children,expanded:this.props.isExpanded,copied:!1},this.props.switchDelay!==void 0&&console.warn("ClipboardCopy: switchDelay prop has been deprecated. The tooltip message will switch back to the hover tip as soon as the tooltip is hidden.")}}f.displayName="ClipboardCopy";f.defaultProps={hoverTip:"Copy to clipboard",clickTip:"Successfully copied to clipboard!",isReadOnly:!1,isExpanded:!1,isCode:!1,variant:"inline",position:X.top,maxWidth:"150px",exitDelay:1500,entryDelay:300,onCopy:ce,onChange:()=>{},textAriaLabel:"Copyable input",toggleAriaLabel:"Show content",additionalActions:null,ouiaSafe:!0,removeFindDomNode:!1};const me="_buttonGroup_1ld5y_1",ye={buttonGroup:me},ue=({name:o,save:i,reset:a,isSubmit:n=!1,isActive:r=!0,children:l,...p})=>{const{t:s}=Z();return G(R,{className:ye.buttonGroup,...p,children:[(i||n)&&N(D,{isDisabled:!r,"data-testid":`${o}-save`,onClick:()=>i?.(),type:n?"submit":"button",children:s("save")}),a&&N(D,{isDisabled:!r,"data-testid":`${o}-revert`,variant:"link",onClick:()=>a(),children:s("revert")}),l]})},ge=({children:o,role:i,fineGrainedAccess:a=!1,isReadOnly:n=!1,unWrap:r=!1,...l})=>{const{hasAccess:p}=ee(),s=(h,u)=>q.map(h,t=>{if(!z(t))return t;if(t.props){const x=t;if(t.type===te)return C(t,{...x.props,render:g=>{const E=x.props.render(g);return C(E,{...E.props,...u})}});const m=s(x.props.children,u);switch(t.type){case ue:return C(t,{isActive:!u.isDisabled,children:m});case ae:return C(t,{readOnly:u.isDisabled,children:m})}return C(t,t.type===oe||t.type===ie||t.type===ne||t.type===R||t.type===f||t.type===se||t.type===re?{children:m}:{...u,children:m})}return t}),c=n||!p(i)&&!a;return G(Y,{children:[!r&&N(pe,{...l,className:"keycloak__form "+(l.className||""),children:s(o,c?{isDisabled:c}:{})}),r&&s(o,c?{isDisabled:c}:{})]})};export{A as C,ge as F,ue as a,f as b};
//# sourceMappingURL=FormAccess-DnQCcStE.js.map
